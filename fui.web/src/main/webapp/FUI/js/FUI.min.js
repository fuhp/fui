(function(c,f){c.FUI=c.FUI||{};if(c.FUI.version){return}c.extend(c.FUI,{version:"FVersion@1.0.9-SNAPSHOT",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(g,h){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){c(i).focus();if(h){h.call(i)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;if((c.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(c.curCSS(this,"position",1))&&(/(auto|scroll)/).test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?c(document):g},zIndex:function(j){if(j!==f){return this.css("zIndex",j)}if(this.length){var h=c(this[0]),g,i;while(h.length&&h[0]!==document){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){i=parseInt(h.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}h=h.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});c.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:c.fn.innerWidth,innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};function l(o,n,i,p){c.each(h,function(){n-=parseFloat(c.curCSS(o,"padding"+this,true))||0;if(i){n-=parseFloat(c.curCSS(o,"border"+this+"Width",true))||0}if(p){n-=parseFloat(c.curCSS(o,"margin"+this,true))||0}});return n}c.fn["inner"+g]=function(i){if(i===f){return m["inner"+g].call(this)}return this.each(function(){c(this).css(k,l(this,i)+"px")})};c.fn["outer"+g]=function(i,n){if(typeof i!=="number"){return m["outer"+g].call(this,i)}return this.each(function(){c(this).css(k,l(this,i,true,n)+"px")})}});c.registerWidgetEvent=function(k,g){var j=k.split(",");if(j){for(var h=0;h<j.length;h++){if(!c.event.special[k]){if(!g){c.event.special[j[h]]={setup:function(){return true}}}else{c.event.special[j[h]]=g}}}}};function e(i,g){var l=i.nodeName.toLowerCase();if("area"===l){var k=i.parentNode,j=k.name,h;if(!i.href||!j||k.nodeName.toLowerCase()!=="map"){return false}h=c("img[usemap=#"+j+"]")[0];return !!h&&d(h)}return(/input|select|textarea|button|object/.test(l)?!i.disabled:"a"==l?i.href||g:g)&&d(i)}function d(g){return !c(g).parents().andSelf().filter(function(){return c.curCSS(this,"visibility")==="hidden"||c.expr.filters.hidden(this)}).length}c.extend(c.expr[":"],{data:function(j,h,g){return !!c.data(j,g[3])},focusable:function(g){return e(g,!isNaN(c.attr(g,"tabindex")))},tabbable:function(i){var g=c.attr(i,"tabindex"),h=isNaN(g);return(h||g>=0)&&e(i,!h)}});c(function(){var g=document.body,h=g.appendChild(h=document.createElement("div"));h.offsetHeight;c.extend(h.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=h.offsetHeight===100;c.support.selectstart="onselectstart" in h;g.removeChild(h).style.display="none"});c.extend(c.FUI,{plugin:{add:function(h,j,l){var k=c.FUI[h].prototype;for(var g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var l=g.plugins[j];if(!l||!g.element[0].parentNode){return}for(var k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)}}}},contains:function(h,g){return document.compareDocumentPosition?h.compareDocumentPosition(g)&16:h!==g&&h.contains(g)},hasScroll:function(j,h){if(c(j).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",i=false;if(j[g]>0){return true}j[g]=1;i=(j[g]>0);j[g]=0;return i},isOverAxis:function(h,g,i){return(h>g)&&(h<(g+i))},isOver:function(l,h,k,j,g,i){return c.FUI.isOverAxis(l,k,g)&&c.FUI.isOverAxis(h,j,i)}});var b={};c(function(){var h=c.browser;if(h.msie){b.isIE=true;var g=h.version;if(g.contains("6")){b.isIE6=true;b.isIE7=false;b.isIE8=false}if(g.contains("7")){b.isIE7=true;b.isIE6=false;b.isIE8=false}if(g.contains("8")){b.isIE8=true;b.isIE6=false;b.isIE7=false}}else{b.isIE=false;b.isIE6=false;b.isIE7=false;b.isIE8=false}if(h.webkit){b.isChrome=true}else{b.isChrome=false}if(h.mozilla){b.isMozilla=true}else{b.isMozilla=false}});c.extend(c.FUI,{fetchNumber:function(g){if(!g){return g}var h=g.replace(/[^\d]/g,"");return h?parseInt(h):h},ENV:{get:function(g){return b[g]}},replaceClass:function(h,g){this.getElement(h).className=g},addClass:function(h,g){var i=this.getElement(h);var j=i.className;if(j.indexOf(g)!==-1){return}j.length==0?j=g:j+=(" "+g);i.className=j},removeClass:function(l,h){var m=this.getElement(l);var n=m.className;if(n.indexOf(h)===-1){return}var k=n.split(" "),g=k.length;for(var j=0;j<g;j++){if(k[j]==h){k.splice(j,1);break}}m.className=k.join(" ")},getElement:function(g){var h=f;switch(typeof g){case"string":h=document.getElementById(g);break;default:h=g}return h},isArray:function(g){return Object.prototype.toString.apply(g)=="[object Array]"}});var a=function(){return false};String.prototype.contains=function(g){return this.indexOf(g)!==-1}})(jQuery);/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b,d){if(b.browser.msie&&b.browser.version=="6.0"){document.execCommand("BackgroundImageCache",false,true)}if(b.cleanData){var c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)}}else{var a=b.fn.remove;b.fn.remove=function(e,f){return this.each(function(){if(!f){if(!e||b.filter(e,[this]).length){b("*",this).add([this]).each(function(){try{b(this).triggerHandler("remove")}catch(g){}})}}return a.call(b(this),e,f)})}}b.widget=function(f,h,e){var g=f.split(".")[0],j;f=f.split(".")[1];j=g+"-"+f;if(!e){e=h;h=b.Widget}b.expr[":"][j]=function(k){return !!b.data(k,f)};b[g]=b[g]||{};b[g][f]=function(k,l){if(arguments.length){this._createWidget(k,l)}};var i=new h();i.options=b.extend(true,{},i.options);b[g][f].prototype=b.extend(true,i,{namespace:g,widgetName:f,widgetEventPrefix:b[g][f].prototype.widgetEventPrefix||f,widgetBaseClass:j},e);b.widget.bridge(f,b[g][f])};b.widget.bridge=function(f,e){b.fn[f]=function(i){var g=typeof i==="string",h=Array.prototype.slice.call(arguments,1),j=this;i=!g&&h.length?b.extend.apply(null,[true,i].concat(h)):i;if(g&&i.charAt(0)==="_"){return j}if(g){this.each(function(){var k=b.data(this,f),l=k&&b.isFunction(k[i])?k[i].apply(k,h):k;if(l!==k&&l!==d){j=l;return false}})}else{this.each(function(){var k=b.data(this,f);if(k){k.option(i||{})._init()}else{b.data(this,f,new e(i,this))}})}return j}};b.Widget=function(e,f){if(arguments.length){this._createWidget(e,f)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,g){b.data(g,this.widgetName,this);this.element=b(g);this.options=b.extend(true,{},this.options,this._getCreateOptions());b.extend(this.options,f);var e=this;this.element.bind("remove."+this.widgetName,function(){e.destroy()});this._create();this._init()},_getCreateOptions:function(){return b.metadata&&b.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(f,g){var e=f;if(arguments.length===0){return b.extend({},this.options)}if(typeof f==="string"){if(g===d){return this.options[f]}e={};e[f]=g}this._setOptions(e);return this},_setOptions:function(f){var e=this;b.each(f,function(g,h){e._setOption(g,h)});return this},_setOption:function(e,f){this.options[e]=f;if(e==="disabled"){this.widget()[f?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",f)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(e,f,g){var j,i,h=this.options[e];g=g||{};f=b.Event(f);f.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase();f.target=this.element[0];i=f.originalEvent;if(i){for(j in i){if(!(j in f)){f[j]=i[j]}}}this.element.trigger(f,g);return !(b.isFunction(h)&&h.call(this.element[0],f,g)===false||f.isDefaultPrevented())},setSize:function(e,f){}};b.registerWidgetEvent("remove")})(jQuery);(function(d,f){String.prototype.endWith=function(g){if(g==null||g==""||this.length==0||g.length>this.length){return false}return this.substring(this.length-g.length)==g};String.prototype.startWith=function(g){if(g==null||g==""||this.length==0||g.length>this.length){return false}return this.substr(0,g.length)==g};String.prototype.replaceAll=function(h,g){return this.replace(new RegExp(h,"gm"),g)};d.fn.closeSelect=function(){if(d.browser.mozilla){this.css("-moz-user-select","none")}else{if(d.browser.webkit){this.css("-webkit-user-select","none")}else{this.bind("selectstart.fuiSelect",function(){return false})}}return this};d.fn.openSelect=function(){if(d.browser.mozilla){this.css("-moz-user-select","auto")}else{if(d.browser.webkit){this.css("-webkit-user-select","auto")}else{this.unbind("selectstart.fuiSelect")}}return this};function c(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.destroy=function(){this.elements=null};this.put=function(h,g){var j=this.remove(h);this.elements.push({key:h,value:g});return j};this.insert=function(h,j,g){this.elements.splice(h,0,{key:j,value:g})};this.remove=this.removeByKey=function(g){var k=null;var j=this.elements;var h=this.elements.length;for(i=0;i<h;i++){if(j[i].key==g){k=this.removeByIndex(i).value;break}}return k};this.removeByIndex=function(h){if(h<0||h>=this.elements.length){return null}var g=this.elements[h];this.elements.splice(h,1);return g};this.get=this.getByKey=function(g){for(i=0;i<this.elements.length;i++){if(this.elements[i].key==g){return this.elements[i].value}}return null};this.element=this.getByIndex=function(g){if(g<0||g>=this.elements.length){return null}return this.elements[g]};this.containsKey=function(g){var h=false;for(i=0;i<this.elements.length;i++){if(this.elements[i].key==g){h=true}}return h};this.containsValue=function(g){var h=false;for(i=0;i<this.elements.length;i++){if(this.elements[i].value==g){h=true}}return h};this.values=function(){var g=new Array();for(i=0;i<this.elements.length;i++){g.push(this.elements[i].value)}return g};this.keys=function(){var g=new Array();for(i=0;i<this.elements.length;i++){g.push(this.elements[i].key)}return g};this.indexOf=function(g){var j=this.elements;var h=this.elements.length;for(i=0;i<h;i++){if(this.elements[i].key==g){return i}}return -1}}var b=document;var e=b.compatMode=="CSS1Compat";var a={};a.Utils={getJRESList:function(g){if(!g){return null}var h=g.data;if(!h){return null}return h},getJRESObject:function(g){if(!g){return null}var h=g.data;if(!h){return null}else{if(d.isArray(h)){return h[0]}else{return h}}},$I:function(g){return d("#"+g)},fetchNumber:function(g){if(!g){return g}var h=g.replace(/[^\d]/g,"");return h?parseInt(h):h},replaceClass:function(h,g){this.getElement(h).className=g},addClass:function(h,g){var j=this.getElement(h);if(!j){return}var k=j.className;if(k.indexOf(g)!==-1){return}k.length==0?k=g:k+=(" "+g);j.className=k},removeClass:function(l,h){var m=this.getElement(l);if(!m){return}var n=m.className;if(n.indexOf(h)===-1){return}var k=n.split(" "),g=k.length;for(var j=0;j<g;j++){if(k[j]==h){k.splice(j,1);break}}m.className=k.join(" ")},getElement:function(g){var h=f;switch(typeof g){case"string":h=document.getElementById(g);break;default:h=g}return h},doMask:function(h,g){d("body").doMask(h,g)},doUnMask:function(){d("body").doUnMask()},apply:function(k,g,j){if(j){this.apply(k,j)}if(k&&g&&typeof g=="object"){for(var h in g){k[h]=g[h]}}return k},applyIf:function(j,g){if(j&&g&&typeof g=="object"){for(var h in g){if(j[h]===null||j[h]===f){j[h]=g[h]}}}return j},isEmpty:function(g){return g===null||g===f||(d.isArray(g)&&g.length==0)||g===""},stopPropagation:function(g){if(g&&g.stopPropagation){g.stopPropagation()}else{window.event.cancelBubble=true}},convert:function(j,h){var g;if(this.isEmpty(h)){return j}h=h.toLowerCase();if(h=="string"){return""+j}else{if(h=="number"){return parseInt(j,10)}else{if(h=="boolean"){return !!h}else{if(h=="float"){return parseFloat(j)}else{return j}}}}},getContextPath:function(){return window.FUIContextPath},_regExpPercentage:/^\d{1,3}(\.(\d)*)?%$/,getPercentage:function(h){var g=a.Utils._regExpPercentage.exec(h);if(g){return g[0]}else{return null}},_regExpPixelSize:/(^\d+(\.\d+)?)(px)?$/,getPixelSize:function(h){var g=a.Utils._regExpPixelSize.exec(h);if(g){return g[0]}else{return null}},IndexMap:function(){return new c()},isArray:function(g){return(typeof g=="object")&&g.constructor==Array},isString:function(g){return(typeof g=="string")&&g.constructor==String},isNumber:function(g){return(typeof g=="number")&&g.constructor==Number},isDate:function(g){return(typeof g=="object")&&g.constructor==Date},isJQueryObj:function(g){return(typeof g=="object")&&g.constructor==jQuery},format:function(h){var g=Array.prototype.slice.call(arguments,1);return h.replace(/\{(\d+)\}/g,function(j,k){return g[k]})},transUrl:function(g){var j="^((https|http|ftp|rtsp|mms)?://)(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$";var h=new RegExp(j);if(h.test(g)){return g}else{if(g.indexOf("/")!==0){g=this.getContextPath()+"/"+g}}return g},UID:0,genId:function(h){var g=this.UID++;var j="-webgen-"+g;if(h!=null&&h.length!=0){return(h+j)}else{return("f-comp"+j)}},destroyIframe:function(j){var g=document.getElementById(j);if(g&&g.contentWindow){try{g.src="about:blank";g.contentWindow.document.write("");g.contentWindow.close()}catch(h){}g.parentNode.removeChild(g);g=null}},getViewportHeight:function(){return d.browser.msie?(e?b.documentElement.clientHeight:b.body.clientHeight):self.innerHeight},getViewportWidth:function(){return !e&&!d.browser.opera?b.body.clientWidth:d.browser.msie?b.documentElement.clientWidth:self.innerWidth},getAlignXY:function(s,g,r,t){var l=window["$Utils"];var k=s.offset(),y=k.left,x=k.top,n=s.outerHeight(),h=r||g.outerWidth(),p=t||g.outerHeight();var A=document,z=A.documentElement,m=A.body;var w=(z.scrollLeft||m.scrollLeft||0),u=(z.scrollTop||m.scrollTop||0);var q=l.getViewportHeight();var v=l.getViewportWidth();var o=0;var j=0;if(x+n+p>q+u){o=x-p;if(o<0){o=x+n}}else{o=x+n}if(y+h>v+w){j=v+w-h}else{j=y}return{top:o,left:j}}};a.Component={call:function(){if(arguments.length<2){return}var k=arguments[0];var h=arguments[1];var g=this.getFType(k,h);var j=k[g];if(d.isFunction(j)){return j.apply(k,Array.prototype.slice.call(arguments,1))}},hasFType:function(j,g){var h=d.data(j.get(0));if(h&&g&&h[g]){return true}else{return false}},getFType:function(m,k){if(!k||k.startWith("_")){return""}var g="";var j=d.data(m.get(0));var l=j.ftype;if(j&&l&&d.isFunction((j[l]||{})[k])){return l}if(j){for(var h in j){if(d.isFunction((j[h]||{})[k])){g=h;break}}}return g},getName:function(g){if(a.Utils.isJQueryObj(g)){return(g.data("ftype")||null)}else{return null}},isFComponent:function(g){return(this.getName(g)!=null)},hasFunc:function(h,g){if(this.getFType(h,g)){return true}return false},tryCall:function(j,h){var g={};g.ftype=this.getFType(j,h);g.hasFunc=false;g.result=null;if(g.ftype){g.hasFunc=true;g.result=j[g.ftype].apply(j,Array.prototype.slice.call(arguments,1))}return g}};window["$I"]=a.Utils.$I;window["$Utils"]=a.Utils;window["$Component"]=a.Component})(jQuery);(function(a){a.extend(a.fn,{FValidate:function(c){if(!this.length){c&&c.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var d=a.data(this[0],"validator");if(d){return d}this.attr("novalidate","novalidate");if(c.onkeyup){delete c.onkeyup}if(c.onclick){delete c.onclick}if(c.onfocusout){delete c.onfocusout}if(c.onsubmit){delete c.onsubmit}if(!c.errorPlacement){if("qtip"===c.errorModel){c.errorMsgClass="f-validate-errorMsg";c.errorElement="label";c.errorPlacement=function(g,h){if(g.html()){var k=a(h);var l=a("#fui-validate-qtip-msg");if(!l.length){a("body").append("<span id='fui-validate-qtip-msg' class='f-validate-errorMsg' style='display:none;' />")}var j=k.attr("errorMsgTarget");if(j){if("parent"==j){var i=k.parent();i.attr("f-validate-qtip-msg",g.html())}else{j=a.trim(j);if(j.indexOf("#")!==0){j="#"+j}var i=a(j);i.attr("f-validate-qtip-msg",g.html())}}else{k.attr("f-validate-qtip-msg",g.html())}}};c.showErrors=function(g,h){if(h&&h.length>0){a.each(h,function(i,m){var n=this.message;var l=a(m.element);var k=l.attr("errorMsgTarget");if(l.attr("hasbindmouseevent")!=="true"){if(k){var j=null;if("parent"==k){j=l.parent()}else{k=a.trim(k);if(k.indexOf("#")!==0){k="#"+k}j=a(k)}j.bind("mouseover",function(r){var q=a("#fui-validate-qtip-msg");var o=a(this);var s=o.attr("f-validate-qtip-msg");var p=o.attr("valid");if(p!=="true"&&q.length){q.html(s);q.css("display","inline").css({top:r.pageY+10,left:r.pageX+5})}}).bind("mouseout",function(){var o=a("#fui-validate-qtip-msg");if(o.length){o.css("display","none")}})}else{l.bind("mouseover",function(r){var q=a("#fui-validate-qtip-msg");var o=a(this);var s=o.attr("f-validate-qtip-msg");var p=o.attr("valid");if(p!=="true"&&q.length){q.html(s);q.css("display","inline").css({top:r.pageY+10,left:r.pageX+5})}}).bind("mouseout",function(){var o=a("#fui-validate-qtip-msg");if(o.length){o.css("display","none")}})}l.attr("hasbindmouseevent",true)}})}else{a(this.currentElements).parents().map(function(){if(this.tagName.toLowerCase()=="td"){a(this).children().eq(0).removeClass("error-border")}else{a(this).removeClass("error-border")}a(this).children().eq(0).removeClass("x-form-invalid")})}this.defaultShowErrors()}}else{c.errorPlacement=function(g,h){if(g.html()){var k=a(h);var j=k.attr("errorMsgTarget");if(j){if("parent"==j){var i=k.parent();g.insertAfter(i);g.css("display","none")}else{j=a.trim(j);if(j.indexOf("#")!==0){j="#"+j}var i=a(j);g.insertAfter(i);g.css("display","none")}}else{g.insertAfter(k);g.css("display","none")}}}}}d=new a.fvalidator(c,this[0]);a.data(this[0],"validator",d);if(d.settings.onsubmit){var b=this.find("input");var e=this.find("button");var f=b.add(e);f.filter(".cancel").click(function(){d.cancelSubmit=true});if(d.settings.submitHandler){f.filter(":submit").click(function(){d.submitButton=this})}this.submit(function(g){if(d.settings.debug){g.preventDefault()}function h(){if(d.settings.submitHandler){if(d.submitButton){var i=a("<input type='hidden'/>").attr("name",d.submitButton.name).val(d.submitButton.value).appendTo(d.currentForm)}d.settings.submitHandler.call(d,d.currentForm);if(d.submitButton){i.remove()}return false}return true}if(d.cancelSubmit){d.cancelSubmit=false;return h()}if(d.form()){if(d.pendingRequest){d.formSubmitted=true;return false}return h()}else{d.focusInvalid();return false}})}return d},isValidate:function(f){if(f){var e=$I(f);if(e.length>0){var d=false;var c=e.validate();d=c.element(this);return d}else{return true}}else{var d=false;var b=this[0];if(b.form){var c=a.data(b.form,"validator");if(c){d=c.element(this);return d}else{return true}}else{return true}}}});a.fvalidator=function(b,c){this.settings=a.extend(true,{},a.fvalidator.defaults,b);this.currentForm=c;this.init()};a.extend(a.fvalidator,{prototype:a.validator.prototype,defaults:{messages:{},groups:{},rules:{},errorClass:"f-validate-error",validClass:"valid",errorElement:"div",errorModel:"under",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(d,e){var f=a(d);var g=f.attr("hasprevioussbling");var c=f.attr("hasChecked");if(!c){if(g=="true"){var b=f.prev()[0];this.check(b)}else{this.check(d)}f.attr("hasChecked","true")}this.lastActive=d;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,d,this.settings.errorClass,this.settings.validClass);if(g==="true"){var b=f.prev()[0];this.addWrapper(this.errorsFor(b)).hide()}else{this.addWrapper(this.errorsFor(d)).hide()}}},onfocusout:function(c,d){var e=a(c);if(e.attr("hasprevioussbling")==="true"){var b=e.prev()[0];if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}}else{if(!this.checkable(c)&&(c.name in this.submitted||!this.optional(c))){this.element(c)}}},onkeyup:function(b,c){if(this.keyUpTimeout){clearTimeout(this.keyUpTimeout)}_this=this;this.keyUpTimeout=setTimeout(function(){var e=a(b);if(e.attr("hasprevioussbling")==="true"){var d=a(b).prev()[0];if(d.name in _this.submitted||d==_this.lastElement){_this.element(d)}}else{if(b.name in _this.submitted||b==_this.lastElement){_this.element(b)}}},300)},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(e,b,d){if(e.type==="radio"){this.findByName(e.name).addClass(b).removeClass(d)}else{var h=a(e);var i=h.attr("errorValidateTarget");var g=h.attr("errorMsgTarget");if(!i){h.addClass(b).removeClass(d)}else{if("next"===i){var c=h.next();c.addClass(b).removeClass(d)}else{a(i).addClass(b).removeClass(d)}}if("parent"==g){var f=h.parent();f.attr("valid","false")}else{h.attr("valid","false")}}},unhighlight:function(e,b,d){if(e.type==="radio"){this.findByName(e.name).removeClass(b)}else{var h=a(e);var i=h.attr("errorValidateTarget");var g=h.attr("errorMsgTarget");if(!i){h.removeClass(b).addClass(d)}else{if("next"===i){var c=h.next();c.removeClass(b).addClass(d)}else{a(i).removeClass(b).addClass(d)}}if("parent"==g){var f=h.parent();f.attr("valid","true")}else{h.attr("valid","true")}}}}})})(jQuery);(function(a,b){a.FUI.FAjax={_errorHandlerMap:{},_defaultErrorHandler:{},remote:function(f){var c=window["$Utils"];var e=f.url;var h=f.success;var d=f.failure;var g=this;f.success=function(l,m,k){if(l.returnCode===1||l.returnCode===-1){if(d){if(true!==d(l,m,k)){return}}var j=l.errorNo;var i=g._errorHandlerMap[l.errorNo];if(a.isFunction(i)){i(l,m,k)}else{if("string"==a.type(i)){l.errorInfo=i;g._defaultErrorHandler(l)}else{g._defaultErrorHandler(l)}}}else{if(h){h(l,m,k)}}};if(!f.error){f.error=function(i,k,j){alert("ajax超时："+k)}}if(e.indexOf("/")!==0){f.url=c.getContextPath()+"/"+e}if(!f.dataType){f.dataType="json"}if(!f.type){f.type="post"}a.ajax(f)},getObject:function(d){var c=window["$Utils"];if(!d){return}var e=d.success;d.success=function(f){if(e){var g=c.getJRESObject(f);e(g)}};this.remote(d)},getList:function(d){var c=window["$Utils"];if(!d){return}var e=d.success;d.success=function(f){if(e){var g=c.getJRESList(f);e(g)}};this.remote(d)}}})(jQuery);(function(a){a.widget("FUI.FGrid",{options:{width:600,height:350,baseParams:{},hasRowNumber:true,selectModel:"normal",colModel:[],hasTips:false,columnFit:false,autoload:false,rowNumberWidth:24},_create:function(){var d=this.element;var c=this.options;this.cellBorderRightWidth=1;this.cellPaddingLeft=6;this.cellPaddingRight=6;this.widthOffset=this.cellPaddingLeft+this.cellPaddingRight+this.cellBorderRightWidth;this.cellMoveWidth=6;this.scrollOffset=19;this.minColumnWidth=30;this.items=[];var b=$Utils;this.width=c.width||d.parent().innerWidth();this.height=c.height||d.parent().innerHeight();this.columnsWidth=0;this.curPage=1;this.start=1;this.dataCache={};this.selectCache={};this.crossPageDataCache={};this.id=d.attr("id");this.headEl=a("#"+this.id+"-grid-head");this.bodyEl=a("#"+this.id+"-grid-body");var f=c.pagingbarId;if(f){this.pageEl=a("#"+f)}else{this.pageEl=this.element.children(".f-grid-page")}var e=c.toolbarId;if(e){this.toolbarEl=a("#"+e)}else{this.toolbarEl=this.element.children(".f-toolGroup")}this.headEl.closeSelect();this._bindEvent()},_init:function(){this._renderHead();this.setSize(this.width,this.height);this._renderBody()},destroy:function(){this.headEl.unbind();this.bodyEl.unbind();this.headEl=null;this.bodyEl=null;this.pageEl=null;this.toolbarEl=null;this.dataCache=null;this.crossPageDataCache=null},load:function(h,d){h=h||{};var g=this.options.pagingbarId;if(g){var e=window["$Component"],b=window["$Utils"];var c=$I(g);var f=e.tryCall(c,"getDefaultParams").result;h=b.applyIf(h,f)}this.resetDataCache(true,false);this._query(h,d)},loadForPagingbar:function(b){this._query(b)},_renderHead:function(){var n=[],e=this.options;var s=this.width;var p=this.cellMoveWidth;var o=this.cellBorderRightWidth;var t=e.rowNumberWidth;var j=e.hasRowNumber;var q=e.selectModel;var m=e.colModel;var w=e.hasTips;var c=e.columnFit;var g=m.length;var x;var h=this.widthOffset;n.push('<table id="'+this.id+"-head-table");n.push('" cellpadding="0" cellspacing="0" ><thead><tr>');if(j===true){var f=this._getRowNumberHtml(t);n.push(f);s-=t;this.columnsWidth+=t}if(q==="multiSelect"){n.push('<th><div class="f-grid-checkbox-wrap">');n.push('<button class="f-grid-checkbox"  buz_type="all" buz_status="unchecked">');n.push("</button></div></th>");s-=21;this.columnsWidth+=21}else{if(q==="singleSelect"){n.push('<th><div class="f-grid-radio-wrap"></div></th>');s-=21;this.columnsWidth+=21}}if(c){for(var u=0;u<g;u++){var r=m[u];x+=r.width}}for(var u=0;u<g;u++){var r=m[u],B=r.width;var A=r.title,k=r.headerAlign;var d=r.sortable,y=r.defaultSortDir,z=r.dataIndex;this.columnsWidth+=B;var b=this.id+"-columnId"+u;if(c){B=r.widthPx=Math.floor((B%x)*s)}var v=B-h;n.push("<th>");var l="f-grid-title-inner";if(d){l+=" f-grid-cell-sortable";if(y){if(!this.sortDir){this.sortDir=(y=="asc")?"asc":"desc";l+=" f-grid-cell-span-"+this.sortDir}if(!this.sortBy){this.sortBy=z}if(!this.defaultSortColumnId){this.defaultSortColumnId=b}}}n.push('<div id="'+b+'"  class="');n.push(l);n.push('" biz_index="'+u+'"');if(d){n.push(' sortable="true" ');n.push(' sortBy="'+z+'" ')}n.push(' style="width:'+(B-o)+'px;position:relative;">');n.push('<div class="f-grid-cell" style="position:relative;width:'+(v-p)+"px;");if(k){n.push(" text-align :"+k+";")}n.push('"');if(A&&w===true){n.push(' title="'+A+'"')}n.push(">");n.push('<span class="f-grid-cell-span-text" >');n.push(A||"");n.push("</span>");n.push("</div>");n.push("<div class='f-grid-cell-move-right'></div>");n.push("</div>");n.push("</th>")}n.push('<td ><div style="width:'+this.scrollOffset+'px;" ></div></td>');n.push("</tr></thead></table>");this.headEl.html(n.join(""));if(this.defaultSortColumnId){this.sortEl=$I(this.defaultSortColumnId)}},_getRowNumberHtml:function(c){var b=[];b.push('<th><div class="f-grid-row-number" style="width:');b.push(c);b.push('px;"></div></th>');return b.join("")},_renderBody:function(){var b=this.options;if(b.autoload){this.load()}else{this._clearBody()}},_query:function(c,b){var o=this.options,g=window["$Utils"],d=this;if("multiSelect"==o.selectModel){var n=this.headEl.find("button.f-grid-checkbox");n.removeClass("f-grid-checkbox-checked")}var l=o.baseParams;var f={};if(c&&typeof(c)==="object"){f=a.extend({},l,c)}else{f=l}if(this.sortBy&&this.sortDir){f=a.extend(f,{sortBy:this.sortBy,sortDir:this.sortDir})}b&&(this.options.dataUrl=b);var k=this.options.dataUrl;if(!k){return}if(k.indexOf("/")!==0){k=g.getContextPath()+"/"+k}var e=function(p){if(a.isFunction(o.onBeforesend)){o.onBeforesend(p)}};var j=o.pagingbarId;var m=function(t,v,u){var r=t.data;d._generateBody(r);d._reposHeader();if(j){var s=window["$Component"];var q=d.totalCount;var p=d.listData.length;s.tryCall($I(j),"resetPagebar",p,q)}if(a.isFunction(o.onLoadsuccess)){o.onLoadsuccess(t,v,u)}};var i=function(p,r,q){if(a.isFunction(o.onLoadfailure)){o.onLoadfailure(p,r,q)}};var h=function(q,r,p){if(a.isFunction(o.onLoadError)){o.onLoadError(q,r,p)}};f._respType="page";a.FUI.FAjax.remote({type:"POST",url:k,dataType:"json",data:f,context:this,beforeSend:e,success:m,failure:i,error:h})},getSortBy:function(){return this.sortBy},getSortDir:function(){return this.sortDir},_reposHeader:function(){this.headEl.scrollLeft(this.bodyEl.scrollLeft())},_generateBody:function(h){this._transferData(h);var r=this.listData.length;var m=0;var j=[];var g=this.options.hasRowNumber;var p=this.options.selectModel;var c=this.options.rowClasses;var o=a.isArray(c);var e=o?c.length:2;j.push("<table id='"+this.id+"-body-table'");j.push(" cellpadding='0' cellspacing='0' ><tbody>");for(var f=0;f<r;f++){m=(f)%e;var d=this.listData[f];this.dataCache[""+f]=d;var q=this._isContained(d);j.push("<tr");if(o){j.push(" class='f-grid-row "+c[m])}else{j.push(m<1?" class='f-grid-row f-grid-tr-odd":" class='f-grid-row f-grid-tr-even")}if(q){j.push(" f-grid-tr-checked'")}else{j.push("'")}j.push(" dIndex='"+f+"'");j.push(" f-grid-row='true' >");if(g){var n=this._getRowHeadHtml(f+1);j.push(n)}if(p==="multiSelect"){var b=this._getCheckboxHtml(q);j.push(b)}if("singleSelect"===p){var k=this._getRadioHtml();j.push(k)}var l=this._getCellHtml(d,f);j.push(l);j.push("</tr>")}j.push("</tbody></table>");this.bodyEl.html(j.join(""));this.items=h},_getRowHeadHtml:function(b){var c=[];var d=this.options.rowNumberWidth;c.push("<td class= 'f-grid-body-td f-grid-row-numberbg' >");if(b!==undefined){c.push("<div");if(d){c.push(" style='width:"+(d)+"px;'")}c.push(">");c.push("<div class='f-grid-row-numbertext'>");c.push(b);c.push("</div>");c.push("</div>")}c.push("</td>");return c.join("")},_getCheckboxHtml:function(d){var c=[],b=this.options;c.push("<td class='f-grid-checkbox-td'><div class='f-grid-checkbox-wrap'>");if(b.crossPageSelect&&b.uniqueKey){if(d){c.push("<button class='f-grid-checkbox f-grid-checkbox-checked' buz_type='single'  buz_status='checked' >")}else{c.push("<button class='f-grid-checkbox' buz_type='single'  buz_status='unchecked' >")}}else{c.push("<button class='f-grid-checkbox' buz_type='single'  buz_status='unchecked' >")}c.push("</button></div></td>");return c.join("")},_isContained:function(b){var e=this.options;var d=e.uniqueKey;var c="";if(d){c=d(b)}var f=this.crossPageDataCache;if(c){if(f[c]){return true}}return false},_getRadioHtml:function(){var b=[];b.push("<td class='f-grid-radio-td'><div class='f-grid-radio-wrap'>");b.push("<button class='f-grid-radio' buz_type='single'  buz_status='unchecked' >");b.push("</button></div></td>");return b.join("")},_getCellHtml:function(h,m){var i=[],s=this.options;var r=s.colModel;var d=s.hasTips;var c=r.length;var f=this.cellPaddingLeft+this.cellPaddingRight+this.cellBorderRightWidth;for(var g=0;g<c;g++){var o=r[g],e=o.width;var b=o.textAlign;var n=o.renderer;var p=o.wordWrap;if(this.percent===true){e=o.widthPx}var q=o.dataIndex;var l=0;var k=h[q];i.push("<td>");i.push("<div class='f-grid-cell' ");i.push(" biz_index='"+g+"'");i.push(" style='width:"+(e-f)+"px;");if(b){i.push(" text-align:"+b)}i.push("'");if(d){i.push(" title='");i.push(k);i.push("'")}i.push(">");if(p===true){k="<table cellpadding='0' cellspacing='0' class='f-grid-cell-wrap' biz_index='"+g+"' style='width:"+(e-f)+"px;'><tr><td style='border-width:0px;'>"+k+"</td></tr></table>"}if(n){var k=h[q];k=n(k,h,m)}i.push(k);i.push("</div>");i.push("</td>")}return i.join("")},_transferData:function(b){if(!(b instanceof Object)){this.listData=[];return}this.totalCount=b.totalCount;this.listData=b.listData||[]},_clearBody:function(){var c=this.headEl.children("table").outerWidth(true);var e=[];e.push("<div class='f-empty-div' style='width:"+c+"px;'>");var b=a.FUI.lang&&a.FUI.lang.grid.emptyMsg;var d=this.options.emptyMsg;if(d){e.push(d)}else{if(b){e.push(b)}}e.push("</div>");this.bodyEl.html(e.join(""))},_bindEvent:function(){var f=this;var d=this.bodyEl;var e=this.headEl;var c=$Utils;var b=this.options.selectModel;d.scroll(function(g){f._reposHeader()});d.bind({click:function(x){var v=x.target;var j=a(v);var s=j.parents("tr[f-grid-row='true']");if(s.length>0){var g=f.options;var r=g.onRowClick;var i=g.onRowDeselect;var p=g.onRowSelect;var k=s.get(0);var z=a(k);var l=z.attr("dIndex");if("multiSelect"==b){var u=z.find("button.f-grid-checkbox");var t=u.attr("buz_status");if("unchecked"==t){u.attr("buz_status","checked");c.addClass(u.get(0),"f-grid-checkbox-checked");c.addClass(k,"f-grid-tr-checked");var h=f.dataCache[l];f.selectCache[l]=h;p&&p(h,l);if(g.crossPageSelect&&g.uniqueKey){var B=g.uniqueKey(h);f.crossPageDataCache[B]=h}}else{u.attr("buz_status","unchecked");c.removeClass(u.get(0),"f-grid-checkbox-checked");c.removeClass(k,"f-grid-tr-checked");var h=f.dataCache[l];delete f.selectCache[l];i&&i(h,l);if(g.crossPageSelect&&g.uniqueKey){var B=g.uniqueKey(h);delete f.crossPageDataCache[B]}}u=null}else{var o=k.className;if(o.contains("f-grid-tr-checked")){}else{var y=d.find("tr.f-grid-tr-checked");if(y.length){var m=y.get(0);c.removeClass(m,"f-grid-tr-checked");var w=a(m).attr("dIndex");i&&i(f.dataCache[w],w)}c.addClass(k,"f-grid-tr-checked");p&&p(f.dataCache[l],l)}if("singleSelect"==b){var A=z.find("button.f-grid-radio");var q=A.get(0).className;if(q.contains("f-grid-radio-checked")){}else{var n=d.find("button.f-grid-radio-checked");if(n.length>0){c.removeClass(n.get(0),"f-grid-radio-checked")}A.attr("buz_status","checked");c.addClass(A.get(0),"f-grid-radio-checked")}}f.selectCache={};f.selectCache[l]=f.dataCache[l]}r&&r(f.dataCache[l],l)}},dblclick:function(m){var h=m.target;var g=a(h);var n=g.parents("tr[f-grid-row='true']");if(n.length>0){var k=n.get(0);var j=a(k);var i=j.attr("dIndex");var l=f.options.onRowDbClick;l&&l(f.dataCache[i],i)}},contextmenu:function(k){var g=f.options.onContextMenu;var j=k.target,i=a(j);var h=i.parents('tr[f-grid-row="true"]');var l=h.attr("dindex");f.contextMenuData={rowIndex:l,rowData:f.dataCache[l]};g&&g(k);if(k.preventDefault){k.preventDefault()}else{window.event.returnValue=false}c.stopPropagation(k);return false}});e.bind({click:function(l){var m=l.target,q=a(m),p=m.nodeName.toLowerCase();className=m.className,buz_type=q.attr("buz_type"),buz_status=q.attr("buz_status");if(className.indexOf("f-grid-checkbox")!=-1&&"all"==buz_type){if("unchecked"==buz_status){f._selectAll();q.addClass("f-grid-checkbox-checked");q.attr("buz_status","checked")}else{if("checked"==buz_status){f._unSelectAll();q.removeClass("f-grid-checkbox-checked");q.attr("buz_status","unchecked")}}}var h;if("span"==p){if(className=="f-grid-cell-span-text"){h=a(m).parent().parent()}}else{if("div"==p){if(className=="f-grid-cell"||className=="f-grid-cell-move-right"){h=a(m).parent()}else{if(className.indexOf("f-grid-title-inner")!=-1){h=a(m)}}}}if(h&&h.length&&h.attr("sortable")=="true"){var j=h.attr("class");if(f.sortEl){f.sortEl.get(0).className="f-grid-title-inner f-grid-cell-sortable"}if(j.indexOf("-desc")!==-1){h.get(0).className="f-grid-title-inner f-grid-cell-sortable f-grid-cell-span-asc";f.sortDir="asc"}else{if(j.indexOf("-asc")!==-1){h.get(0).className="f-grid-title-inner f-grid-cell-sortable f-grid-cell-span-desc";f.sortDir="desc"}else{h.get(0).className="f-grid-title-inner f-grid-cell-sortable f-grid-cell-span-desc";f.sortDir="desc"}}f.sortBy=h.attr("sortBy");var k=window["$Component"],i=window["$Utils"];var n=f.options.pagingbarId;var o=$I(n);var g=k.tryCall(o,"getParams").result;f.resetDataCache(false,false);f._query(g);f.sortEl=h;h=null}},mousedown:a.proxy(function(l){var m=l.target,p=m.className;var h=a(document),o=a("body"),g=a(m);if(p==="f-grid-cell-move-right"){var k=g.parent().attr("biz_index");var j=g.offset();var n=this.headEl.outerHeight()+this.bodyEl.outerHeight();var i=[];i.push("<div id='grid-move-line' style='");i.push("height:"+n+"px;");i.push("left:"+l.pageX+"px;");i.push("top:"+j.top+"px;");i.push("' biz_index='"+k+"'");i.push("></div>");o.append(i.join(""));this.element.closeSelect();this.gridMoveLineEl=a("#grid-move-line");this.gridMousePos={pageX:l.pageX};this.gridMousePosInit={pageX:l.pageX};this.activeHeadEl=this.headEl.find('div[biz_index="'+k+'"]');this.activeHeadWidth=this.activeHeadEl.width();h.mousemove(a.proxy(this._moveColumnLine,this));h.one("mouseup",a.proxy(this._resetColumn,this))}},this)})},getContextMenuData:function(){return this.contextMenuData},_moveColumnLine:function(g){var c=this.gridMoveLineEl;var k=this.gridMousePos;var j=this.gridMousePosInit;if(!c||!k){return}var d=g.pageX;var i=d-k.pageX;var l=this.activeHeadWidth+(d-j.pageX);var h=this.activeHeadEl.offset().left;var f=c.offset().left;if(l>=this.minColumnWidth){var b=f+i;c.get(0).style.left=b+"px";k.pageX=d}else{var b=h+this.minColumnWidth;c.get(0).style.left=b+"px";k.pageX=b}g.stopPropagation()},_resetColumn:function(h){var g=h.target,c=a(g);var b=this.gridMoveLineEl.attr("biz_index");var f=this.gridMoveLineEl.offset().left;var i=f-this.gridMousePosInit.pageX;var d=this.activeHeadEl.width()+i;this.options.colModel[b].width=d+this.cellBorderRightWidth;this._adjustHead(b,d);this._adjustColumnWidth(b,d);this.gridMoveLineEl.remove();this.element.openSelect();a(document).unbind("mousemove",this._moveColumnLine);this.gridMoveLineEl=null;this.gridMousePos=null;this.gridMousePosInit=null;this.activeHeadEl=null},_adjustHead:function(d,f){if(d<0){return}var c=this.activeHeadEl;var g=this.cellMoveWidth;var e=this.cellPaddingLeft;var b=this.cellPaddingRight;var h=this.activeHeadEl.children("div:first");c.width(f);h.width(f-e-b-g)},_adjustColumnWidth:function(i,d){if(i<0){return}var e=this.cellPaddingLeft;var h=this.cellPaddingRight;var g=this.cellBorderRightWidth;var f=this.options.colModel[i].wordWrap;var j;if(true===f){j=this.bodyEl.children("table").find("div[biz_index='"+i+"']");var b=this.bodyEl.children("table").find("table[biz_index='"+i+"']");var c=d-e-h;b.width(c);j.width(c)}else{j=this.bodyEl.children("table").find("div[biz_index='"+i+"']");var c=d-e-h;j.width(c)}},getAllData:function(){return this.listData||[]},getSelectedDatas:function(){var b=this.options;var c=this.selectCache;if(("multiSelect"==b.selectModel)&&b.crossPageSelect&&b.uniqueKey){c=this.crossPageDataCache}var d=[];for(var f in c){var e=c[f];if(e){d.push(e)}}return d},_getColumnsWidth:function(){return this.columnsWidth},setSize:function(c,f){if(c&&typeof(c)==="number"&&c>0){c=c-2;var b=c;this.element.get(0).style.width=b+"px";this.headEl.get(0).style.width=b+"px";this.bodyEl.get(0).style.width=b+"px"}if(f&&typeof(f)==="number"&&f>0){f=f-2;var e=this.headEl.outerHeight();var i=0,g=0;this.pageEl.length&&(i=this.pageEl.outerHeight());this.toolbarEl.length&&(g=this.toolbarEl.outerHeight());var d=f-e-i-g;if(d>0){this.bodyEl.get(0).style.height=d+"px"}}},setBaseParams:function(b){if(typeof b=="object"){this.options.baseParams=b}},resetDataCache:function(d,h){var c=this.options;if(h&&"multiSelect"==c.selectModel&&c.crossPageSelect&&c.uniqueKey){var b=this.selectCache;for(var g in b){var f=b[g];var e=c.uniqueKey(f);delete this.crossPageDataCache[e]}}this.bodyEl.html("");this.dataCache={};this.selectCache={};if(d){this.crossPageDataCache={}}},_selectAll:function(){var d=this.options;var f=this.bodyEl.find("button.f-grid-checkbox");var b=this.bodyEl.find("tr.f-grid-row");f.addClass("f-grid-checkbox-checked");f.attr("buz_status","checked");b.addClass("f-grid-tr-checked");if(("multiSelect"==d.selectModel)&&d.crossPageSelect&&d.uniqueKey){var c=this.dataCache;for(var h in c){var g=c[h];var e=d.uniqueKey(g);this.crossPageDataCache[e]=g}}else{var c=this.dataCache;this.selectCache=null;this.selectCache={};for(var h in c){this.selectCache[h]=c[h]}}},_unSelectAll:function(){var d=this.options;var f=this.bodyEl.find("button.f-grid-checkbox");var b=this.bodyEl.find("tr.f-grid-row");f.removeClass("f-grid-checkbox-checked");f.attr("buz_status","unchecked");b.removeClass("f-grid-tr-checked");if(("multiSelect"==d.selectModel)&&d.crossPageSelect&&d.uniqueKey){var c=this.dataCache;for(var h in c){var g=c[h];var e=d.uniqueKey(g);delete this.crossPageDataCache[e]}}else{this.selectCache=null;this.selectCache={}}},selectRowsBydata:function(h,e){if(!a.isArray(h)){return}var f=h.length;var g=this.listData;var b=g.length;for(var d=0;d<f;d++){for(var c=0;c<b;c++){if(""+g[c][e]==h[d]){this.selectRowsByIndex(c)}}}},selectRowsByIndex:function(d){var c=this.options;var h=this.listData;var g=h[d];if("multiSelect"==c.selectModel){if(c.crossPageSelect&&c.uniqueKey){var e=c.uniqueKey(g);this.crossPageDataCache[e]=g}this.selectCache[d]=g}else{this.selectCache=null;this.selectCache={};this.selectCache[d]=g}var f=this.bodyEl.find("tr[dindex="+d+"]");f.addClass("f-grid-tr-checked");f.attr("f-grid-row","true");var b=f.find("button");b.addClass("f-grid-checkbox-checked");b.attr("buz_status","checked")}})})(jQuery);(function(a){a.registerWidgetEvent("onExpand,onCollapse");a.widget("FUI.FPanel",{options:{width:"auto",height:"auto",pageUrl:null,isIFrame:false,iconCls:null,onCollapse:null,onExpand:null,onLoadSuccess:null,onError:null,_isCollapsed:false,_objHeader:null,_objHeaderToggle:null,_objHeaderTitle:null,_objHeaderIcon:null,_objWrapper:null,_objWrapperBody:null},_create:function(){var b=this.element.attr("id");this.options.id=b;this.options._objHeader=$I(b+"-header");this.options._objHeaderToggle=$I(b+"-toggle");this.options._objHeaderTitle=$I(b+"-title");this.options._objHeaderIcon=$I(b+"-icon");this.options._objWrapper=$I(b+"-wrapper");this.options._objWrapperBody=$I(b+"-body");this.options._isCollapsed=this.element.hasClass("f-collapsed");this._bindEvent()},_init:function(){this.reload();this.setSize(this.options.width,this.options.height)},_bindEvent:function(){var c=this;var b=this.options._objHeaderToggle;b.hover(function(d){b.addClass("f-tool-toggle-over")},function(d){b.removeClass("f-tool-toggle-over")});b.click(function(){if(c.options._isCollapsed){c.expand()}else{c.collapse()}return false})},destroy:function(){var b=this.options;b._objHeaderToggle.unbind();b._objHeader=null;b._objHeaderToggle=null;b._objHeaderTitle=null;b._objHeaderIcon=null;b._objWrapper=null;b._objWrapperBody=null;a.Widget.prototype.destroy.call(this)},reload:function(c){var e=this.options;var d=this.element;var b=e._objWrapperBody;c=c||e.pageUrl;if($Utils.isEmpty(c)){return}e.pageUrl=c;if(e.isIFrame){e._objWrapperBody.children("iframe").attr("src",c);return}if(d.data("loading")){return}else{d.data("loading",true)}if(c.indexOf("/")!==0){c=$Utils.getContextPath()+"/"+c}a.ajax({cache:false,type:"get",url:c,success:function(g,h,f){b.html(g);if(a.isFunction(e.onLoadSuccess)){e.onLoadSuccess(g,h,f)}},error:function(g,h,f){if(a.isFunction(e.onError)){e.onError(g,h,f)}},complete:function(){d.data("loading",false)}})},expand:function(){var b=this;var c=b.options;if(c._isCollapsed){c._objWrapper.slideDown("fast",function(){b.element.addClass("f-collapsible").removeClass("f-collapsed");c._isCollapsed=false;var e=true;if(a.isFunction(c.onExpand)){var d=c.onExpand.call(b);e=(d===false)?false:true}if(e){b.element.triggerHandler("onExpand")}})}},collapse:function(){var b=this;var c=b.options;if(!c._isCollapsed){c._objWrapper.slideUp("fast",function(){b.element.removeClass("f-collapsible").addClass("f-collapsed");c._isCollapsed=true;var e=true;if(a.isFunction(c.onCollapse)){var d=c.onCollapse.call(b);e=(d===false)?false:true}if(e){b.element.triggerHandler("onCollapse")}})}},setTitle:function(b){if(b){this.options.title=b;this.options._objHeaderTitle.text(b)}},setIconCls:function(b){var c=this.options;if(c.iconCls&&c.iconCls.length!=0){c._objHeaderIcon.removeClass(c.iconCls)}c._objHeaderIcon.addClass(b);c.iconCls=b},setSize:function(k,e){var g=window["$Utils"];var f=this.options;var i=this.element;var m=f._objWrapperBody;var j=m.children(".f-panel-body-content");var b=j.size();if(k!=null){var l=g.getPercentage(k);if(l){i.get(0).style.width=l;m.get(0).style.width="auto";if(b===1){j.get(0).style.width="auto"}}else{var c=2;k=parseInt(k);var n=k-c;if(!isNaN(n)){if(n<0){n=0}i.get(0).style.width=k+"px";if(b===1){j.get(0).style.width=n+"px"}else{m.get(0).style.width=n+"px"}}}}if(e!=null){var l=g.getPercentage(e);if(l){i.get(0).style.height=l;m.get(0).style.height="auto";if(b===1){j.get(0).style.height="auto"}}else{var c=27;var n=parseInt(e)-c;if(!isNaN(n)){if(n<0){n=0}i.get(0).style.height="auto";if(b===1){var d=0;j.siblings().not("script").each(function(){d+=a(this).outerHeight(true)});n=(n-d)<0?0:(n-d);j.get(0).style.height=n+"px"}else{m.get(0).style.height=n+"px"}}}}}})})(jQuery);(function(d,b){var h=window["$Utils"];function i(r,n){var s=n&&n.id||"fui";var q=s+"-mask-bg";var p=s+"-mask-img";var m=s+"-mask-msg";var o=[];o.push('<div id="'+q+'" class="f-mask-bg"></div>');o.push('<div id="'+p+'" class="f-mask-img" style="display:none;"><div id="'+m+'" class="">');o.push(r||window["$i18n"].mask.defaultMsg);o.push("</div></div>");return o.join("")}function k(){if(window.hasHidden===true){return}var q=0;var p=0;var s;var t=window.hiddenArrayList||[];window.hiddenArrayList=t;window.hasHidden=true;var r=d("select");var n=r.length;for(var q=0;q<n;q++){var m=r.get(q);var o=m.style;if(o.display=="none"||o.display=="block"){}else{o.display="none";t.push(m)}}}function g(){if(window.hasHidden===false){return}var m=d("#win-mask-overlay,#dialog-mask-overlay");if(m.length>0){return}window.hasHidden=false;var p=window.hiddenArrayList;var o=d.isArray(p)&&p.length||0;if(p!=null&&p!=false&&o>0){for(var n=0;n<o;n++){p[n].style.display=""}}p=null;window.hiddenArrayList=null}function e(){if(d.browser.msie&&(d.browser.version=="6.0")){k()}}function a(){if(d.browser.msie&&(d.browser.version=="6.0")){g()}}function j(q,m,n){var o=d("#"+m+"-mask-bg");if(o.length==0){n=n||{};n.id=m;var p=i(q,n);d("body").append(p)}l(q,m,n)}function f(r,m,n){var q=m+"-mask-bg";var o=d("#"+q);if(o.length==0){var n={id:m};var p=i(r,n);d("body").append(p)}c(r,m,n)}function l(x,q,p){var v=d("#"+q+"-mask-bg");var u=d("#"+q+"-mask-img");var B=d("#"+q+"-mask-msg");var r=jQuery.support.boxModel;var E=document.documentElement;var s=r&&E.clientWidth||document.body.clientWidth;var C=r&&E.clientHeight||document.body.clientHeight;var A=r&&E.scrollLeft||document.body.scrollLeft;var m=r&&E.scrollTop||document.body.scrollTop;var D=(s+A)+"px";var o=(C+m)+"px";v.css("width",D);v.css("height",o);B.html(x);var n=u.outerWidth(true);var t=u.outerHeight(true);var z=((s-n)/2+A)+"px";var y=((C-t)/2+m)+"px";u.css("left",z);u.css("top",y);v.css("display","");if((p||{})["showImg"]===false){return}u.css("display","")}function c(z,s,q){var n=d("#"+s);var y=d("#"+s+"-mask-bg");var x=d("#"+s+"-mask-img");var E=d("#"+s+"-mask-msg");var v=n.outerWidth(true);var F=n.outerHeight(true);var D=n.scrollLeft();var m=n.scrollTop();var G=v+"px";var p=F+"px";y.css("width",G);y.css("height",p);var t=n.offset();var r=t.left;var C=t.top;y.css("left",r);y.css("top",C);E.html(z);var o=x.outerWidth(true);var u=x.outerHeight(true);var B=(r+(v-o)/2)+"px";var A=(C+(F-u)/2)+"px";x.css("left",B);x.css("top",A);y.css("display","");if((q||{})["showImg"]===false){return}x.css("display","")}d.fn.doMask=function(o,m){var n=d(this);h.addClass(n.get(0),"f-mask-scroll-hide");e();if(n.is("body")){j(o,"fui",m)}else{var p=n.attr("id");f(o,p,m)}};d.fn.doUnMask=function(){var n=d(this);a();if(n.is("body")){var m=n.find(">#fui-mask-bg");if(m.length>0){var q=n.find(">#fui-mask-img");q.css("display","none");m.css("display","none")}a()}else{var r=n.attr("id");var p=r+"-mask-bg";var o=r+"-mask-img";var m=d("#"+p);if(m.length>0){var q=d("#"+o);q.css("display","none");m.css("display","none")}a()}h.removeClass(n.get(0),"f-mask-scroll-hide")}})(jQuery);(function(a,b){a.widget("FUI.FCombo",{options:{fieldLabel:null,readonly:false,enabled:true,disabled:false,listHeight:22*6+2,upDownDelay:100,filterDelay:300,itemHeight:22,multiSelect:false,multiSeparator:",",displayFormat:"{valueField}:{displayField}",displaySeparate:":",forceSelection:true,selectable:true,staticData:[],defaultValue:null,autoload:false,valueField:"value",displayField:"text",width:150,selectFirst:false,filterCallback:function(d,c){return d.startWith(c)}},_create:function(){var e=this.options,g=e.onFilter,c=window["$Utils"];this.displayItems=[];var d=e.staticData;this.isStaticLoad=false;this.isFirstShow=true;e.enabled=!e.disabled;if(!c.isEmpty(d)){if(a.isFunction(g)){this.displayItems=this.options.staticData=g.call(this,d)}else{this.displayItems=d}if(this.displayItems&&this.displayItems.length>0){this.isStaticLoad=true}}var f=this.element;this.inputEl=f.next();this.imgEl=this.inputEl.next();this.isShow=false;this.value="";this.isMatchValue=false;if(e.enabled&&e.selectable){this._bindEvent()}},_init:function(){var f=this.options;var d=window["$Utils"];var c=f.defaultValue;var i=f.selectFirst;var e=this.displayItems||[];if(!d.isEmpty(e)){if(!d.isEmpty(c)){this.setValue(c,false,true)}else{if(i){var g=e[0];var h=g[f.valueField];this.setValue(h,false,true)}}}if(this.isStaticLoad==false){if(!d.isEmpty(f.dataUrl)&&f.autoload){this._prepareAjaxLoad()}}},_prepareAjaxLoad:function(d,l,k){var e=this,o=e.options,n=o.onFilter,g=window["$Utils"];var m=function(u,w,s){e.hasLoaded=true;e.isLoading=false;var q=u.data;if(a.isFunction(n)){e.displayItems=e.options.staticData=n.call(e,q)}else{e.displayItems=e.options.staticData=q}var p=o._valueCache||o.defaultValue;if(!g.isEmpty(p)){e.setValue(p,false,true);if(o._valueCache){o._valueCache=b}}else{if(o.selectFirst){var v=e.options.staticData;var r=v[0];var t=r[o.valueField];e.setValue(t,false,true)}}if(d){e._show()}if(a.isFunction(o.onLoadsuccess)){o.onLoadsuccess(u,w,s)}};var j=function(q,r,p){e.hasLoaded=true;e.isLoading=false;e.displayItems=e.options.staticData=[];if(a.isFunction(o.onLoadfailure)){o.onLoadfailure(q,r,p)}};var h=o.onError;var i=o.onBeforesend;if(i&&false===i()){return}var f=l||o.baseParams||{};var c=k||o.dataUrl;e._load(f,c,m,j,h)},_bindEvent:function(){var c=this._getEvent("img");this.imgEl.bind(c);var e=this._getEvent("input");this.inputEl.bind(e);if(!this.isFirstShow){var d=this._getEvent("listDiv");this.listDiv.bind(d)}},_unbindEvent:function(){this.imgEl.unbind();this.inputEl.unbind();this.listDiv&&this.listDiv.unbind();a(document).unbind("click.FCombo")},_getEvent:function(l){var d=this,p=d.options,h=this.element,o=this.inputEl,j=window["$Utils"],f=p.multiSeparator;var e=function(){if(d.isShow){d._hideList()}else{d.inputEl.focus();d._resetItems();d._show(true);d.inputEl.get(0).select()}};var k={click:function(q){e();j.stopPropagation(q)}};if(l=="img"){return k}var n=function(){var q=this._selectNext();this._adjustScroll(q,this.listEl,"bottom")};var g=function(){var q=this._selectPrev();this._adjustScroll(q,this.listEl,"top")};var c=function(){var r=this.inputEl.val();var q=this.lastValue;if(r!=q){this._filterValue(r);if(!this.isShow){this._show()}else{if(!this._prevShowList()){this._hideList();return false}this._afterShowList(true)}this.lastValue=r}};var i={blur:function(w){p._startFilter=b;if(d.isShow&&p.multiSelect){return}var u=d.inputEl.val();var t=d.element;if(false==p.forceSelection){var r=u.split(p.displaySeparate);var q=r[0];t.val(q);d.value=q;t.isValidate&&t.isValidate()}else{if(!u){t.val("");d.value="";t.isValidate&&t.isValidate()}else{var s=d.displayValue;d.inputEl.val(s)}}if(a.isFunction(p.onBlur)){p.onBlur.call(d)}},keydown:function(A){var F=A.keyCode;if(F===38){var t=a.proxy(g,d);setTimeout(t,p.upDownDealy)}else{if(F===40){if(d.isShow){var q=a.proxy(n,d);setTimeout(q,p.upDownDealy)}else{d._resetItems();d._show()}}else{if(F===13){if(d.isShow){var u=d._getSelectEl();if(u.length>0){if(p.multiSelect){var D=u.attr("f_value");var C=d.value;var s="";var r=u.hasClass("f-combo-list-div-multi-selected");if(r){j.removeClass(u.get(0),"f-combo-list-div-multi-selected");var y=C.indexOf(D);if(y>0){s=C.replace(new RegExp(f+D,"gm"),"")}else{if(D==C){s=""}else{s=C.replace(new RegExp(D+f,"gm"),"")}}}else{j.addClass(u.get(0),"f-combo-list-div-multi-selected");if(j.isEmpty(C)){s=D}else{s=C+f+D}}d.setValue(s,true)}else{var E="";var D=u.attr("f_value");var B=u.attr("f_value_type");E=j.convert(D,B);d.setValue(E,true);d._hideList()}}}else{if(false==p.forceSelection){var D=d.inputEl.val();var z=D.split(p.displaySeparate);var E=z[0];var w=d.element;w.val(E);w.isValidate&&w.isValidate()}}}else{if(F==9){a(document).trigger("click.FCombo")}else{if(!p.multiSelect){var x=a.proxy(c,d);setTimeout(x,p.filterDelay)}}}}}j.stopPropagation(A)}};if(l=="input"){return i}var m={mouseover:function(t){var q=t.target,v=q.nodeName,s=q.className;if(p.multiSelect){var u=a(q);if(v&&v.toLowerCase()=="div"&&s.indexOf("f-combo-list-div")!==-1){j.removeClass(d.overId,"f-combo-list-div-mouseover");j.addClass(q,"f-combo-list-div-mouseover");d.overId=q.id}else{var r=u.parent();j.removeClass(d.overId,"f-combo-list-div-mouseover");j.addClass(r.get(0),"f-combo-list-div-mouseover");d.overId=r.attr("id")}}else{if(v&&v.toLowerCase()=="div"&&s.indexOf("f-combo-list-div")!==-1){j.removeClass(d.overId,"f-combo-list-div-mouseover");j.addClass(q,"f-combo-list-div-mouseover");d.overId=q.id}}j.stopPropagation(t)},click:function(w){var u=w.target,y=u.nodeName,C=u.className;if(p.multiSelect){var r=a(u);if(y&&y.toLowerCase()=="div"&&C.indexOf("f-combo-list-div")!==-1){var q=r.hasClass("f-combo-list-div-multi-selected");if(q){j.removeClass(r.get(0),"f-combo-list-div-multi-selected")}else{j.addClass(r.get(0),"f-combo-list-div-multi-selected")}}else{if(r.length>0){var t=r.parent();var q=t.hasClass("f-combo-list-div-multi-selected");if(q){j.removeClass(t.get(0),"f-combo-list-div-multi-selected")}else{j.addClass(t.get(0),"f-combo-list-div-multi-selected")}}}var B="";var A=d.listDiv.children(".f-combo-list-div-multi-selected");var D=A.length;for(var s=0;s<D;s++){var r=a(A.get(s));var z=r.attr("f_value");if(s>0){B+=f}B+=z}d.setValue(B,true);d.inputEl.focus();j.stopPropagation(w)}else{if(y&&y.toLowerCase()=="div"&&C.indexOf("f-combo-list-div")!==-1){var B="";var r=a(u);if(r.length>0){var z=r.attr("f_value");var x=r.attr("f_value_type");B=j.convert(z,x)}d.setValue(B,true);d._hideList()}j.stopPropagation(w)}d.inputEl.focus()}};if(l=="listDiv"){return m}},_resetItems:function(){var f=this.options,e=f.staticData,d=e.length;this.displayItems=[];var c=[];for(var g=0;g<d;g++){c.push(e[g])}this.displayItems=c},_filterValue:function(j){var n=this.options,m=n.valueField,e=n.displayField;var f=n.staticData,k=f.length;var d=[];if(j===""){for(var c=0;c<k;c++){d.push(f[c])}}else{var g=n.filterTarget;if(!g){g=m}var h=n.filterCallback;if(a.isFunction(h)){for(var c=0;c<k;c++){var l=f[c];if(h(""+l[g],""+j)){d.push(l)}}}}this.displayItems=d},_selectPrev:function(){var c=window["$Utils"];var e=this._getSelectEl();var d=e.prev();if(d.length>0){c.removeClass(e.get(0),"f-combo-list-div-mouseover");c.addClass(d.get(0),"f-combo-list-div-mouseover");this.overId=d.attr("id")}this.inputEl.focus();return d},_selectNext:function(){var d=window["$Utils"],e=this.options;var f=this._getSelectEl();var c=f.next();if(c.length>0){d.removeClass(f.get(0),"f-combo-list-div-mouseover");d.addClass(c.get(0),"f-combo-list-div-mouseover");this.overId=c.attr("id")}this.inputEl.focus();return c},_adjustScroll:function(l,k,i){if(l.length<1){return}var n=this.options,j=k,h=j.offset().top;var f=n.itemHeight;var e=l.offset().top;var g=e-h-1;if(i==="top"){if(g<0){j.get(0).scrollTop-=f}}else{if(i==="bottom"){var c=j.get(0).clientHeight;if(g>(c-f)){j.get(0).scrollTop+=f}}else{if(i==="center"){var c=j.get(0).clientHeight;var m=parseInt((c-f)/2+h);var d=e-m;j.get(0).scrollTop+=d}}}},_renderListItem:function(n){var g=this.element;var s=this.options;var j=window["$Utils"];var r=s.valueField;var l=s.displayField;var c=g.attr("id");var o=this.listDiv;var h=[],k=n.length;var d=s.multiSelect;this.isMatchValue=false;if(!d){for(var f=0;f<k;f++){var q=n[f],m=q[l],p=q[r];var e=this._getFormatStr(q);h.push('<div class="f-combo-list-div ');if(this._matchValue(p)){h.push(" f-combo-list-div-mouseover");this.isMatchValue=true}h.push('"');h.push(' id="f-combo-'+(c+"-list-"+f)+'"');h.push(' f_value="'+p+'"');h.push(' f_value_type="'+typeof(p)+'"');h.push(' title="');h.push(e);h.push('">');h.push(e);h.push("</div>")}}else{for(var f=0;f<k;f++){var q=n[f],m=q[l],p=q[r];h.push('<div class="f-combo-list-div');if(f==0){h.push(" f-combo-list-div-mouseover")}if(this._matchValue(p)){h.push(" f-combo-list-div-multi-selected");this.isMatchValue=true}h.push('"');h.push(' id="f-combo-'+(c+"-list-"+f)+'"');h.push(' f_value="'+p+'"');h.push(' f_value_type="'+typeof(p)+'"');h.push(">");h.push('<div class="f-combo-list-multi-img"></div>');var e=this._getFormatStr(q);h.push('<div class="f-combo-list-multi-text"');h.push(' title="');h.push(e);h.push('">');h.push(e);h.push("</div>");h.push("</div>")}this.overId="f-combo-"+c+"-list-0"}o.html(h.join(""))},_matchValue:function(h){var d=window["$Utils"],f=this.options,j=f.multiSelect,k=f.multiSeparator;if(d.isEmpty(h)){return false}if(d.isEmpty(this.value)){return false}if(j){var e=this.value.split(k);var c=e.length;for(var g=0;g<c;g++){if(h==e[g]){return true}}return false}else{if(h==this.value){return true}else{return false}}},_getFormatStr:function(j){var c=this,l=c.options,e=window["$Utils"];var k=l.valueField;var f=l.displayField;var i=l.displayFormat;var h=j[k];var g=j[f];var d=g;if(!e.isEmpty(i)){if(typeof i==="string"){d=i.replace(/\{valueField\}/gm,h);d=d.replace(/\{displayField\}/gm,g)}else{if(a.isFunction(i)){d=i.call(c,j)}}}return d},_prevShowList:function(){if(this.isFirstShow){var d=[];var f=this.element.attr("id");d.push('<div id="');d.push(f);d.push('-combolist" class="f-combo-list-container" style="display:none">');d.push('<div id="');d.push(f);d.push('-combo-inner" class="f-combo-list-inner" ></div></div>');a("body").append(d.join(""));this.listEl=$I(f+"-combolist");this.listDiv=$I(f+"-combo-inner");var e=this._getEvent("listDiv");this.listDiv.bind(e);this.isFirstShow=false}var c=this.displayItems;if(c.length==0){return false}else{this._renderListItem(c);return true}},_getListWidth:function(){var f=this.inputEl;var e=this.imgEl;var c=this.options;var h=c.listWidth;var g=f.outerWidth()+e.outerWidth();var d=h?h:g;return d},_show:function(c){var d=this.options;if(c){a(document).trigger("click.FCombo")}if(this.isShow!==true){if(this.isLoading){return}if(this.isStaticLoad===true||this.hasLoaded){if(!this._prevShowList()){return false}if(!d._startFilter){this._adjustHeight();this._showList();d._startFilter=true}else{this._showList(false)}this._afterShowList();this.isShow=true}else{if(d.dataUrl&&(d.autoload==false)&&!this.hasLoaded){this._prepareAjaxLoad(true)}}}},_showList:function(c){var d=window["$Utils"];var h=this.listEl;var g=this.inputEl;var j=h.get(0).style;if(c===false){j.display="block"}else{j.width=(this._getListWidth()-2)+"px";var i=d.getAlignXY(g,h);var f=i.top;var e=i.left;j.left=e+"px";j.top=f+"px";j.display="block"}},_afterShowList:function(d){var c=window["$Utils"];if(d){this._setSelectEl()}else{if(false===this.isMatchValue){if(!this.options.multiSelect){var e=this.listDiv.children(":first");if(e.length){c.addClass(e.get(0),"f-combo-list-div-mouseover")}}}}this._appendEvent()},_resetValueOnBlur:function(){var g=this.inputEl.val();if(!g){this.element.val("");this.value="";this.inputEl.val("")}else{if(this.options.forceSelection){var f=this.displayValue;this.inputEl.val(f)}else{var d=g.split(this.options.displaySeparate);var c=d[0];var e=this.element;e.val(c);this.value=c;e.isValidate&&e.isValidate()}}},_appendEvent:function(){var f=this,c=window["$Utils"];var d=function(g){c.stopPropagation(g)};var e=function(){f._hideList();f._resetValueOnBlur();f.inputEl.unbind("click.FCombo",d);a(document).unbind("click.FCombo")};a(document).one("click.FCombo",e);f.inputEl.bind("click.FCombo",d)},_adjustHeight:function(){var e=this.options,d=e.listHeight,f=this.listEl;var c=this.displayItems;var g=f.get(0).style;g.height=d+"px"},_setSelectEl:function(){var d=window["$Utils"];var e=this.value;var f=this.listEl;if(d.isEmpty(e)){this._selectFirstListEl();f.get(0).scrollTop=0}else{var c=this.listDiv;var g=c.children('div[f_value="'+e+'"]');if(g.length>0){d.removeClass(this.overId,"f-combo-list-div-mouseover");d.addClass(g.get(0),"f-combo-list-div-mouseover");this.overId=g.attr("id");this.selectId=g.attr("id")}else{this._selectFirstListEl();f.get(0).scrollTop=0}}},_selectFirstListEl:function(){var e=window["$Utils"];var d=this.listDiv;var c=d.children(":first");e.removeClass(this.overId,"f-combo-list-div-mouseover");e.addClass(c.get(0),"f-combo-list-div-mouseover");this.overId=c.attr("id")},_hideList:function(){if(this.isShow===true){this.listEl.hide();this.isShow=false}},doLoad:function(d,c){this._clear();this._prepareAjaxLoad(false,d,c)},_load:function(e,i,h,c,d){var k=this.options,f=window["$Utils"];e=e||{};i=i||k.dataUrl;if(k.baseParams){e=f.apply(k.baseParams,e)}e._respType="list";var j,g;if(a.isFunction(h)){j=h}if(a.isFunction(c)){g=c}this.isLoading=true;if(i.indexOf("/")!==0){i=f.getContextPath()+"/"+i}a.FUI.FAjax.remote({type:"POST",url:i,dataType:"json",data:e,context:this,success:j,failure:g,error:d})},_getItemByValue:function(h){var m=this.options;var g=this.displayItems||[];var f=window["$Utils"];var n=null;if(f.isEmpty(g)){return n}var d=g.length;var l=m.valueField;var c=null;for(var e=0;e<d;e++){var k=g[e];var j=k[l];if(h===j){n=k;break}}return n},_getSelectEl:function(){var c=this.listDiv,d=this.options;var e;e=c.children(".f-combo-list-div-mouseover");return e},destroy:function(){this.imgEl.unbind();this.inputEl.unbind();this.listDiv&&this.listDiv.unbind();a(document).unbind("click.FCombo");this.inputEl=null;this.imgEl=null;this.listEl=null;this.listDiv=null;a.Widget.prototype.destroy.call(this)},getValue:function(){return this.value||""},getSelectedDatas:function(){var c=this,s=this.options,d=s.multiSelect,f=s.multiSeparator;var l=s.staticData,h=l.length;var r=s.valueField,k=s.displayField;var m=[];if(d){var p=c.getValue().split(f);var n=p.length;for(var g=0;g<n;g++){var o=p[g];for(var e=0;e<h;e++){if(o==l[e][r]){m.push(l[e]);break}}}}else{for(var g=0;g<h;g++){var o=c.getValue();var q=l[g];if(o==q[r]){m.push(q)}}}return m},reset:function(){var c=this.options.defaultValue;if(c){this.setValue(c,false)}else{this.setValue("",false)}},setValue:function(o,C,A){if(o===b||o===null){return}var x=this,h=this.options,e=this.element,f=this.inputEl,E=h.multiSelect,D=h.multiSeparator;var q=h.staticData,z=q.length;var l=window["$Utils"];var c=h.valueField,u=h.displayField;if(!this.isStaticLoad&&!this.hasLoaded&&o){h._valueCache=o}var g={};if(o===""){this._clear();if(!A){e.isValidate&&e.isValidate()}}else{if(E){this.lastRecord=this.lastRecord||[];g=[];var d=o.split(D);var s=d.length;var m="";var n=false;for(var y=0;y<z;y++){var B=q[y];for(var w=0;w<s;w++){var o=d[w];if(o==B[c]){n=true;g.push(B);m+=D+o}}}if(n){var p=m.slice(1);e.val(p);f.val(p);this.value=p;this.displayValue=p;if(!A){e.isValidate&&e.isValidate()}}else{e.val("");f.val("");this.value="";this.displayValue="";if(!A){e.isValidate&&e.isValidate()}}}else{this.lastRecord=this.lastRecord||{};for(var y=0;y<z;y++){var B=q[y];if(o==B[c]){g=B;var t=this._getFormatStr(B);e.val(o);this.value=o;f.val(t);this.displayValue=t;if(!A){e.isValidate&&e.isValidate()}break}}}}var k=this.lastRecord;this.lastRecord=null;this.lastRecord=g;if(C){h.onSelect&&h.onSelect.call(x,g,k,h.staticData)}},isMatch:function(p){if(!p){return false}var c=this,s=this.options,d=s.multiSelect,f=s.multiSeparator;var m=s.staticData,h=m.length;var r=s.valueField,k=s.displayField;if(d){var o=p.split(f);var n=o.length;for(var g=0;g<n;g++){var p=o[g];var l=false;for(var e=0;e<h;e++){if(p==m[e][r]){l=true;break}}if(!l){return false}}return true}else{for(var g=0;g<h;g++){var q=m[g];if(p==q[r]){return true}}return false}},isDisabled:function(){return !this.options.enabled},setDisabled:function(e){var c=window["$Utils"],f=this;if(f.options.enabled===!e){return}if(false===e){var d=this.element.parent();if(d.length>0){c.removeClass(d.get(0),"f-combo-disable");f.element.removeAttr("disabled");f.inputEl.removeAttr("disabled");f.options.enabled=true;f._bindEvent()}}else{if(true===e){var d=this.element.parent();if(d.length>0){c.addClass(d.get(0),"f-combo-disable");f.element.attr("disabled","");f.inputEl.attr("disabled","");f.options.enabled=false;f._unbindEvent()}}}},isReadonly:function(){return this.options.readonly},setReadonly:function(d){var g=this,e=g.options,c=window["$Utils"];if(e.readonly===d){return}if(true==d){var f=g.inputEl.parent();if(f.length>0){e.readonly=d;g.inputEl.attr("readonly","readonly");c.addClass(f.get(0),"f-combo-readonly")}}else{if(false==d){var f=g.inputEl.parent();if(f.length>0){e.readonly=d;g.inputEl.removeAttr("readonly");c.removeClass(f.get(0),"f-combo-readonly")}}}},isSelectable:function(){return this.options.selectable},setSelectable:function(d){var f=this,c=window["$Utils"];if(f.options.selectable===d){return}if(true===d){var e=f.inputEl.parent();if(e.length>0){f.inputEl.removeAttr("readonly");f.options.selectable=d;c.removeClass(e.get(0),"f-combo-selectable");f._bindEvent()}}else{if(false===d){var e=f.inputEl.parent();if(e.length>0){f.inputEl.attr("readonly","readonly");f.options.selectable=d;c.addClass(e.get(0),"f-combo-selectable");f._unbindEvent()}}}},getData:function(){return this.options.staticData},_clear:function(){this.inputEl.val("");this.element.val("");this.value="";this.displayValue=""},setStaticData:function(i){var e=this.options,d=window["$Utils"],h=e.onFilter;if(!i){return}if(i.length>0){this.isStaticLoad=true}this._clear();if(a.isFunction(h)){this.displayItems=this.options.staticData=h.call(this,i)}else{this.displayItems=this.options.staticData=i}var c=e._valueCache||e.defaultValue;if(!d.isEmpty(c)){this.setValue(c,false,true);if(e._valueCache){e._valueCache=b}}else{if(e.selectFirst){var i=this.options.staticData;var f=i[0];var g=f[e.valueField];this.setValue(g,false,true)}}},setBaseParams:function(c){if(typeof c=="object"){this.options.baseParams=c}}})})(jQuery);(function($){$.registerWidgetEvent("");$.widget("FUI.FAccordion",{options:{id:null,active:0,height:"auto",_contentHeight:"auto",width:"auto",onActive:null,onBeforeActive:null,onBeforeCollapse:null,onCollapse:null,_objHeaders:null,_curActiveId:null,_showProps:{height:"show"},_hideProps:{height:"hide"}},destroy:function(){this._destroy();$.Widget.prototype.destroy.call(this)},_destroy:function(){op._objHeaders||op._objHeaders.destory();op._objHeaders=null},_create:function(){var self=this;var op=self.options;op.id=this.element.attr("id");op._objHeaders=$Utils.IndexMap();self._initHeaders()},_initHeaders:function(){var self=this;var op=self.options;var headerMappings=op._objHeaders;var headers=self.element.children(".f-accordion-header");var size=headers.length;for(var i=0;i<size;i++){var el=$(headers.get(i));if(i==size-1){el.addClass("f-accordion-header-last-collapsed")}el.click(function(){self._toggleActivate(headerMappings.indexOf($(this).attr("id")))});headerMappings.put(el.attr("id"),el)}},_init:function(){var self=this;var op=self.options;self.setSize(op.width,op.height);self.activate(op.active)},_toggleActivate:function(n){var self=this;var op=self.options;var headers=op._objHeaders;var size=headers.size();var id=headers.element(n).key;if(id==op._curActiveId){if(n>=0&&n<size-1){n=n+1}else{if(n==size-1){n=n-1}}}self.activate(n)},activate:function(n){var self=this;var op=self.options;var headers=op._objHeaders;var size=headers.size();var el=self._parseToEl(n,headers);if(!el||el.length==0){return false}var id=el.attr("id");var index=headers.indexOf(id);var curActiveId=op._curActiveId;if(id===curActiveId){return false}if(op._curActiveId&&op.onBeforeCollapse){var result=self._tryExcuteFunc(self,op.onBeforeCollapse,[headers.indexOf(op._curActiveId)]);if(result===false){return false}}if(op.onBeforeActive){var result=self._tryExcuteFunc(self,op.onBeforeActive,[index]);if(result===false){return false}}var toHide=self._hideCurActive();var toShow=self._showActive(index,id,el);!toHide||toHide.addClass("f-state-hide");toShow.removeClass("f-state-hide");var lasActiveId=op._curActiveId;op._curActiveId=id;!op.onCollapse||self._tryExcuteFunc(self,op.onCollapse,[headers.indexOf(lasActiveId)]);!op.onActive||self._tryExcuteFunc(self,op.onActive,[index])},_animate:function(toHide,toShow){var op=this.options;var height=op._contentHeight;var adjust=0;!toHide||toHide.stop(true,true).animate(op._hideProps,{duration:"fast",step:function(now,fx){fx.now=Math.round(now)}});toShow.stop(true,true).animate(op._showProps,{duration:"fast",step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){adjust+=fx.now}else{if(toHide&&!isNaN(height)){fx.now=Math.round(height-toHide.height()-adjust);adjust=0}}}})},_hideCurActive:function(){var self=this;var op=self.options;var headers=op._objHeaders;var id=op._curActiveId;if(!id){return null}var el=headers.get(id);var contentEl=el.next();if(!el||el.length==0||!contentEl||contentEl.length==0){return null}if(headers.indexOf(el.attr("id"))===headers.size()-1){el.addClass("f-accordion-header-last-collapsed")}el.children(".f-accordion-tool").addClass("f-tool-expand").removeClass("f-tool-collapse");var nextHeader=contentEl.next();nextHeader.removeClass("f-accordion-header-sibling-expanded");return contentEl},_showActive:function(n,id,el){var self=this;var op=self.options;var headers=op._objHeaders;var contentEl=el.next();if(n==headers.size()-1){el.removeClass("f-accordion-header-last-collapsed")}el.children(".f-accordion-tool").addClass("f-tool-collapse").removeClass("f-tool-expand");var nextHeader=contentEl.next();nextHeader.addClass("f-accordion-header-sibling-expanded");return contentEl},_parseToEl:function(n,headers){if($Utils.isJQueryObj(n)){return n}headers=headers||this.options._objHeaders;var size=headers.size();if(!isNaN(n)){if(n<0){n=0}else{if(n>=size){n=size-1}}return headers.element(n).value}if($Utils.isString(n)){return this.element.children("#"+n)}return null},getActivated:function(){return this.options._curActiveId},getByIndex:function(n){return this.options._objHeaders.element(n).key},getLength:function(){return this.options._objHeaders.size()},setTitle:function(n,title){var self=this;var op=self.options;var el=self._parseToEl(n,op._objHeaders);if(!el||el.length==0){return false}title=title||" ";el.children(".f-accordion-header-text").html(title)},setSize:function(w,h){var self=this;var op=self.options;var selfEl=this.element;if(w){w=parseInt(w);if(!isNaN(w)){w=w-2;if(w<0){w=0}}else{w=selfEl.parent().width()-2;if(w<0){w=0}}if(op.width!==w){selfEl.width(w);self._adjustWidth(w)}op.width=w}if(h){var rh=parseInt(h);if(!isNaN(rh)){rh=rh-2;if(rh<0){rh=0}}else{if(h==="fit"){rh=selfEl.parent().height()-2;if(rh<0){rh=0}}else{rh="auto"}}if(op.height!==rh){selfEl.height(rh);self._adjustHeight(rh)}op.height=h}},_adjustWidth:function(w){var self=this;var op=self.options;var headers=op._objHeaders.elements;var size=headers.length;var contentWidth="auto";if(!isNaN(w)){contentWidth=w-2;if(contentWidth<0){contentHeight=0}}for(var i=0;i<size;i++){var el=headers[i].value;var contentEl=el.next();contentEl.width(contentWidth)}op._contentWidth=contentWidth},_adjustHeight:function(h){var self=this;var op=self.options;var headers=op._objHeaders.elements;var size=headers.length;var contentHeight="auto";if(!isNaN(h)){contentHeight=h-size*28;if(contentHeight<0){contentHeight=0}}for(var i=0;i<size;i++){var el=headers[i].value;var contentEl=el.next();contentEl.height(contentHeight)}op._contentHeight=contentHeight},_tryExcuteFunc:function(obj,func,args){var EMPTY_FUNC=function(){};var f=func||EMPTY_FUNC;if(!$.isFunction(func)){try{f=eval(func);if(!$.isFunction(f)){return}}catch(e){return}}args=args||[];return f.apply(obj,args)}})})(jQuery);(function(a,b){a.registerWidgetEvent("onClick");a.widget("FUI.FButton",{options:{iconCls:null,onClick:null,_disabled:false},_create:function(){var c=this.element.attr("id");this.options.id=c;this.options._disabled=this.element.hasClass("f-state-disabled");this._bindEvent()},_init:function(){},_bindEvent:function(){var c=this;c.element.click(function(d){c.click()})},destroy:function(){a.Widget.prototype.destroy.call(this)},click:function(){var c=this;var d=c.options;if(!c.isDisabled()){if(a.isFunction(d.onClick)){d.onClick.call(c)}}},setText:function(c){if(c){this.element.find(".f-new-btn-text").html(c)}},isDisabled:function(){return this.options._disabled},setDisabled:function(c){var e=this.options;var d=e._objSelfEl;if(c===false){e._disabled=false;this.element.removeClass("f-state-disabled")}else{e._disabled=true;this.element.addClass("f-state-disabled")}}});a.widget("FUI.FSimpleButton",{options:{height:24,width:75,onClick:null,_disabled:false},_create:function(){this.options.id=this.element.attr("id");this.options._disabled=this._getBoxEl().hasClass("f-state-disabled");this._bindEvent()},_init:function(){},_getBoxEl:function(){var d=this.options;var c=d._objBoxEl;if(!c){c=d._objBoxEl=this._getButtonEl().parent().parent()}return c},_getButtonEl:function(){return this.element},_bindEvent:function(){var d=this;var f=d.options;var c=d._getBoxEl();var e=d._getButtonEl();c.hover(function(){if(d.disabled()){return}c.addClass("f-state-hover")},function(){if(d.disabled()){return}c.removeClass("f-state-hover f-state-active")}).mousedown(function(){if(d.disabled()){return}c.addClass("f-state-active")}).mouseup(function(){if(d.disabled()){return}c.removeClass("f-state-active")}).click(function(){d.click()});e.focus(function(){if(d.disabled()){return}c.addClass("f-state-focus")}).blur(function(){if(d.disabled()){return}c.removeClass("f-state-focus")})},destroy:function(){this._getBoxEl().unbind();this._getButtonEl().unbind();this.options._objBoxEl=null;a.Widget.prototype.destroy.call(this)},click:function(){var d=this;var f=d.options;if(!d.disabled()){var e=true;if(a.isFunction(f.onClick)){var c=f.onClick.call(d);e=(c===false)?false:true}if(e){this.element.triggerHandler("onClick")}}},disabled:function(d){var f=this.options;if(arguments.length===0){return f._disabled}var c=this._getBoxEl();var e=this._getButtonEl();if(d===false){f._disabled=false;c.removeClass("f-state-hover f-state-active f-state-focus f-state-disabled");e.attr("disabled",false)}else{f._disabled=true;c.removeClass("f-state-hover f-state-active");c.addClass("f-state-disabled");e.attr("disabled",true)}},setText:function(c){if(c){this._getButtonEl().html(c)}else{this._getButtonEl().html("&nbsp;")}}});a.FUI.FSimpleButton=a.FUI.FSimpleButton||{};a.FUI.FSimpleButton.generateHtml=function(n){var e=n.id||$Utils.genId("f-button");var q=n.text||("Button"+$Utils.UID);var f=n.width||"75px";var r=n.height||"22px";var i=n.leftIconCls;var l=n.rightIconCls;var o=n.onClick||"";var h=n.tabIndex||0;var j=n.disabled||false;var d=parseInt(f);var c=parseInt(r);var g=c/2-1;var m="width:"+d+"px;";m+="height:"+c+"px;";m+="line-height:"+c+"px;";m+="margin-top:-"+(g+2)+"px;";var k=n.style||"";var p="			<div id='{0}-wrapper' style='{13}' class='f-button f-widget f-form-unselectable' onselectstart='return false;'> 			<div class='f-button-box'  style='width:{9}px;height:{10}px'> 			   <div class='f-button-t' style='line-height:{iLineHeight}px'>&nbsp;</div> 			   <button id='{0}' hidefocus='true' class='f-button-text' style='text-align:center;{12}' 			   	tabIndex={7}'> 			   	{1} 			   </button> 			</div></div>";return $Utils.format(p,e,q,f,r,i,l,o,h,j,d,c,g,m,k)}})(jQuery);(function(a){a.FUI.FToolGroup=a.FUI.FToolGroup||{};a.FUI.FToolGroup.generateHtml=function(h){var c=h.id||$Utils.genId("f-toolGroup");var b=h.style||"";var f=h.classes||"";var d=h.width||"auto";var p=h.height||"auto";var o=h.toolAlign||"center";var j=h.toolspacing||"2";var l=h.toolpadding||"0";var m="";function e(q){var i="<td class='f-tool-cell'>"+q+"</td>";return i}var k=h.items;for(var g=0;g<k.length;g++){m+=e(k[g])}var n="			<div id='{0}' class='f-toolGroup f-tools-{5} {2}' style='{1}'> 				<table cellspacing='{6}' cellpadding='{7}' 						style='height:{4};width:{3};' class='f-toolGroup-ct'> 					<tbody><tr>{8}</tr> 					</tbody> 				</table> 			</div>		";return $Utils.format(n,c,b,f,d,p,o,j,l,m)};a.FUI.FButtonGroup=a.FUI.FButtonGroup||{};a.FUI.FButtonGroup.generateHtml=function(b){b.id=b.id||$Utils.genId("f-buttonGroup");b.classes=(b.classes||"")+" f-buttonGroup ";b.toolAlign=b.buttonAlign;return a.FUI.FToolGroup.generateHtml(b)}})(jQuery);(function(a){a.FUI.FDate=function(){this.y=0,this.M=0,this.d=0,this.H=0,this.m=0,this.s=0;this.lastFmt="";this.lastDateStr="";this._reset=function(){this.y=this.M=this.d=this.H=this.m=this.s=0};this.parseStr=function(j,c){var o=this;var k,h,m,d,l,b;c=c||"yyyy-MM-dd";o.lastFmt=c;o.lastDateStr=j;for(var e=0;e<c.length;){var n=o._parseLiteral(c,e);if(n.literal==null){break}var g=n.startIndex;var f=n.count;o[n.literal]=Number(j.substr(g,f),10);e=g+f}};this._parseLiteral=function(b,j){var e=null;var f=0;var h=-1;var g="";for(var c=j;c<b.length;c++){var d=b.charAt(c);if(e!=null){if(e==d){f++;g=g+d}else{break}}else{if(d=="y"||d=="M"||d=="d"||d=="H"||d=="m"||d=="s"){e=d;f++;g=g+d;h=c}}}return{literal:e,count:f,startIndex:h,value:g}};this.toString=function(c){var j=this;c=c||"yyyy-MM-dd";if(j.lastFmt==c){return j.lastDateStr}var k=c;for(var d=0;d<c.length;){var h=j._parseLiteral(c,d);if(h.literal==null){break}var g=h.literal;var e=h.count;var b=h.value;var f=j._getLiteralValue(g,e);k=k.replace(b,f);d=h.startIndex+e}return k};this._getLiteralValue=function(d,e){var b=this;var f=""+b[d];var g=e-f.length;if(g>0){for(var c=0;c<g;c++){f="0"+f}}return f}};a.widget("FUI.FCalendar",{options:{id:null,showOpts:null,selectable:true},_create:function(){var b=window["$Utils"],d=this.options,e=this.element;d.id=e.attr("id");d.showOpts=d.showOpts||{};var c=e.next().attr("readonly");if(c){this.options.showOpts=b.apply(this.options.showOpts||{},{readOnly:true})}},_init:function(){this._bindEvent()},_bindEvent:function(){var b=this;var e=b.element.FTextField("getInputEl");if(!e.is("input")){return}var d=this.options;var c=$I(d.id+"-trigger");if(c.size()!=0){c.click(function(){if($I(d.id).FTextField("disabled")===true||!b.isSelectable()){return}e.unbind("focus.FCalendar");b.show()})}e.bind("focus.FCalendar",function(){if($I(d.id).FTextField("disabled")===true||b.isReadonly()){return}e.unbind("focus.FCalendar");b.show()});b.element.bind("onValueChanged",function(j,n){var f="";var i=b.options;if(!n){$I(i.id+"-input").val("")}else{var g=new a.FUI.FDate();var k=i.realDateFmt||(i.showOpts||{}).realDateFmt;var h=i.realTimeFmt||(i.showOpts||{}).realTimeFmt;var l=i.realFullFmt||(i.showOpts||{}).realFullFmt;var m=i.dateFmt||(i.showOpts||{}).dateFmt;if(k){f=k}else{if(h){f=h}else{f=l}}g.parseStr(n,f);$I(i.id+"-input").val(g.toString(m))}})},setValue:function(b,c){return this.element.FTextField("value",b,c)},getValue:function(){return this.element.FTextField("value")},reset:function(){return this.element.FTextField("reset")},setDisabled:function(b){return this.element.FTextField("disabled",b)},isDisabled:function(){return this.element.FTextField("disabled")},setSelectable:function(b){if(b===true||b===false){this.options.selectable=b}},isSelectable:function(){return this.options.selectable},setReadonly:function(b){if(undefined===b){return false}if(true===b||"true"==b){this.options.showOpts.readOnly=true}else{this.options.showOpts.readOnly=false}return this.element.FTextField("readonly",b)},isReadonly:function(){return this.element.FTextField("readonly")},show:function(d){var b=this;var c=this.options;d=d||c.showOpts||{};d=a.extend({},d,{el:c.id+"-input",vel:c.id,position:b._calPosition()});c.dateFmt=d.dateFmt;c.realDateFmt=d.realDateFmt;c.realTimeFmt=d.realTimeFmt;c.realFullFmt=d.realFullFmt;WdatePicker(d)},hide:function(){$dp.hide()},setShowOpts:function(b){this.options.showOpts=b},_calPosition:function(){var c=this.element;var b=c.FTextField("getBoxEl");if(b.hasClass("f-textField-icon-right")||b.hasClass("f-textField-icon-left")||b.hasClass("f-textField-icon-inner-right")){return{left:-4,top:1}}else{if(b.hasClass("f-textField-icon-inner-left")){return{left:-19,top:1}}}},destroy:function(){var b=this.options;a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){a.widget("FUI.FCheckboxGroup",{options:{seperator:",",defaultValue:"",_objBox:null},_create:function(){this.options.id=this.element.attr("id");this.options._objBox=null},_init:function(){this.options._objBox=null;this._bindEvent();if(this.options.defaultValue){this.reset()}if(this.options.readonly===true){this.readonly(true)}if(this.options.disabled===true){this.disabled(true)}},_bindEvent:function(){var b=this;a(":checkbox[value]",this._getBoxEl()).click(function(){if(b.readonly()||b.disabled()){return false}b._triggerValueChange()})},_getBoxEl:function(){var c=this.element;var b=this.options;if(b._objBox==null){if(c.is("input")){b._objBox=c.parent()}else{b._objBox=c}}return b._objBox},_triggerValueChange:function(){var b=[];a(":checkbox[value]:checked",this._getBoxEl()).each(function(){var d=a(this);if(!d.attr("disabled")){b.push(a(this).val())}});var c=this.options.seperator||",";a("input[name]",this._getBoxEl()).val(b.join(c))},value:function(b,d){if(b||b==""){var c=this.options.seperator||",";var e=b;if($Utils.isString(b)){e=b.split(c)}if($Utils.isArray(e)){this._setValueByArray(e);if(d!==true){this.element.trigger("onValueChanged")}}}return a("input[name]",this._getBoxEl()).val()},setValue:function(b,c){return this.value(b,c)},getValue:function(){return this.value(v)},disabled:function(c){var b=this._getBoxEl();if(arguments.length!=0){c=(c===true);if(c){b.addClass("f-state-disabled")}else{b.removeClass("f-state-disabled")}a(":checkbox[value],input[name]",b).attr("disabled",c)}return b.hasClass("f-state-disabled")},setDisabled:function(b){return this.disabled(b)},isDisabled:function(){return this.disabled()},readonly:function(c){var b=this._getBoxEl();if(arguments.length!=0){c=(c===true);if(c){b.addClass("f-state-readonly")}else{b.removeClass("f-state-readonly")}a(":checkbox[value],input[name]",this.boxEl).attr("readonly",c)}return b.hasClass("f-state-readonly")},setReadonly:function(b){return this.readonly(b)},isReadonly:function(){return this.readonly()},reset:function(){var b=this.options.defaultValue||"";this.value(b)},name:function(c){var b=a("input[name]",this._getBoxEl());if(c||c==""){b.attr("name",c)}return b.attr("name")},_setValueByArray:function(b){a(":checkbox[value]",this._getBoxEl()).each(function(){var c=a(this);var d=c.val();if(a.inArray(c.val(),b)>=0){c.attr("checked",true)}else{c.attr("checked",false)}});this._triggerValueChange()},destroy:function(){a(":checkbox[value]",this._getBoxEl()).unbind();this.options._objBox=null}})})(jQuery);(function(a){a.registerWidgetEvent("onExpand,onCollapse");a.widget("FUI.FFieldset",{options:{width:"auto",height:"auto",autoscroll:true,onCollapse:null,onExpand:null,_isCollapsed:false,_isNeedResize:false,_objHeader:null,_objHeaderToggle:null,_objHeaderText:null,_objBodyWrapper:null,_bodyWrapperHGaps:38,_bodyWrapperWGaps:28},_create:function(){var b=this.element.attr("id");var d=this.element;var c=this.options;c.id=b;c._objHeader=$I(b+"-legend");c._objHeaderToggle=$I(b+"-toggle");c._objHeaderToggle.css("float","left");c._objHeaderToggle.css("margin","2px");c._objHeaderText=$I(b+"-title");c._objBodyWrapper=$I(b+"-bwrap");c._isCollapsed=this.element.hasClass("f-collapsed");c._isNeedResize=c._isCollapsed;if(!c._isNeedResize){c._bodyWrapperHGaps=d.outerHeight(false)-c._objBodyWrapper.height();c._bodyWrapperWGaps=d.outerWidth(false)-c._objBodyWrapper.width()}this._bindEvent()},_init:function(){this.setSize(this.options.width,this.options.height)},_bindEvent:function(){var c=this;var b=this.options._objHeaderToggle;b.hover(function(d){b.addClass("f-tool-toggle-over")},function(d){b.removeClass("f-tool-toggle-over")});b.click(function(){if(c.options._isCollapsed){c.expand()}else{c.collapse()}return false})},destroy:function(){this.options._objHeaderToggle.unbind();this.options._objHeader=null;this.options._objHeaderToggle=null;this.options._objHeaderText=null;this.options._objBodyWrapper=null;a.Widget.prototype.destroy.call(this)},expand:function(){var b=this;var d=this.element;var c=b.options;if(c._isCollapsed){c._objBodyWrapper.slideDown("fast",function(){b.element.addClass("f-collapsible").removeClass("f-collapsed");c._isCollapsed=false;if(c._isNeedResize){c._bodyWrapperHGaps=d.outerHeight(false)-c._objBodyWrapper.height();c._bodyWrapperWGaps=d.outerWidth(false)-c._objBodyWrapper.width();b.setSize(c.width,c.height);c._isNeedResize=false}if(c.autoscroll){c._objBodyWrapper.css("overflow","auto")}var f=true;if(a.isFunction(c.onExpand)){var e=c.onExpand.call(b);f=(e===false)?false:true}if(f){b.element.triggerHandler("onExpand")}a(this).css({zoom:1})})}},collapse:function(){var b=this;var c=b.options;if(!c._isCollapsed){c._objBodyWrapper.slideUp("fast",function(){b.element.removeClass("f-collapsible").addClass("f-collapsed");c._isCollapsed=true;var e=true;if(a.isFunction(c.onCollapse)){var d=c.onCollapse.call(b);e=(d===false)?false:true}if(e){b.element.triggerHandler("onCollapse")}})}},setTitle:function(b){if(b){this.options.title=b;this.options._objHeaderText.text(b)}},setSize:function(k,e){var g=window["$Utils"];var f=this.options;var i=this.element;var m=f._objBodyWrapper;var j=m.children(".f-panel-body-content");var b=j.size();if(k){var l=g.getPercentage(k);if(l){i.get(0).style.width=l;m.get(0).style.width="auto";if(b===1){j.get(0).style.width="auto"}}else{var c=f._bodyWrapperWGaps;k=parseInt(k);var n=k-c;if(!isNaN(n)){if(n<0){n=0}i.get(0).style.width=n+"px";if(b===1){j.get(0).style.width=n+"px"}else{m.get(0).style.width=n+"px"}}}}if(e){var l=g.getPercentage(e);if(l){i.get(0).style.height=l;m.get(0).style.height="auto";if(b===1){j.get(0).style.height="auto"}}else{var c=f._bodyWrapperHGaps;var n=parseInt(e)-c;if(!isNaN(n)){if(n<0){n=0}if(b===1){var d=0;j.siblings().not("script").each(function(){d+=a(this).outerHeight(true)});n=(n-d)<0?0:(n-d);j.get(0).style.height=n+"px"}else{m.get(0).style.height=n+"px"}i.get(0).style.height="auto"}}}}})})(jQuery);(function($){$.registerWidgetEvent("onShow,onHide");$.widget("FUI.FForm",{options:{id:null,enterSwitch:true,params:{},action:"",beforeSubmit:undefined,onSuccess:undefined,onFailure:undefined,onError:undefined,uploadType:"memory",isUpload:false,onFileUploadEvent:null},_create:function(){this.options.id=this.element.attr("id")},_init:function(){var self=this;var selfEl=self.element;var op=this.options;if(op.enterSwitch==="true"||op.enterSwitch===true){if(!$Component.hasFType(this.element,"FEnterSwitch")){self.element.FEnterSwitch({})}}selfEl.submit(function(e){e.preventDefault();return false});if(op.isUpload){selfEl.attr("method","post");selfEl.attr("enctype","multipart/form-data")}},setParams:function(params){this.options.params=params||{}},getParams:function(){return(this.options.params||{})},setSubmitOpts:function(opts){this.options.submitOpts=opts},getSubmitOpts:function(){return(this.options.submitOpts||{})},setAction:function(action){this.options.action=action;this.element.attr("action",action)},getValue:function(name){var el=$("[name='"+name+"']:input",this.element);if(el.attr("disabled")){return""}return this._getValue(el)},setValue:function(name,value){var el=$("[name='"+name+"']:input",this.element);if(el.attr("disabled")){return""}return this._setValue(el,value)},getValues:function(){var self=this;var values={};$("[name]:input",this.element).each(function(){var el=$(this);if(el.attr("disabled")){return}var name=el.attr("name");var value=self._getValue(el);if(name&&(value||value=="")){if(el.is(":radio,:checkbox")){if(!el.is(":checked")){return}}var preValue=values[name];if(preValue||preValue==""){if($.isArray(preValue)){preValue.push(value)}else{var array=[preValue,value];values[name]=array}}else{values[name]=value}}});return values},setValues:function(values){var self=this;$("[name]:input",this.element).each(function(){var el=$(this);if(el.attr("disabled")){return}var name=el.attr("name");var value=values[name];if($.isArray(value)){if(value.length>0){value=value.shift()}else{values[name]=undefined;value=""}}if(value||value==""){if(el.is(":radio,:checkbox")){var myValue=self._getValue(el);if(myValue==value){el.attr("checked",true)}else{el.attr("checked",false)}return}self._setValue(el,value)}})},_isFFormItem:function(el){if($Component.getFType(el,"value")||($Component.getFType(el,"getValue")&&$Component.getFType(el,"setValue"))){return true}return false},reset:function(){var self=this;$("[name]:input",this.element).each(function(){var el=$(this);if(el.attr("disabled")){return}self._resetValue(el)})},_resetValue:function(el){var result=$Component.tryCall(el,"reset");if(result.hasFunc){return result.result}return el.val("")},_getValue:function(el){var result=$Component.tryCall(el,"value");if(result.hasFunc){return result.result}result=$Component.tryCall(el,"getValue");if(result.hasFunc){return result.result}return el.val()},_setValue:function(el,value){var result=$Component.tryCall(el,"value",value);if(result.hasFunc){return result.result}result=$Component.tryCall(el,"setValue",value);if(result.hasFunc){return result.result}return el.val(value)},submit:function(params,options){var self=this;var op=this.options;var iAsyn=true;var specialParams=params||op.params;var data=op.params||{};data=$.extend({},self.getValues(),(specialParams||{}));var action=op.action||self.element.attr("action");var ajaxOpts=$.extend({},{url:action,data:data,success:function(data,textStatus,jqXHR){var func=op.onSuccess;if(func&&!$.isFunction(func)){func=self._parseFunc(func);if(func){op.onSuccess=func}}if(func){return func.call(self,data,textStatus,jqXHR)}},failure:function(data,textStatus,jqXHR){var func=op.onFailure;if(!$.isFunction(func)){func=self._parseFunc(func);if(func){op.onFailure=func}}if(func){return func.call(self,data,textStatus,jqXHR)}},error:function(jqXHR,textStatus,errorThrown){var func=op.onError;if(!$.isFunction(func)){func=self._parseFunc(func);if(func){op.onError=func}}if(func){return func.call(self,jqXHR,textStatus,errorThrown)}},beforeSend:function(jqXHR,settings){var func=op.beforeSubmit;if(!$.isFunction(func)){func=self._parseFunc(func);if(func){op.beforeSubmit=func}}if(func){return func.call(self,data,jqXHR,settings)}}},(op.submitOpts||options||{}));$.FUI.FAjax.remote(ajaxOpts)},_parseFunc:function(func){var f=null;if($Utils.isString(func)){try{f=eval(func)}catch(e){f=null}}if($.isFunction(f)){return f}else{return null}},destroy:function(){var op=this.options;$.Widget.prototype.destroy.call(this)},doFileUpload:function(params){var options=this.options,UTILS=window["$Utils"];var p=$.extend({},params);p.uploadType=options.uploadType;p.isFileUpload=true;var action=options.action;if(action.indexOf("/")!==0){options.action=UTILS.getContextPath()+"/"+action;this.element.attr("action",options.action)}this._appendDomParams(p);this.element.get(0).submit()},_appendDomParams:function(params){var html=[],options=this.options;var iframeHtml=[];var id=this.options.id;var iframeId=id+"-iframe";var pId=id+"-params";this.element.attr("target",iframeId);var result={};var onSuccess=options.onSuccess;var onFailure=options.onFailure;var onFileUploadEvent=options.onFileUploadEvent;iframeHtml.push('<iframe id="'+iframeId+'" name="'+iframeId+'" style="display:none;" src="javascript:false" ></iframe>');$("body").append(iframeHtml.join(""));var iframeOnload=function(){var iframe=document.getElementById(iframeId);var iframeEl=$(iframe);try{doc=iframe.contentWindow.document||iframe.contentDocument||WINDOW.frames[id].document;if(doc){if(doc.body){if(/textarea/i.test((firstChild=doc.body.firstChild||{}).tagName)){result=firstChild.value}else{result=doc.body.innerHTML}}}}catch(e){}result=eval("("+result+")");onFileUploadEvent&&onFileUploadEvent(result);iframeEl.unbind();setTimeout(function(){iframeEl.remove()},100);$I(pId).remove()};var iframe=document.getElementById(iframeId);if(iframe.attachEvent){iframe.attachEvent("onload",function(){iframeOnload()})}else{iframe.onload=function(){iframeOnload()}}html.push('<div id="'+pId+'" style="display:none">');for(var p in params){html.push('<input type="hidden" name="'+p+'" value="'+params[p]+'">')}html.push("</div>");this.element.append(html.join(""))}})})(jQuery);(function(a){a.registerWidgetEvent("");a.widget("FUI.FEnterSwitch",{options:{},_create:function(){this.options.id=this.element.attr("id")},_init:function(){this._bindEvent()},_bindEvent:function(){var b=this;b._getAllEls().keyup(function(o){if(o.which==13||o.which==108){var m=500;var g=b._getAllVisible().get();var c=a.inArray(this,g);var q=parseInt(this.tabIndex||0)*m+c;var k=10000000;var p=-1;var h=q;var l=c;for(var j=0;j<g.length;j++){var n=parseInt(g[j].tabIndex||0)*m+j;if(n<h){h=n;l=j}if(c!=j){var f=n-q;if(f==1){p=j;break}else{if(f>0&&f<k){k=f;p=j}}}}var d=null;if(p!=-1){d=g[p]}else{d=g[l]}b._focusEl(a(d));return false}})},_focusEl:function(b){var c=b;setTimeout(function(){c.focus();if(c.is("input:text")){c.select()}},0)},_getAllEls:function(){return a(":input:not('textarea')",this.element)},_getAllVisible:function(){return a(":input:enabled:visible",this.element)},destroy:function(){var b=this.options;a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){a.widget("FUI.FPopupBox",{options:{width:null,height:null,attach:null,direction:"down,up",offset:{top:0,left:0},position:"absolute",collision:"fit",show:null,hide:null,_objPopup:null,_isValid:false,_curOptions:null},_create:function(){var b=this.element.attr("id");var c=this.options;c.id=b;c._objPopup=$I(b);if(c._objPopup.size()!=0){c._isValid=true}},_init:function(){},destroy:function(){var c=this.options;this.options._curOptions=null;for(var b in c){c[b]=null}},show:function(h,k,c){if(!this.options._isValid){return}h=h||{};var g=this._uniformOption(h,c);this.options._curOptions=g;g.show=a.extend({},(h.show||{}));g.show.callback=k||(h.show||{}).callback;var e=this._parseShowMode(g);var l=false;if(e==="ATTACH"){var j=g.attach;if(!$Utils.isJQueryObj(g.attach)){j=a(g.attach)}if(j.size()==0){return false}var d=j.offset();var i=this._calAttachSize(j);var b=this._calContainerBox(g.container);var f=this._calAttachMode(d,i,g.size,g.direction,g.offset,b,g.collision);l=this._showAbsolute(f)}else{if(e==="ABSOLUTE"){var d={left:g.position.left,top:g.position.top};var i={height:0,width:0};var b=this._calContainerBox(g.container);if(d.left=="center"){d.left=(b.minX+b.maxX-g.size.width)/2}if(d.top=="center"){d.top=(b.minY+b.maxY-g.size.height)/2}var f=this._calAttachMode(d,i,g.size,g.direction,g.offset,b,g.collision);l=this._showAbsolute(f)}else{if(e==="FIXED"){l=this._calFixedMode(g.size,g.offset)}else{l=this._calOtherMode(g)}}}return l},_calAttachMode:function(c,k,q,m,f,b,n){f=f||{left:0,top:0};m=m||["down","up"];if(m.length==0){m=["down","up","right","upright","left","upleft"]}var h=null;var e=null;var l=null;for(var g=0;g<m.length;g++){var d=m[g].toLowerCase();var p=this["_try"+d];if(a.isFunction(p)){if(e==null){e=d}var o=p.call(this,c,k,q,b);if(o===false){continue}else{h=d;l=o;break}}}if(h==null){if(e!=null){h=e;l=this["_cal"+e](c,k,q,b,n);if(n=="fit"){o=this._adjustPos(l,q,b)}}else{throw new Error("FPopupBox: no valid direction")}}var o=null;if(l!=null){var j=this._parseRealOffset(f,h);o=this._calRealOffset(l,j)}return o},_adjustPos:function(h,c,d){var b=h.left;var g=h.top;var f=b+c.width;var e=g+c.height;if(b<d.minX){h.left=d.minX}else{if(f>d.maxX){h.left=d.maxX-c.width}}if(g<d.minY){h.top=d.minY}else{if(e>d.maxY){h.top=d.maxY-c.height}}return h},_calRealOffset:function(b,d){var c={};c.left=b.left+d.left;c.top=b.top+d.top;return c},_calContainerSize:function(c){var b={};b.width=c.width();b.height=c.height();return b},_calContainerBox:function(c){var b=a(document);var h=a(window);if(c==null||!$Utils.isJQueryObj(c)||c.size()==0){c=b}var i={};if(c.get(0).window==window){var l=b.scrollLeft();var k=b.scrollTop();i.minX=l;i.minY=k;i.maxX=l+h.outerWidth();i.maxY=k+h.outerHeight()}else{if(c.get(0)==document){var j=b.width();var n=b.height();var d=h.width();var e=h.height();i.minX=0;i.minY=0;i.maxX=j<d?d:j;i.maxY=n<e?e:n}else{var m=c.width();var g=c.height();var f=c.offset()||{left:0,top:0};i.minX=f.left;i.minY=f.top;i.maxX=f.left+c.outerWidth();i.maxY=f.top+c.outerHeight()}}return i},_parseRealOffset:function(d,c){var b=this["_parseOffset"+c];if(a.isFunction(b)){return b.call(this,d)}return d},_parseOffsetdown:function(b){return b},_parseOffsetup:function(c){var b={};b.left=c.left;b.top=0-c.top;return b},_parseOffsetright:function(b){return b},_parseOffsetleft:function(c){var b={};b.left=0-c.left;b.top=c.top;return b},_trydown:function(g,b,c,d){var e=g.top+b.height+c.height;if(e>d.maxY){return false}var f=g.left+c.width;if(f>d.maxX){return false}return this._caldown(g,b,c)},_caldown:function(d,b,c){return{top:d.top+b.height,left:d.left}},_tryup:function(g,b,c,d){var f=g.top-c.height;if(f<d.minY){return false}var e=g.left+b.width+c.width;if(e>d.maxX){return false}return this._calup(g,b,c)},_calup:function(d,b,c){return{top:d.top-c.height,left:d.left}},_tryright:function(g,b,c,d){var e=g.top+c.height;if(e>d.maxY){return false}var f=g.left+b.width+c.width;if(f>d.maxX){return false}return this._calright(g,b,c)},_calright:function(d,b,c){return{top:d.top,left:d.left+b.width}},_tryleft:function(g,c,d,e){var f=g.top+d.height;if(f>e.maxY){return false}var b=g.left-d.width;if(b<e.minX){return false}return this._calleft(g,c,d)},_calleft:function(d,b,c){return{top:d.top,left:d.left-c.width}},_tryupleft:function(g,c,d,e){var f=g.top-(d.height-c.height);if(f<e.minY){return false}var b=g.left-d.width;if(b<e.minX){return false}return this._callupleft(g,c,d)},_callupleft:function(d,b,c){return{top:(d.top-(c.height-b.height)),left:d.left-c.width}},_tryupright:function(g,b,c,d){var f=g.top-(c.height-b.height);if(f<d.minY){return false}var e=g.left+b.width+c.width;if(e>d.maxX){return false}return this._callupright(g,b,c)},_callupright:function(d,b,c){return{top:(d.top-(c.height-b.height)),left:d.left+b.width}},_calAttachSize:function(c){var b={};b.width=c.outerWidth(true);b.height=c.outerHeight(true);return b},_showAbsolute:function(b){return this._showAt(b,"absolute")},_calFixedMode:function(b,c){return this._showAt(c,"fixed")},_showAt:function(b,c){var d=this.options;c=c||"absolute";d._objPopup.css("position",c);if(b.left!=null&&!isNaN(b.left)){d._objPopup.css("left",b.left+"px")}else{d._objPopup.css("left","")}if(b.right!=null&&!isNaN(b.right)){d._objPopup.css("right",b.right+"px")}else{d._objPopup.css("right","")}if(b.top!=null&&!isNaN(b.top)){d._objPopup.css("top",b.top+"px")}else{d._objPopup.css("top","")}if(b.bottom!=null&&!isNaN(b.bottom)){d._objPopup.css("bottom",b.bottom+"px")}else{d._objPopup.css("bottom","")}var g=d.zIndex||this._getZIndex();d._objPopup.css("z-index",g);var h=this.options._curOptions.show;var i=null;if(h!=null&&typeof h==="object"){i=h.callback;var k=h.effect;var j=h.styles;if(k!=null){if(this._doEffectAnimate(d._objPopup,k,h)===true){return true}}else{if(j!=null){if(this._doStylesAnimate(d._objPopup,h)===true){return true}}}}d._objPopup.css("display","block");if(a.isFunction(i)){try{i.call(this,d)}catch(f){alert(f)}}return true},_doEffectAnimate:function(c,b,e){var d=c[b];if(d!=null){c.stop(true);if(b=="fadeTo"){c[b](e.duration,e.opacity,e.callback)}else{c[b](e.duration,e.callback)}return true}},_doStylesAnimate:function(b,c){b.stop(true);b.animate(c.styles,c.options);return true},_getZIndex:function(){return WinIndex.getInstance().getIndex()},_calOtherMode:function(f){var b=f.position;if(b==="center"){var e=this._calContainerSize(a(window));var c=f.size;var d={};d.left=(e.width-c.width)/2;if(d.left<0){d.left=0}d.top=(e.height-c.height)/2;if(d.top<0){d.top=0}this._showAt(d,"fixed")}},_parseShowMode:function(c){if(c.attach!=null&&a.trim(c.attach).length!=0){return"ATTACH"}if(c.position!=null){var b=c.position;if(typeof b=="object"&&(b.left!=null||b.top!=null||b.bottom!=null||b.right!=null)){return"ABSOLUTE"}}if(c.position==="fixed"){return"FIXED"}return c.position},_uniformOption:function(d,c){d=d||{};var b=null;if(c===true){b=a.extend(false,{},d)}else{b=a.extend(false,{},d);b=$Utils.applyIf(b,this.options)}b.direction=this._parseDirection(b.direction);b.offset=this._parseOffset(b.offset);b.position=this._parsePosition(b.position);b.size=this._calPopupBoxSize(b);b.container=this._calContainer(b);return b},_calContainer:function(c){var b=c.container||a(window);if($Utils.isString(b)||!$Utils.isJQueryObj(b)){b=a(b)}return b},_calPopupBoxSize:function(f){var e=this.options._objPopup;var c={};var d=parseInt(f.width||"");var b=parseInt(f.height||"");if(!isNaN(d)){c.width=d}else{c.width=e.outerWidth(true)}if(!isNaN(b)){c.height=b}else{c.height=e.outerHeight(true)}return c},_parseDirection:function(b){if(b!=null){if(a.isArray(b)){return b}else{return b.split(",")}}return null},_parseOffset:function(c){var b={left:c.left,top:c.top};if(c!=null){if(c.left!=null){b.left=parseInt(c.left);if(isNaN(b.left)){b.left=0}}else{b.left=0}if(c.top!=null&&c.top){b.top=parseInt(c.top);if(isNaN(b.top)){b.top=0}}else{b.top=0}return b}return null},_parsePosition:function(c){var b={left:c.left,top:c.top};if(c!=null){if(c.left!=null&&c.left!="center"){b.left=parseInt(c.left);if(isNaN(b.left)){b.left=0}}if(c.top!=null&&c.top!="center"){b.top=parseInt(c.top);if(isNaN(b.top)){b.top=0}}return b}return null},hide:function(h,g,e){if(!this.options._isValid){return}var f=false;var b=null;h=h||{};if(e===true){b=a.extend(false,{},h)}else{b=a.extend(false,{},h);b=$Utils.applyIf(b,this.options._curOptions)}b=b.hide||{};g=b.callback=g||b.callback;if(b!=null&&typeof b==="object"){var c=b.effect;var d=b.styles;if(c!=null){if(this._doEffectAnimate(this.options._objPopup,c,b)===true){f=true}}else{if(d!=null){if(this._doStylesAnimate(this.options._objPopup,b)===true){f=true}}}}if(!f){this.options._objPopup.hide();if(a.isFunction(g)){g.call(this,h)}}}})})(jQuery);(function($){$.registerWidgetEvent("onShow,onHide");$.widget("FUI.FMenu",{options:{id:null,attach:null,staticData:null,onClick:null,beforeShow:null,onShow:null,onHide:null,beforeHide:null,_parentMenuId:null,_popupBox:null,_objFocusItem:null,_objActiveItem:null,_idActiveSubMenu:null,_isShow:false,_isNewStaticData:false,_staticMenuIds:[],_curOptions:null},_create:function(){var ID=this.element.attr("id");this.options.id=ID;var staticData=this.options.staticData;if(staticData!=null){this.options._isNewStaticData=true}},_tryExcuteFunc:function(obj,func,args){var EMPTY_FUNC=function(){};var f=func||EMPTY_FUNC;if(!$.isFunction(func)){try{f=eval(func);if(!$.isFunction(f)){return}}catch(e){return}}args=args||[];return f.apply(obj,args)},show:function(op){if(this.options._isShow===true){this.hide()}var self=this;var selfEl=this.element;op=op||{};self.options._curOptions=op=self._processOptions(op);self._tryExcuteFunc(self,op.beforeShow,[op]);if(self.options._isNewStaticData){var idStack=[];var menuStack=[];var funcStack=[];var html=self._tryParseStaticData(self.options.id,op.staticData,idStack,menuStack,funcStack);if(html!=null&&html.length!=0){self._destroySubMenus();self.options._staticMenuIds=idStack;selfEl.html(html);selfEl.data("init.FMenu.FUI",false);if(menuStack.length!=0){$("body").append(menuStack.join(""));for(var i=0;i<funcStack.length;i++){funcStack[i]()}}}self.options._isNewStaticData=false}var hasInit=selfEl.data("init.FMenu.FUI");if(hasInit!==true){this._initMenu(op);selfEl.data("init.FMenu.FUI",true)}this.options._popupBox.FPopupBox("show",op);this.options._isShow=true;setTimeout(function(){var eventType="click.FMenu-"+self.options.id;$(document).one(eventType,function(){self.hide()})},0);self._tryExcuteFunc(self,op.onShow,[op])},_tryParseStaticData:function(menuId,staticData,idStack,menuStack,funcStack){if(staticData!=null){idStack=idStack||[];menuStack=menuStack||[];funcStack=funcStack||[];var jsonObj=staticData;if($Utils.isString(jsonObj)){try{jsonObj=eval(jsonObj)}catch(e){jsonObj=""}}if(!$Utils.isArray(jsonObj)){return null}var ID=menuId;var html=[];html.push("<li id='"+ID+"-icon-seperator' class='f-menu-icon-seperator'></li>");for(var i=0;i<jsonObj.length;i++){var item=jsonObj[i];item.id=item.id||(ID+"-gen-item-"+i);var subMenuData=item.children||[];item.subMenuId=null;if($Utils.isArray(subMenuData)&&subMenuData.length>0){item.subMenuId=ID+"-gen-subMenu-"+i;idStack.push(item.subMenuId);this._registerSubMenu(item.subMenuId,subMenuData,menuStack,funcStack)}this._generateMenuItemHTML(item,html)}return html.join("")}return null},_generateMenuItemHTML:function(item,html){var id=item.id;var text=(item.text||" ").length==0?(" "):item.text;var iconCls=item.iconCls||"";var disable=((item.disable||"false")=="true")?true:false;var onClick=item.onClick||"";var url=item.url||"";var title=item.title||"";var checked=item.checked;var checkedClass="";if(checked!=null){checked=checked.toString();if(checked=="true"){checkedClass="f-state-checked"}else{if(checked=="false"){checkedClass="f-state-unchecked"}}}if(text=="-"){html.push("<li class='f-menu-item f-menu-item-seperator'>&nbsp;</li>")}else{html.push("<li class='f-menu-item'>");html.push("<a id='"+id+"'");html.push(" href='#"+(item.subMenuId!=null?item.subMenuId:"")+"'");html.push(" clickEvent='"+onClick+"'");html.push(" url='"+url+"'");if(title){html.push(' title="'+title.replace('"',"'")+'"')}html.push(" class='f-corner-all "+(disable?"f-state-disabled":"")+" "+checkedClass+"'>");if(iconCls.length!=0){html.push("<span class='f-icon "+iconCls+"'></span>")}if(item.subMenuId!=null){html.push("<span class='f-menu-icon f-icon f-icon-item-arrow'></span>")}html.push(text);html.push("</a></li>")}},_registerSubMenu:function(subMenuId,subMenuData,menuStack,funcStack){var html="<ul id='"+subMenuId+"' class='f-menu f-menu-icons f-widget'></ul>";menuStack.push(html);funcStack.push(function(){$I(subMenuId).FMenu({staticData:subMenuData})})},_processOptions:function(op){if(typeof op.position=="object"){op.attach=""}op=$.extend({},this.options,op);var attach=op.attach;if(attach!=null&&$.trim(attach).length!=0){op.direction=op.direction||["down","up"]}op.direction=op.direction||"all";if(op.direction=="all"){op.direction=["right","left","upright","upleft","down","up"]}return op},_initMenu:function(op){var self=this;var selfEl=self.element;var popupBox=self._getPopupBox();$("li.f-menu-item > a",selfEl).each(function(){self._bindItemEvent($(this),op)});self._bindEvent()},_bindEvent:function(){},_adjustMenuWidth:function(minWidth,maxWidth){var w=this.element.width();var resultW=w;var min=parseInt(minWidth);var max=parseInt(maxWidth);if(!isNaN(min)){if(min<50){min=50}resultW=w<min?min:w}else{if(!isNaN(max)&&w>max){resultW=max}}if(resultW!=w){this.element.width(resultW)}return resultW},_bindItemEvent:function(el,op){var aEl=el;var self=this;var liEl=aEl.parent();var selfOp=this.options;aEl.hover(function(){if(aEl.hasClass("f-state-disabled")){return}if(self.options._objActiveItem!=null&&self.options._objActiveItem.attr("id")==aEl.attr("id")){return}self._tryHideSubMenu();aEl.addClass("f-state-focus");selfOp._objFocusItem=aEl;self._tryShowSubMenu(aEl,op)},function(){if(aEl.hasClass("f-state-disabled")){return}aEl.removeClass("f-state-focus");selfOp._objFocusItem=null});var ME=this;aEl.click(function(e){if(aEl.hasClass("f-state-disabled")){return false}var item={id:aEl.attr("id"),url:aEl.attr("url"),menuId:ME.options.id,parentMenuId:(ME.options._curOptions||{})["_parentMenuId"],text:aEl.text()};if(ME._triggerItemClick(aEl.attr("clickEvent"),item,e)!==false){ME.triggerMenuClick(item,e)}$(document).trigger("click.FMenu-"+ME.getRootMenuId());e.stopImmediatePropagation();return false});$("> span.f-icon-item-arrow",aEl).hover(function(){if(aEl.hasClass("f-state-disabled")){return}self._tryShowSubMenu(aEl,op,true)})},triggerMenuClick:function(item,event){var self=this;var selfEl=self.element;var result=self._tryExcuteFunc(self,self.options._curOptions.onClick,[item,event]);if(result!==false){var parentId=self.options._curOptions._parentMenuId;if(parentId!=null){$I(parentId).FMenu("triggerMenuClick",item,event)}}},getParentMenuId:function(){return(this.options._curOptions._parentMenuId)},getRootMenuId:function(){var self=this;var parentId=self.getParentMenuId();if(parentId){return $I(parentId).FMenu("getRootMenuId")}else{return self.options.id}},_triggerItemClick:function(clickEvent,item,event){var eventFunc=$.trim(clickEvent||"");if(eventFunc.length==0){return}var func=null;try{func=eval(eventFunc)}catch(e){}if($.isFunction(func)){return func.call(this,item,event)}},_tryShowSubMenu:function(aEl,op,immediate){var hrefStr=$.trim(aEl.attr("href")||"");if(hrefStr.length!=0){var subMenuId=hrefStr.lastIndexOf("#");if(subMenuId==-1&&subMenuI+1>=hrefStr.length){return}subMenuId=hrefStr.substring(subMenuId+1);if(subMenuId.length==0){return false}var subMenuEl=$I(subMenuId);if(subMenuEl.size()==0){return false}var self=this;var currentActiveId=aEl.attr("id")||"";var ops=op;var showSubMenu=function(){if(self.options._idActiveSubMenu){return}var currentFocusId=null;if(self.options._objFocusItem!=null){currentFocusId=self.options._objFocusItem.attr("id")}if(currentFocusId!=currentActiveId){return}self.options._objActiveItem=aEl;self.options._idActiveSubMenu=subMenuId;aEl.addClass("f-state-active").removeClass("f-state-focus");var initOption={};initOption._parentMenuId=self.options.id;initOption.attach=aEl;initOption.direction="all";initOption.container=ops.container;initOption.collision=ops.collision;subMenuEl.FMenu("show",initOption)};if(immediate===true){showSubMenu.call(this)}else{setTimeout(showSubMenu,300)}}},_tryHideSubMenu:function(){var options=this.options;if(options._idActiveSubMenu!=null){$I(options._idActiveSubMenu).FMenu("hide");if(options._objActiveItem!=null){options._objActiveItem.removeClass("f-state-active")}options._idActiveSubMenu=null;options._objActiveItem=null}},_getPopupBox:function(){var op=this.options;if(op._popupBox==null){op._popupBox=this.element.FPopupBox({direction:"right,left"})}return op._popupBox},hide:function(){var hasInit=this.element.data("init.FMenu.FUI");if(hasInit===true&&this.options._isShow===true){var self=this;self._tryExcuteFunc(self,self.options._curOptions.beforeHide,[]);self.options._popupBox.FPopupBox("hide");self.options._isShow=false;self.options._parentMenuId=null;$(document).unbind(".FMenu-"+self.options.id);self._tryHideSubMenu();self._tryExcuteFunc(self,self.options._curOptions.onHide,[])}},disableItem:function(itemId){if($Utils.isString(itemId)){var itemEl=$I(itemId);if(itemEl.size()!=null){if(itemEl.hasClass("f-state-active")){this._tryHideSubMenu()}itemEl.addClass("f-state-disabled").removeClass("f-state-focus")}}},setStaticData:function(staticData){if(staticData!=null){this.options.staticData=staticData;this.options._isNewStaticData=true}},enableItem:function(itemId){$I(itemId).removeClass("f-state-disabled")},_destroySubMenus:function(){var self=this;var op=this.options;var subIds=op._staticMenuIds;for(var i=0;i<subIds.length;i++){$I(subIds[i]).remove()}op._staticMenuIds=[]},destroy:function(){var op=this.options;op._parentMenuId=null;if(op._popupBox!=null){op._popupBox.FPopupBox("destroy");op._popupBox=null}op._isShow=false;op._objFocusItem=null;op._objActiveItem=null;op._idActiveSubMenu=null;op._isNewStaticData=false;op._curOptions=null;this._destroySubMenus();$(document).unbind(".FMenu-"+this.options.id);$.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){a.registerWidgetEvent("onValueChanged");a.widget("FUI.FTextField",{options:{disabled:null,readonly:null,hasHiddenField:false,_objInput:null,_objHidden:null,_objWrapper:null,_objBox:null},_create:function(){this.options.id=this.element.attr("id")},_init:function(){var b=this},getBoxEl:function(){var b=this.options;b._objBox=b._objBox||this.getWrapperEl().parent();return b._objBox},getInputEl:function(){var b=this.options;if(b._objInput){return b._objInput}else{if(b.hasHiddenField){b._objInput=this.element.next()}else{b._objInput=this.element}return b._objInput}},getHiddenEl:function(){var b=this.options;if(b._objHidden){return b._objHidden}else{if(b.hasHiddenField){b._objHidden=this.element}else{b._objHidden=$I("___NOT_EXSITED___")}return b._objHidden}},getWrapperEl:function(){var b=this.options;b._objWrapper=b._objWrapper||this.element.parent();return b._objWrapper},hasHiddenField:function(){return(this.getHiddenEl().size()!=0)},displayValue:function(b,c){var d=this.getInputEl();if(b||b==""){d.val(b);if(c!==true){d.trigger("onValueChanged")}}return d.val()},value:function(d,e){var c=this;var f=this.options;if(c.hasHiddenField()){var b=this.getHiddenEl();if(d||d==""){b.val(d);if(e!==true){b.trigger("onValueChanged",d)}}return b.val()}else{return c.displayValue(d)}},setValue:function(b,c){return this.value(b,c)},getValue:function(){return this.value()},name:function(e){var c=this;if(c.hasHiddenField()){var b=c.getHiddenEl();if(e||e==""){b.attr("name",e)}return b.attr("name")}else{var d=c.getInputEl();if(e||e==""){d.attr("name",e)}return d.attr("name")}},reset:function(){var b=this;if(b.hasHiddenField()){b.displayValue("");b.value("")}else{b.displayValue("")}},disabled:function(e){var g=this.options;if(g.disabled==null){g.disabled=this.getBoxEl().hasClass("f-state-disabled")}var d=this.hasHiddenField();var c=this.getHiddenEl();var f=this.getInputEl();var b=this.getBoxEl();if(arguments.length!=0){if(e===true){b.removeClass("f-state-focus f-state-hover").addClass("f-state-disabled");f.attr("disabled",true);if(d){c.attr("disabled",true)}}else{b.removeClass("f-state-focus f-state-hover f-state-disabled");f.attr("disabled",false);if(d){c.attr("disabled",true)}}g.disabled=(f.attr("disabled")=="disabled")}return g.disabled},setDisabled:function(b){return this.disabled(b)},isDisabled:function(){return this.disabled()},readonly:function(e){var g=this.options;if(g.readonly==null){g.readonly=this.getBoxEl().hasClass("f-state-readonly")}var d=this.hasHiddenField();var c=this.getHiddenEl();var f=this.getInputEl();var b=this.getBoxEl();if(arguments.length!=0){if(e===true){b.removeClass("f-state-focus f-state-hover").addClass("f-state-readonly");f.attr("readonly",true);if(d){c.attr("readonly",true)}}else{b.removeClass("f-state-focus f-state-hover f-state-readonly");f.attr("readonly",false);if(d){c.attr("readonly",true)}}g.readonly=(f.attr("readonly")=="readonly")}return g.readonly},setReadonly:function(b){return this.readonly(b)},isReadonly:function(){return this.readonly()},destroy:function(){var b=this.options;this.getInputEl().unbind();this.getBoxEl().unbind();a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){a.registerWidgetEvent("");a.widget("FUI.FPopupMessage",{options:{title:"",timeout:null,closable:null,offset:null,container:null,_popupMsgs:null},_create:function(){this.options.id=this.element.attr("id")},_init:function(){},show:function(d){var b=this;var g=this.element;if(b.options._popupMsgs==null){b.options._popupMsgs=$Utils.IndexMap()}var f=b._processOptions(d);if(!g.hasClass("f-popupMessage")){f.id=(d||{}).id;var c=b._genPopupMessageHTML(f);g.append(c);b.options._popupMsgs.put(f.id,f.id)}else{f.id=g.attr("id")}f._element=$I(f.id);if(f._element.size()==0){return}var e=f._element.data("_option");if(e){b._destroyPopup(e.id,e._element)}f._element.data("_option",f);b._initPopup(f);b._bindEvent(f);f._element.FPopupBox("show",f,function(){f._show=true})},_initPopup:function(c){var b=c._element;b.FPopupBox({});c._show=false},_bindEvent:function(h){var g=h.id;var b=this;var f=h._element;$I(g+"-icon").hover(function(){a(this).addClass("f-tool-closethick").removeClass("f-tool-close")},function(){a(this).removeClass("f-tool-closethick").addClass("f-tool-close")}).click(function(){if(h.closable){b.hide(h)}});var d=parseInt(h.timeout||"");if(!isNaN(d)&&d>0){h._timeReset=0;if(d<1000){d=1000}var c=++h._timeReset;var e=a.proxy(b,"_tryTimeoutClose",c,h);setTimeout(e,d);f.hover(function(){h._timeReset++},function(){var i=++h._timeReset;var j=a.proxy(b,"_tryTimeoutClose",i,h);setTimeout(j,d)})}h._changed=0;a(window).bind("scroll.FPopupMessage-"+g,function(){if(!h._show){return}h._changed++;var j=h._changed;var i=a.proxy(b,"_scrollFunc",j,h);setTimeout(i,500)}).bind("resize.FPopupMessage-"+g,function(){if(!h._show){return}h._changed++;var j=h._changed;var i=a.proxy(b,"_scrollFunc",j,h);setTimeout(i,100)})},_tryTimeoutClose:function(b,c){if(c._show&&c._timeReset===b){this.hide(c)}},_scrollFunc:function(c,b){if(b._show&&c==b._changed){b._element.FPopupBox("show",b)}},_processOptions:function(c){var b=a.extend({},this.options,(c||{}));b.position=b.position||{left:500000,top:500000};b.collision="fit";b.container=b.container||window;b.offset=b.offset||{left:-5,top:-5};b.show=b.show||{effect:"fadeIn",duration:"fast"};b.hide=b.hide||{effect:"fadeOut",duration:"fast"};return b},_genPopupMessageHTML:function(i){var b=[];var h=i.id||$Utils.genId("f-popupMessage");i.id=h;var f=(i.title||"").toString();var g="";if(f.length==0){g="style='display:none;'"}var d="";if(i.closable==false||i.closable=="false"){d="style='display:none;'";i.closable=false}else{i.closable=true}var e=i.content||"";var c="	    	<div id='{0}' class='f-popupMessage f-widget f-corner-all'>	    	  <div id='{0}-header' {2} class='f-popupMessage-header'> 	    	    {1} 	    	    <span id='{0}-icon' {3} class='f-popupMessage-icon f-tool f-tool-close'>&nbsp;</span> 	    	  </div> 	    	  <div id='{0}-body' class='f-popupMessage-body'> 	    	  	{4}	    	  </div> 	    	</div>";return $Utils.format(c,h,f,g,d,e)},setContent:function(b){if(this.element.hasClass("f-popupMessage")){var c=this.options.id;$I(c+"-body").html(b)}},hide:function(g,f){if(this.element.hasClass("f-popupMessage")){var e=this.element.data("_option");if(e&&e._show){this.element.FPopupBox("hide",g);this._destroyPopup(e.id,e._element);e._show=false}}else{var c=0;var d=this.options._popupMsgs;if(this.options._popupMsgs){c=d.size()}if($Utils.isString(g)){if(c>0&&d.get(g)!=null){this._hideGenPopup(g,f,d)}}else{if(typeof g=="object"&&g._element!=null){this._hideGenPopup(g.id,f,d)}else{if(c!=0){for(var b=0;b<c;b++){this._hideGenPopup(d.element(d.size()-1).key,g,d)}}}}}},_hideGenPopup:function(g,e,d){var c=$I(g);var b=this;var f=c.data("_option");if(f){c.FPopupBox("hide",e,function(){b._destroyPopup(g,c);f._show=false;c.remove()});d.remove(g)}},_destroyPopup:function(d,b){if(!d||!b){return}var c=b.data("_option");if(c){c._show=false;b.removeData("_option");b.unbind()}$I(d+"-icon").unbind();a(window).unbind(".FPopupMessage-"+d)},destroy:function(){var g=this.options;if(this.element.hasClass("f-popupMessage")){this._destroyPopup(g.id,this.element)}else{var e=g._popupMsgs;if(e){var c=e.size();for(var b=0;b<c;b++){var f=e.element(b).key;var d=$I(f);this._destroyPopup(f,d)}}}g._popupMsgs.destroy();g._popupMsgs=null;a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){a.registerWidgetEvent("");a.widget("FUI.FMessage",{options:{onBntClick:null,onCloseClick:null},_create:function(){this.options.id=this.element.attr("id")},_init:function(){var b=this;var c=this.element;if(!$Component.hasFType(c,"FPopupBox")){c.FPopupBox({position:{left:"center",top:"center"},zIndex:20001})}b._bindEvent()},destroy:function(){var b=this.options;if(b._dragable){b._dragable.stop();b._dragable.destroy();b._dragable=null}a.Widget.prototype.destroy.call(this)},_bindEvent:function(){var d=this.options;var b=this;var c=this.element;b._bindBntsEvent();b._bindCloseBntEvent();b._bindHeaderEvent()},_bindBntsEvent:function(){var d=this;var g=[d._getOkEl(),d._getYesEl(),d._getNoEl(),d._getCancelEl()];var c=["ok","yes","no","cancel"];for(var e=0;e<g.length;e++){var b=c[e];var f=a.proxy(d.options,"onBntClick",b);g[e].FSimpleButton({onClick:f})}},_bindCloseBntEvent:function(){var b=this;var c=b._getCloseIconEl();c.hover(function(){a(this).addClass("f-tool-closethick").removeClass("f-tool-close")},function(){a(this).removeClass("f-tool-closethick").addClass("f-tool-close")}).mousedown(function(d){d.stopPropagation()}).click(function(){b.options.onCloseClick()})},_bindHeaderEvent:function(){var b=this;var e=this.options;var d=this.element;var c=b._getHeaderEl();e._dragable=new a.Dragable(e.id+"-header",e.id)},_getHeaderEl:function(){var d=this.options;var b=d._headerEl;if(!b){var c=this.element;d._headerEl=b=$I(d.id+"-header")}return b},_getCloseIconEl:function(){var c=this.options;var b=c._closeEl;if(!b){c._closeEl=b=$I(c.id+"-closeIcon")}return b},_getOkEl:function(){var c=this.options;var b=c._okBntEl;if(!b){b=c._okBntEl=$I(c.id+"-okBnt")}return b},_getCancelEl:function(){var c=this.options;var b=c._cancelBntEl;if(!b){b=c._cancelBntEl=$I(c.id+"-cancelBnt")}return b},_getYesEl:function(){var c=this.options;var b=c._yesBntEl;if(!b){b=c._yesBntEl=$I(c.id+"-yesBnt")}return b},_getNoEl:function(){var c=this.options;var b=c._noBntEl;if(!b){b=c._noBntEl=$I(c.id+"-noBnt")}return b},show:function(b){this.element.FPopupBox("show",b)},hide:function(b){this.element.FPopupBox("hide",b)}});a.FMessage={_status:{type:"",choise:"",text:""},_cmdQueue:[],_isShow:false,_options:{},OK:1,OKCANCEL:4097,YES:16,NO:256,YESNO:272,CANCEL:4096,YESNOCANCEL:4368,INFO:"f-message-icon-info",QUESTION:"f-message-icon-question",WARNING:"f-message-icon-warning",ERROR:"f-message-icon-error",alert:function(d,c,e){var b=this;b.show({title:d,msg:c,callback:e,buttons:b.OK,width:"250px"})},confirm:function(d,c,e){var b=this;b.show({title:d,msg:c,callback:e,buttons:b.YESNO,icon:b.QUESTION,width:"280px"})},prompt:function(d,c,e){var b=this;b.show({title:d,msg:c,callback:e,buttons:b.OKCANCEL,prompt:true,width:"250px"})},show:function(h){var c=this;var d=c._getMessageEl();if(c._isShow){c._cmdQueue.push(h);return}c._isShow=true;var g=h.title||"&nbsp;";c._getElement("title").html(g);var f=c._resetButtons(h.buttons,h.buttonTexts);var e="345px";if(h.width){e=h.width}else{if(f==1){e="250px"}else{if(f==2){e="280px"}else{if(f>=3){e="345px"}}}}d.width(e);c._resetBody(h,e);var b=c._getElement("closeIcon");if(h.closeIcon===false){b.css("display","none")}else{b.css("display","block")}c._showMask();d.FMessage("show",{show:{callback:function(){a(document).bind("keydown.FMessage",function(i){if(i.which==27){c._bntClick("cancel")}})}},hide:{callback:function(){c._hideMask();a(document).unbind("keydown.FMessage");c._status.text=c._getElement("promptInput").val();if(a.isFunction(h.callback)){h.callback(c._status.choise,c._status.text)}c._isShow=false;c._processQueue()}}})},_processQueue:function(){var c=this;var b=c._cmdQueue;if(b.length==0){return}c.show(b.shift())},_showMask:function(){a("body").doMask("please choose!",{showImg:false})},_hideMask:function(){a("body").doUnMask()},hide:function(){var b=this;var c=b._getMessageEl();c.FMessage("hide")},_resetBody:function(e,b){b=parseInt(b);var l=this;var f=e.icon;var d=e.msg||"&nbsp;";var c=l._getElement("content");var i=l._getElement("iconContent");var h=l._getElement("prompt");if(e.prompt==true){c.css("display","none");h.css("display","block");i.css("display","none");l._getElement("promptMsg").html(d);l._getElement("promptInput").val("")}else{if(f){var k=[l.INFO,l.QUESTION,l.WARNING,l.ERROR];c.css("display","none");h.css("display","none");i.css("display","block");var j=l._getElement("tipIcon");j.removeClass(k.join(" "));j.addClass(f);var g=l._getElement("tipContent");if(!isNaN(b)){g.width(b-20-50)}g.html(d)}else{c.css("display","block");h.css("display","none");i.css("display","none");l._getElement("content").html(d)}}},_resetButtons:function(e,b){var c=this;e=e||0;if(e==0){var d=c._getElement("buttonGroup");d.css("display","none");return 0}else{b=b||{};c._getElement("buttonGroup").css("display","block");var f=0;a.each(["ok","yes","no","cancel"],function(h,g){var j=c._getElement(g+"Bnt-wrapper");if(e&c[g.toUpperCase()]){if(b[g]){c._getElement(g+"Bnt").text(b[g])}j.parent().show();f++}else{j.parent().hide()}});return f}},_getElement:function(b){var d=this._options;var c=d["_obj"+b+"El"];if(c){return c}else{c=d["_obj"+b+"El"]=$I(d.id+"-"+b)}return c},_bntClick:function(c){var b=this;b._status.choise=c;b.hide()},_getMessageEl:function(){var b=this;var e=b._options;if(e.id){return $I(e.id)}else{var d=$Utils.genId("f-message");var c=b._generateHtml({id:d,title:("FMessage"+$Utils.UID)});a("body").append(c);$I(d).FMessage({onBntClick:function(f){b._bntClick(f)},onCloseClick:function(){b._bntClick("cancel")}});e.id=d}return a("#"+d)},_generateHtml:function(i){var c=this;var h=i.id||$Utils.genId("f-message");var e=i.width||"350px";var f=i.title||"&nbsp;";var g=c._genContentHtml(h);var b=c._genButtonGroup(h);var d="			<div id='{0}' class='f-message f-popupMessage f-widget f-corner-all' style='width:{1};'> 			  <div id='{0}-header' class='f-popupMessage-header f-form-unselectable f-message-header' onselectstart='return false;'> 			  	<span id='{0}-title'>{2}</span> 			    <span id='{0}-closeIcon' class='f-popupMessage-icon f-tool f-tool-close'>&nbsp;</span> 			  </div> 			  <div id='{0}-body' class='f-popupMessage-body'>{3}</div> 			  {4} 			</div>";return $Utils.format(d,h,e,f,g,b)},_genContentHtml:function(c){var b="";b+=" 				<div id='{0}-content' style='margin-bottom:5px;'>&nbsp;</div> 			";b+="				<div id='{0}-iconContent'>					<div id='{0}-tipIcon' style='width:50px;height:35px;float:left;' class='f-message-icon-question'>&nbsp;</div>					<div id='{0}-tipContent' style='float:left'>&nbsp;</div>					<div class='f-form-clear'></div>				</div>";b+=" 				<div id='{0}-prompt'> 					<div id='{0}-promptMsg' style='margin-bottom:3px;'>&nbsp;</div> 					<input type='text' class='f-textInput f-textField' id='{0}-promptInput' style='margin-bottom:5px;'> 				</div>";return $Utils.format(b,c)},_genButtonGroup:function(c){var b=this;return a.FUI.FButtonGroup.generateHtml({id:c+"-buttonGroup",toolspacing:"2",style:"margin-top: 5px;",items:[a.FUI.FSimpleButton.generateHtml({text:"OK",id:c+"-okBnt",height:"22px",style:"margin: 0px 3px"}),a.FUI.FSimpleButton.generateHtml({text:"Yes",id:c+"-yesBnt",height:"22px",style:"margin: 0px 3px"}),a.FUI.FSimpleButton.generateHtml({text:"No",id:c+"-noBnt",height:"22px",style:"margin: 0px 3px"}),a.FUI.FSimpleButton.generateHtml({text:"Cancel",id:c+"-cancelBnt",height:"22px",style:"margin: 0px 3px"})]})}}})(jQuery);(function($){$.registerWidgetEvent("");$.widget("FUI.FAccordion",{options:{id:null,active:0,height:"auto",_contentHeight:"auto",width:"auto",onActive:null,onBeforeActive:null,onBeforeCollapse:null,onCollapse:null,_objHeaders:null,_curActiveId:null,_showProps:{height:"show"},_hideProps:{height:"hide"}},destroy:function(){this._destroy();$.Widget.prototype.destroy.call(this)},_destroy:function(){op._objHeaders||op._objHeaders.destory();op._objHeaders=null},_create:function(){var self=this;var op=self.options;op.id=this.element.attr("id");op._objHeaders=$Utils.IndexMap();self._initHeaders()},_initHeaders:function(){var self=this;var op=self.options;var headerMappings=op._objHeaders;var headers=self.element.children(".f-accordion-header");var size=headers.length;for(var i=0;i<size;i++){var el=$(headers.get(i));if(i==size-1){el.addClass("f-accordion-header-last-collapsed")}el.click(function(){self._toggleActivate(headerMappings.indexOf($(this).attr("id")))});headerMappings.put(el.attr("id"),el)}},_init:function(){var self=this;var op=self.options;self.setSize(op.width,op.height);self.activate(op.active)},_toggleActivate:function(n){var self=this;var op=self.options;var headers=op._objHeaders;var size=headers.size();var id=headers.element(n).key;if(id==op._curActiveId){if(n>=0&&n<size-1){n=n+1}else{if(n==size-1){n=n-1}}}self.activate(n)},activate:function(n){var self=this;var op=self.options;var headers=op._objHeaders;var size=headers.size();var el=self._parseToEl(n,headers);if(!el||el.length==0){return false}var id=el.attr("id");var index=headers.indexOf(id);var curActiveId=op._curActiveId;if(id===curActiveId){return false}if(op._curActiveId&&op.onBeforeCollapse){var result=self._tryExcuteFunc(self,op.onBeforeCollapse,[headers.indexOf(op._curActiveId)]);if(result===false){return false}}if(op.onBeforeActive){var result=self._tryExcuteFunc(self,op.onBeforeActive,[index]);if(result===false){return false}}var toHide=self._hideCurActive();var toShow=self._showActive(index,id,el);!toHide||toHide.addClass("f-state-hide");toShow.removeClass("f-state-hide");var lasActiveId=op._curActiveId;op._curActiveId=id;!op.onCollapse||self._tryExcuteFunc(self,op.onCollapse,[headers.indexOf(lasActiveId)]);!op.onActive||self._tryExcuteFunc(self,op.onActive,[index])},_animate:function(toHide,toShow){var op=this.options;var height=op._contentHeight;var adjust=0;!toHide||toHide.stop(true,true).animate(op._hideProps,{duration:"fast",step:function(now,fx){fx.now=Math.round(now)}});toShow.stop(true,true).animate(op._showProps,{duration:"fast",step:function(now,fx){fx.now=Math.round(now);if(fx.prop!=="height"){adjust+=fx.now}else{if(toHide&&!isNaN(height)){fx.now=Math.round(height-toHide.height()-adjust);adjust=0}}}})},_hideCurActive:function(){var self=this;var op=self.options;var headers=op._objHeaders;var id=op._curActiveId;if(!id){return null}var el=headers.get(id);var contentEl=el.next();if(!el||el.length==0||!contentEl||contentEl.length==0){return null}if(headers.indexOf(el.attr("id"))===headers.size()-1){el.addClass("f-accordion-header-last-collapsed")}el.children(".f-accordion-tool").addClass("f-tool-expand").removeClass("f-tool-collapse");var nextHeader=contentEl.next();nextHeader.removeClass("f-accordion-header-sibling-expanded");return contentEl},_showActive:function(n,id,el){var self=this;var op=self.options;var headers=op._objHeaders;var contentEl=el.next();if(n==headers.size()-1){el.removeClass("f-accordion-header-last-collapsed")}el.children(".f-accordion-tool").addClass("f-tool-collapse").removeClass("f-tool-expand");var nextHeader=contentEl.next();nextHeader.addClass("f-accordion-header-sibling-expanded");return contentEl},_parseToEl:function(n,headers){if($Utils.isJQueryObj(n)){return n}headers=headers||this.options._objHeaders;var size=headers.size();if(!isNaN(n)){if(n<0){n=0}else{if(n>=size){n=size-1}}return headers.element(n).value}if($Utils.isString(n)){return this.element.children("#"+n)}return null},getActivated:function(){return this.options._curActiveId},getByIndex:function(n){return this.options._objHeaders.element(n).key},getLength:function(){return this.options._objHeaders.size()},setTitle:function(n,title){var self=this;var op=self.options;var el=self._parseToEl(n,op._objHeaders);if(!el||el.length==0){return false}title=title||" ";el.children(".f-accordion-header-text").html(title)},setSize:function(w,h){var self=this;var op=self.options;var selfEl=this.element;if(w){w=parseInt(w);if(!isNaN(w)){w=w-2;if(w<0){w=0}}else{w=selfEl.parent().width()-2;if(w<0){w=0}}if(op.width!==w){selfEl.width(w);self._adjustWidth(w)}op.width=w}if(h){var rh=parseInt(h);if(!isNaN(rh)){rh=rh-2;if(rh<0){rh=0}}else{if(h==="fit"){rh=selfEl.parent().height()-2;if(rh<0){rh=0}}else{rh="auto"}}if(op.height!==rh){selfEl.height(rh);self._adjustHeight(rh)}op.height=h}},_adjustWidth:function(w){var self=this;var op=self.options;var headers=op._objHeaders.elements;var size=headers.length;var contentWidth="auto";if(!isNaN(w)){contentWidth=w-2;if(contentWidth<0){contentHeight=0}}for(var i=0;i<size;i++){var el=headers[i].value;var contentEl=el.next();contentEl.width(contentWidth)}op._contentWidth=contentWidth},_adjustHeight:function(h){var self=this;var op=self.options;var headers=op._objHeaders.elements;var size=headers.length;var contentHeight="auto";if(!isNaN(h)){contentHeight=h-size*28;if(contentHeight<0){contentHeight=0}}for(var i=0;i<size;i++){var el=headers[i].value;var contentEl=el.next();contentEl.height(contentHeight)}op._contentHeight=contentHeight},_tryExcuteFunc:function(obj,func,args){var EMPTY_FUNC=function(){};var f=func||EMPTY_FUNC;if(!$.isFunction(func)){try{f=eval(func);if(!$.isFunction(f)){return}}catch(e){return}}args=args||[];return f.apply(obj,args)}})})(jQuery);(function(a,b){a.widget("FUI.FNumberField",{options:{decimals:2,moneyFormat:false,defaultValue:null,afterChange:null},MAX_LENGTH:15,_create:function(){var c=this.options;c.id=this.element.attr("id");this._bindEvent()},_init:function(){var d=this.options;this.setDecimals(d.decimals);var c=d.moneyFormat;if(c==true||c=="true"){d.moneyFormat=true}else{d.moneyFormat=false}if(d.defaultValue){this.reset()}},_getInputEl:function(){var c=this;var d=this.options;if(!d._inputEl){d._inputEl=c.element.next()}return d._inputEl},_getHiddenEl:function(){var c=this;var d=this.options;if(!d._hiddenEl){d._hiddenEl=c.element}return d._hiddenEl},destroy:function(){this.options._hiddenEl=null;this.options._inputEl=null;a.Widget.prototype.destroy.call(this)},_bindEvent:function(){var d=this;var e=d._getEvent("input");this._getInputEl().bind(e);var c=d._getHiddenEl();c.bind("onValueChanged",function(g,f){d._triggerValueChanged(a(this).val())})},_getEvent:function(h){var c=this,k=c.options,e=this.element;var j=this;var g=this.options;var i=j._getInputEl();var d=j._getHiddenEl();var f={keydown:function(p){var o=p.keyCode;if(48<=o&&o<=57||96<=o&&o<=105||o==190||o==110||o==109||o==189){if(o==190||o==110){if(g.decimals<1){return false}else{return true}}var n=i.val();var m=n.length+1;var l=j.MAX_LENGTH;if(g.decimals>=1){if(n.lastIndexOf(".")>=0){m-=1}else{m+=g.decimals}}if(m>l){return false}return true}else{if(o==37||o==38||o==39||o==40||o==8||o==46||o==9||o==13||o==108){return true}}return false},focus:function(l){j._getInputEl().val(j._getHiddenEl().val())},blur:function(m){var l=j._getHiddenEl().val();j._getHiddenEl().val(j._getInputEl().val());j._triggerValueChanged(l)}};if(h=="input"){return f}},_num2num:function(c,d){d=d>=0&&d<=20?d:2;c=parseFloat((c+"").replace(/[^\d\.-]/g,"")).toFixed(d);return c},_num2money:function(f){f=(f+"").split(".");var c=f[0].split("").reverse();var g=f[1];if(g){g="."+g}else{g=""}var e="";for(var d=0;d<c.length;d++){e+=c[d]+((d+1)%3==0&&(d+1)!=c.length&&c[(d+1)]!="-"?",":"")}return e.split("").reverse().join("")+g},_money2num:function(c){return parseFloat(c.replace(/[^\d\.-]/g,""))},_triggerValueChanged:function(g){var d=this;var c=d._getHiddenEl();var f=d._getInputEl();var j=d.options;var e=c.val();var i=d._num2num(e,j.decimals);if(!isNaN(i)){if(i!=e){c.val(i)}if(true==j.moneyFormat){var h=d._num2money(i);f.val(h)}else{f.val(i)}}else{f.val("");c.val("")}if(a.isFunction(j.afterChange)){var e=c.val();if(g!==e){j.afterChange(e,g)}}},setValue:function(c){var d=this.element.val();this.element.val(c);this._triggerValueChanged(d)},getValue:function(){return this._getHiddenEl().FTextField("getValue")},reset:function(){var c=this.options.defaultValue||"";this.setValue(c)},setDisabled:function(c){return this.element.FTextField("disabled",c)},isDisabled:function(){return this.element.FTextField("disabled")},setReadonly:function(c){if(b===c){return false}return this.element.FTextField("readonly",c)},isReadonly:function(){return this.element.FTextField("readonly")},setDecimals:function(c){var d=this.options;d.decimals=c;var c=parseInt(d.decimals);if(isNaN(c)||c<0){c=0}d.decimals=c}})})(jQuery);(function($){$.registerWidgetEvent("");$.widget("FUI.FTabs",{options:{id:null,tabWidth:"auto",tabsHeaderCls:"f-tabs-normal-tab",tabHeight:25,active:0,width:"",height:"auto",onBeforeActive:null,onActive:null,onTabDblClick:null,onTabbarRClick:null,scrollGap:25,onBeforeClose:null,onClose:null,onBeforeCloseAllOthers:null,onCloseAllOthers:null,onBeforeAdd:null,onAdd:null,onLoadComplete:null,fit:false,_changeHash:1,_objCurrentTabEl:null,_currentTabId:null,_ScrollfirstTimeShow:true},_create:function(){var op=this.options;op._tabsHeadMapping=$Utils.IndexMap();op._tabsBodyMapping=$Utils.IndexMap();op._tabsBodyStatusMapping=$Utils.IndexMap();var selfEl=this.element;var ID=selfEl.attr("id");op.id=ID;op._objheaderEl=selfEl.children(".f-tabs-header:first");op["_objbody-wrapperEl"]=selfEl.children(".f-tabs-body-wrapper:first");op._objbodyEl=selfEl.children(".f-tabs-body-wrapper .f-tabs-body:first");op["_objscroll-leftEl"]=op._objheaderEl.children(".f-tabs-scroller-left-wrapper:first").children(".f-tabs-scroll-left");op["_objheader-ctlEl"]=op._objheaderEl.children(".f-tabs-header-ctl:first");op["_objtabmenu-rightEl"]=op._objheaderEl.children(".f-tabs-scroller-right-wrapper:first").children(".f-tabs-tabmenu-right");op["_objscroll-rightEl"]=op._objheaderEl.children(".f-tabs-scroller-right-wrapper").children(".f-tabs-scroll-right");this._bindEvent()},_init:function(){var self=this;var op=self.options;self._calculateIndex();op.tabHeight=self._getElement("header").outerHeight(true);if(op.fit=="true"||op.fit===true){var parentEl=self.element.parent();self.setSize(parentEl.innerWidth(),parentEl.innerHeight())}else{self.setSize(op.width,op.height)}if(!self.activate(op.active,true)){self.activate(0,true)}},_bindEvent:function(){var op=this.options;var self=this;self._getHeaderItemsEl().each(function(index,element){self._bindTabHeadEvent($(element))});self._getElement("scroll-left",self._getElement("header")).mousedown(function(){var el=$(this);if(op._isScrollShow&&!el.hasClass("f-tabs-scroll-disabled")){self._tryScrollLeft()}});self._getElement("scroll-right",self._getElement("header")).mousedown(function(){var el=$(this);if(op._isScrollShow&&!el.hasClass("f-tabs-scroll-disabled")){self._tryScrollRight()}});self._getElement("tabmenu-right",self._getElement("header")).click(function(){self._tryShowItemsMenu()});if(op.onTabbarRClick){self._getElement("header").mousedown(function(e){if(3==e.which){self._tryExcuteFunc(self,op.onTabbarRClick,[e]);return false}})}},_bindTabHeadEvent:function(el){var self=this;var op=self.options;el.mousedown(function(){var href=$(this).children("a").attr("href");var tabId=href.substring(href.lastIndexOf("#")+1);if(op._currentTabId==tabId){return}self.activate(tabId);return});if(op.onTabDblClick){el.dblclick(function(){var hid=$(this).attr("id");var index=op._tabsHeadMapping.indexOf(hid);var id=op._tabsBodyMapping.get(index);self._tryExcuteFunc(self,op.onTabDblClick,[index,id])})}if(el.hasClass("f-tab-closable")){var closeBnt=el.children().children(".f-tab-close-bnt:first");closeBnt.click(function(e){e.stopPropagation();self._closeTabByEl($(this).parent().parent());return false})}},_tryScrollLeft:function(){var op=this.options;var self=this;var ctlBox=self._calElementBox("header-ctl");var innerBox=self._calHeaderItemsBox();var realScrollGap=0;if(innerBox.left+op.scrollGap>ctlBox.left){realScrollGap=ctlBox.left-innerBox.left}else{realScrollGap=op.scrollGap}var ulEl=self._getElement("header-ctl",self._getElement("header")).children();ulEl.css("margin-left",(parseInt(ulEl.css("margin-left"))+realScrollGap)+"px");self._adjustTabScroller()},_tryScrollRight:function(){var op=this.options;var self=this;var ctlBox=self._calElementBox("header-ctl");var innerBox=self._calHeaderItemsBox();var realScrollGap=0;if(innerBox.right-op.scrollGap<ctlBox.right){realScrollGap=innerBox.right-ctlBox.right}else{realScrollGap=op.scrollGap}var ulEl=self._getElement("header-ctl",self._getElement("header")).children();ulEl.css("margin-left",(parseInt(ulEl.css("margin-left"))-realScrollGap)+"px");self._adjustTabScroller()},_tryShowItemsMenu:function(){var self=this;var op=this.options;var tabsMenuEl=self._getGlobalElement("scroll-menuEl");if(tabsMenuEl.length==0){var menuId=op.id+"-scroll-menuEl";var html="	    			<ul id='"+menuId+"' style='display:none;' class='f-menu f-menu-icons f-widget'></ul>";$("body").append(html);tabsMenuEl=$("#"+menuId).FMenu({attach:self._getElement("tabmenu-right"),offset:{top:4},onClick:function(item){var tabId=item.url;if(tabId){self.activate(tabId)}}})}if(!op._itemsMenuData){tabsMenuEl.FMenu("setStaticData",self._genItemsMenuData());op._itemsMenuData=[{data:""}]}tabsMenuEl.FMenu("show")},_genItemsMenuData:function(){var self=this;var op=this.options;var mapping=op._tabsHeadMapping;var bodyMapping=op._tabsBodyMapping;var items=mapping.elements;var bodyItems=bodyMapping.elements;var size=items.length;var GAP=10;var groups=[];for(var i=0;i<size;){var data=[];for(var j=0;(j<GAP)&&(i<size);j++,i++){var text=$(".f-tabs-strip-text:first",items[i].value).html();data.push({text:text,url:bodyItems[i].key,title:text})}groups.push(data)}if(groups.length==1){return groups[0]}var data=[];size=groups.length;for(var i=0;i<size;i++){var subGroup=groups[i];var text="items <span style='color:blue;'>"+(GAP*i+1)+" - "+(GAP*i+subGroup.length)+"</span>";data.push({text:text,children:subGroup,url:subGroup[0].url})}return data},_tryExcuteFunc:function(obj,func,args){var EMPTY_FUNC=function(){};var f=func||EMPTY_FUNC;if(!$.isFunction(func)){try{f=eval(func);if(!$.isFunction(f)){return}}catch(e){return}}args=args||[];return f.apply(obj,args)},add:function(op,pos,active){if(!op){return}var self=this;var opts=self.options;if(opts.onBeforeAdd){if(self._tryExcuteFunc(self,opts.onBeforeAdd,[op,pos,active])===false){return false}}pos=op.pos||pos;active=op.active||active;var id=$Utils.genId("f-tabs-item");var bodyId=op.id||$Utils.genId("f-tabs-body-item");var closable=(op.closable===true);var title=op.title||id;var width=parseInt(op.width||opts.tabWidth);if(!isNaN(width)){width=width+"px"}else{width="auto"}var aStyle="";if(width=="auto"){aStyle="f-tabs-right-ie6"}var tabHeightCls=op.tabsHeaderCls||opts.tabsHeaderCls||"f-tabs-normal-tab";var iconCls=op.iconCls;var closeIconHtml="";if(closable){closeIconHtml="<span class='f-tab-close-bnt'>&nbsp;</span>"}var genTabHeadHtml=function(){var template="			    	<div class='f-tabs-head-item{1}' id='{0}'>						<a class='f-tabs-right {8}' href='#{6}' onclick='return false;' title='{2}'>							{3}							<em class='f-tabs-left'>								<span class='f-tabs-strip-inner {7}'>									<span class='f-tabs-strip-text' style='width:{4};line-height:normal'>{2}</span>								</span>							</em>						</a>					</div>";var html=$Utils.format(template,id,closable?" f-tab-closable":"",title,closeIconHtml,width,0,bodyId,tabHeightCls,aStyle);return html};var url=op.url;var iframe=(op.iframe==="false")?false:true;var iframeName=op.iframeName||$Utils.genId("tabs-iframe-name");var content=url?"":op.content;var genTabBodyHtml=function(){var template="			    	<div id='{0}' class='f-panel'>						<div class='f-panel-wrapper'>							<div id='{0}-panel-body' class='f-panel-body'>							{1}							</div>						</div>					</div>";var html=$Utils.format(template,bodyId,content);return html};var itemsMapping=opts._tabsHeadMapping;var bodyItemsMapping=opts._tabsBodyMapping;var bodyItemsStateMapping=opts._tabsBodyStatusMapping;var headerBoxEl=self._getElement("header-ctl").children();var bodyBoxEl=self._getElement("body");var pos=parseInt(pos);if(!isNaN(pos)){var size=itemsMapping.size();pos=(pos<size&&pos>=0)?pos:(size-1);var curHeaderEl=itemsMapping.element(pos).value;var curBodyEl=bodyItemsMapping.element(pos).value;curHeaderEl.before(genTabHeadHtml());curBodyEl.before(genTabBodyHtml());itemsMapping.insert(pos,id,$("#"+id));bodyItemsMapping.insert(pos,bodyId,$("#"+bodyId));bodyItemsStateMapping.insert(pos,{url:url,iframe:iframe,iframeName:iframeName})}else{var edgeEl=self._getElement("items-edge");edgeEl.before(genTabHeadHtml());bodyBoxEl.append(genTabBodyHtml());itemsMapping.put(id,$("#"+id));bodyItemsMapping.put(bodyId,$("#"+bodyId));bodyItemsStateMapping.put(bodyId,{url:url,iframe:iframe,iframeName:iframeName});pos=itemsMapping.size()-1}$("#"+bodyId+"-panel-body").css({width:self._getElement("body-wrapper").width()-2,height:self._getElement("body-wrapper").height()-1});self._bindTabHeadEvent($("#"+id));if(active===true){self.activate(pos);if(!opts._isScrollShow){self._adjustTabScroller()}}else{self._adjustTabScroller()}!opts.onAdd||self._tryExcuteFunc(self,opts.onAdd,[pos,bodyId]);opts._itemsMenuData=null},closeTab:function(index){var op=this.options;if(isNaN(index)){index=op._tabsBodyMapping.indexOf(op._currentTabId)}var el=op._tabsHeadMapping.element(index).value;return this._closeTabByEl(el)},_closeTabByEl:function(itemEl){var op=this.options;var self=this;var id=itemEl.attr("id");var itemsMapping=op._tabsHeadMapping;var bodyItemsMapping=op._tabsBodyMapping;var bodyItemsStatuesMapping=op._tabsBodyStatusMapping;var size=itemsMapping.size();if(size<=1){return}var index=itemsMapping.indexOf(id);var bodyItemEl=bodyItemsMapping.element(index).value;var bodyId=bodyItemsMapping.element(index).key;if(op.onBeforeClose){if(self._tryExcuteFunc(self,op.onBeforeClose,[index,bodyId])===false){return false}}itemsMapping.removeByIndex(index);bodyItemsMapping.removeByIndex(index);bodyItemsStatuesMapping.removeByIndex(index);itemEl.remove();self._clearTabBody(bodyItemEl);bodyItemEl.remove();var activeIndex=index;if(activeIndex>=size-1){activeIndex=size-2}self.activate(activeIndex);!op.onClose||self._tryExcuteFunc(self,op.onClose,[index,bodyId]);op._itemsMenuData=null},closeOthers:function(index){var self=this;var op=self.options;var itemsMapping=op._tabsHeadMapping;var size=itemsMapping.size();if(size<=1){return}var bodyItemsMapping=op._tabsBodyMapping;var bodyItemsStatuesMapping=op._tabsBodyStatusMapping;var cacheScrollShow=op._isScrollShow;op._isScrollShow=false;self.activate(index);op._isScrollShow=cacheScrollShow;var bodyId=op._currentTabId;index=bodyItemsMapping.indexOf(bodyId);var headerElement=itemsMapping.element(index);var bodyElement=bodyItemsMapping.element(index);var bodyStatusElement=bodyItemsStatuesMapping.element(index);if(op.onBeforeCloseAllOthers){if(self._tryExcuteFunc(self,op.onBeforeCloseAllOthers,[index,bodyId])===false){return false}}for(var i=0;i<size;i++){if(i==index){continue}var bodyElement=bodyItemsMapping.element(i);var bodyId=bodyElement.key;var bodyEl=bodyElement.value;if(op.onBeforeClose){if(self._tryExcuteFunc(self,op.onBeforeClose,[i,bodyId])===false){continue}}itemsMapping.element(i).value.remove();bodyEl.remove();!op.onClose||self._tryExcuteFunc(self,op.onClose,[i,bodyId])}if(op._isScrollShow){self._adjustTabScroller()}itemsMapping.clear();itemsMapping.elements.push(headerElement);bodyItemsMapping.clear();bodyItemsMapping.elements.push(bodyElement);bodyItemsStatuesMapping.clear();bodyItemsStatuesMapping.elements.push(bodyStatusElement);!op.onCloseAllOthers||self._tryExcuteFunc(self,op.onCloseAllOthers,[0,bodyId]);op._itemsMenuData=null},_calculateIndex:function(){var op=this.options;var self=this;op._tabsHeadMapping.clear();op._tabsBodyMapping.clear();op._tabsBodyStatusMapping.clear();self._getBodyItemsEl().each(function(index,element){var curEl=$(element);var id=curEl.attr("id");var url=curEl.attr("url");var iframe=(curEl.attr("iframe")==="false")?false:true;var name=curEl.attr("iframeName")||$Utils.genId("tabs-iframe-name");op._tabsBodyMapping.put(id,curEl);op._tabsBodyStatusMapping.put(id,{url:url,iframe:iframe,iframeName:name});curEl.removeAttr("iframe").removeAttr("url").removeAttr("iframeName")});self._getHeaderItemsEl().each(function(index,element){var curEl=$(element);op._tabsHeadMapping.put(curEl.attr("id"),curEl)})},destroy:function(){var op=this.options;this._clearAllBody();op._tabsHeadMapping.destroy();op._tabsHeadMapping=null;op._tabsBodyMapping.destroy();op._tabsBodyMapping=null;op._tabsBodyStatusMapping.destroy();op._tabsBodyStatusMapping=null;for(var n in op){op[n]=undefined}$.Widget.prototype.destroy.call(this)},_clearAllBody:function(){var bodyMapping=op._tabsBodyMapping;var size=bodyMapping.size();for(var i=0;i<size;i++){this._clearTabBody(bodyMapping.element(i).value)}},_clearTabBody:function(el){el.find("iframe").each(function(){var id=$(this).attr("id");$Utils.destroyIframe(id)})},activate:function(tab,init){if(tab===null){return false}var self=this;var op=this.options;var headerEl=self._getElement("header");var bodyEl=self._getElement("body");var tabId=null;var tabIndex=parseInt(tab);var headerTabEl=null;if(!isNaN(tabIndex)){tabId=self.getAlter(tabIndex);if(tabId==null){return false}}else{tabId=tab;tabIndex=self.getAlter(""+tabId);if(tabIndex==-1){return false}}if(op._currentTabId==tabId){return false}if(op.onBeforeActive){var result=self._tryExcuteFunc(self,op.onBeforeActive,[tabIndex,tabId]);if(result===false){return false}}var resetPrevTab=function(){var preTabId=op._currentTabId;var prevTabIndex=self.getAlter(""+preTabId);if(!preTabId||(!prevTabIndex&&prevTabIndex!==0)||prevTabIndex<0){return}var preTabHeaderEl=op._tabsHeadMapping.element(prevTabIndex).value;var preTabBodyEl=op._tabsBodyMapping.element(prevTabIndex).value;preTabHeaderEl.removeClass("f-tabs-active")};resetPrevTab();var tabEl=op._tabsBodyMapping.element(tabIndex).value;var headerTabEl=op._tabsHeadMapping.element(tabIndex).value;headerTabEl.removeClass("f-tabs-over").addClass("f-tabs-active");self._adjustTabInSight(headerTabEl,tabIndex);var poffset=self._getElement("body-wrapper").offset();var coffset=tabEl.offset();self._getElement("body").stop().animate({marginTop:"-="+(coffset.top-poffset.top)},0);op._objCurrentTabEl=tabEl;op._currentTabId=tabId;if(init!==true){if(op._isScrollShow){self._adjustTabScroller()}}var tabStatus=op._tabsBodyStatusMapping.element(tabIndex).value||{};if(tabStatus.url&&tabStatus.loaded!==true){self.reload(tabIndex)}!op.onActive||self._tryExcuteFunc(self,op.onActive,[tabIndex,tabId]);return true},reload:function(index,url,iframe){var op=this.options;var self=this;var tabStatus=op._tabsBodyStatusMapping.element(index).value||{};if(url){tabStatus.url=url}if(!tabStatus.url){return false}if(iframe==="false"||iframe===false){tabStatus.iframe=false}else{if(iframe=="true"||iframe===true){tabStatus.iframe=true}}tabStatus.loaded=false;var pageUrl=tabStatus.url;if(pageUrl.indexOf("://")===0&&pageUrl.indexOf("/")!==0){pageUrl=$Utils.getContextPath()+"/"+pageUrl}var element=op._tabsBodyMapping.element(index);var bodyEl=element.value.children(":first").children(".f-panel-body");if(tabStatus.iframe){if(bodyEl.children("iframe").length!=0){bodyEl.children("iframe").attr("src",pageUrl)}else{self._clearTabBody(element.value);var html=self._getIframeHtml(element.key,tabStatus.iframeName,pageUrl);bodyEl.html(html);bodyEl.children("iframe").css({height:bodyEl.height(),width:bodyEl.width()});bodyEl.css({overflow:"hidden"})}tabStatus.loaded=true}else{$.ajax({context:self,dataType:"html",url:pageUrl,success:function(contentHtml){bodyEl.html(contentHtml);tabStatus.loaded=true;!op.onLoadComplete||self._tryExcuteFunc(self,op.onLoadComplete,[index,element.key])}})}return true},setTitle:function(n,text){if(n===null){return}var self=this;var index;if(!isNaN(n)){index=n}else{index=self.getAlter(n)}var op=self.options;var headerEl=op._tabsHeadMapping.element(index).value;if(headerEl){$(".f-tabs-strip-text",headerEl).html(text||" ")}},_getIframeHtml:function(id,name,pageUrl){var style="style=";if(this.options.fit==="true"||this.options.fit===true){style+="'overflow:hidden;'"}else{style+="'overflow:auto;'"}var htmlArr=[];htmlArr.push('<iframe id="'+id+'-iframe" name="'+name+'" '+style);htmlArr.push(' class="f-win-iframe f-panel-body-content"  frameborder="0" src="');htmlArr.push(pageUrl);htmlArr.push('"></iframe>');return htmlArr.join("")},_adjustTabInSight:function(el,index){var offset=0;var self=this;var ulEl=self._getElement("header-ctl",self._getElement("header")).children();if(index!=0){var offset=self._calTabOffset(el);ulEl.css("margin-left",(parseInt(ulEl.css("margin-left"))+offset)+"px")}else{ulEl.css("margin-left","0px")}},_adjustTabScroller:function(){var op=this.options;var self=this;var isScrollShow=op._isScrollShow;var leftScrollEl=self._getElement("scroll-left",self._getElement("header"));var rightScrollEl=self._getElement("scroll-right",self._getElement("header"));var menuScrollEl=self._getElement("tabmenu-right",self._getElement("header"));var headerCtlEl=self._getElement("header-ctl",self._getElement("header"));var headerBox=self._calHeaderBox();var innerBox=self._calHeaderItemsBox();var headerWidth=headerBox.right-headerBox.left;var innerBoxWidth=innerBox.right-innerBox.left;if(headerWidth>innerBoxWidth){if(isScrollShow===true){leftScrollEl.parent().css("display","none");rightScrollEl.parent().css("display","none");menuScrollEl.parent().css("display","none");headerCtlEl.css("width","100%");self._adjustTabInSight(null,0);op._isScrollShow=false}}else{if(op._ScrollfirstTimeShow===true){var scrollBntHeight=self._getElement("header-ctl").height()-4;self._getElement("scroll-left").height(scrollBntHeight);self._getElement("tabmenu-right").height(scrollBntHeight);self._getElement("scroll-right").height(scrollBntHeight);op._ScrollfirstTimeShow=false}if(isScrollShow===true){var realWidth=self.element.width()-2;headerCtlEl.css("width",(realWidth-18*3)+"px")}else{headerCtlEl.css("width",(self._getElement("header").width()-18*3)+"px");leftScrollEl.parent().css("display","block");rightScrollEl.parent().css("display","block");menuScrollEl.parent().css("display","block");op._isScrollShow=true;innerBox.left=innerBox.left+18;innerBox.right=innerBox.right+18}var ctlBox=self._calElementBox("header-ctl");if(ctlBox.left>innerBox.left){leftScrollEl.removeClass("f-tabs-scroll-disabled")}else{leftScrollEl.addClass("f-tabs-scroll-disabled")}if(ctlBox.right<innerBox.right){rightScrollEl.removeClass("f-tabs-scroll-disabled")}else{rightScrollEl.addClass("f-tabs-scroll-disabled")}}},_doLayout:function(){var op=this.options;var tabEl=op._objCurrentTabEl;if(tabEl!=null&&tabEl.size()>0){var changedHash=tabEl.data("changedHash");if(changedHash!=null){if(parseInt(changedHash)==op._changeHash){return}}var childEl=null;var id=tabEl.attr("id");var panelBodyEl=$I(id+"-panel-body");var bodyContentEl=panelBodyEl.children(".f-panel-body-content");var bodyContentCount=bodyContentEl.size();var width=parseInt(op.width);if(!isNaN(width)){panelBodyEl.width(width-2);if(bodyContentCount===1){bodyContentEl.width(width-2)}}var height=parseInt(op.height);if(!isNaN(height)){var gaps=parseFloat(op.tabHeight)+1;var realSize=height-gaps;panelBodyEl.height(realSize);if(bodyContentCount===1){var otherHeight=0;bodyContentEl.siblings(":visible").each(function(){otherHeight+=$(this).outerHeight(true)});realSize=(realSize-otherHeight)<0?0:(realSize-otherHeight);bodyContentEl.height(realSize)}}if(bodyContentCount==1){bodyContentEl.triggerHandler("onResize")}else{panelBodyEl.triggerHandler("onResize")}tabEl.data("changedHash",op._changeHash)}},setSize:function(w,h){var op=this.options;var self=this;var sizeChanged=false;if(w!=null){op.width=w;sizeChanged=true;var width=parseInt(w);if(!isNaN(width)){self.element.width(width)}}if(h!=null&&!isNaN(parseFloat(h))){op.height=parseFloat(h);sizeChanged=true;self._getElement("body-wrapper").css({height:op.height-(op.tabHeight)});var wrapperWidth=self._getElement("body-wrapper").width();self._getElement("body").children(".f-panel").each(function(){var el=$(this);var id=el.attr("id");$("#"+id+"-panel-body,#"+id+"-iframe",el).each(function(){$(this).css({width:wrapperWidth-2,height:op.height-op.tabHeight-1})})})}if(sizeChanged){op._changeHash++}self._adjustTabScroller()},getActivated:function(){var op=this.options;var currentEl=op._objCurrentTabEl;if(currentEl!=null){return currentEl.attr("id")}return null},getTabsCount:function(){return(this.options._tabsBodyMapping.size())},getAlter:function(id){var result=null;var op=this.options;if(id!=null){if($Utils.isNumber(id)){var element=op._tabsBodyMapping.element(id);if(element!=null){result=element.key}}else{result=op._tabsBodyMapping.indexOf(id)}}return result},_getHeaderItemsEl:function(){return this._getElement("header-ctl").children().children(".f-tabs-head-item")},_getBodyItemsEl:function(){return this._getElement("body").children("div.f-panel")},_calHeaderBox:function(){return this._calElementBox("header")},_calElementBox:function(name){var el=this._getElement(name);var width=el.width();var offset=el.offset();return{left:offset.left,right:offset.left+width}},_calHeaderItemsBox:function(){var op=this.options;var mapping=op._tabsHeadMapping;if(mapping.size()==0){return}var firstOffset=op._tabsHeadMapping.element(0).value.offset();var lastOffset=this._getElement("items-edge",this._getElement("header")).offset();return{left:firstOffset.left-2,right:lastOffset.left+2}},_calTabOffset:function(el){function calElBox(el){var width=el.outerWidth(true);var offset=el.offset();return{left:offset.left-2,right:offset.left+width}}var self=this;var op=self.options;var ctlBox=self._calElementBox("header-ctl");var elBox=calElBox(el);var offset=0;var ulEl=self._getElement("header-ctl").children();if(ctlBox.left>elBox.left){offset=ctlBox.left-elBox.left}else{if(ctlBox.right<elBox.right){offset=ctlBox.right-elBox.right}}return offset},_getElement:function(name,parent){var op=this.options;var el=op["_obj"+name+"El"];if(el&&el.length>0){return el}else{el=op["_obj"+name+"El"]=$("#"+op.id+"-"+name+":first",(parent||this.element))}return el},_getGlobalElement:function(name){var op=this.options;var el=op["_gobj"+name+"El"];if(el&&el.length>0){return el}else{el=op["_gobj"+name+"El"]=$("body").children("#"+op.id+"-"+name+":first")}return el}})})(jQuery);(function($){$.registerWidgetEvent("onTriggerClick");$.widget("FUI.FTargetSelect",{options:{onTriggerClick:null},_create:function(){this.options.id=this.element.attr("id")},_init:function(){this._bindEvent()},_bindEvent:function(){var self=this;var id=self.options.id;var triggerEl=$("#"+id+"-trigger");triggerEl.click(function(e){if($I(id).FTextField("disabled")===true){return}var func=self._getTriggerFunc();if(func!=null){func.call(self,self.options.id)}})},_getTriggerFunc:function(){var func=this.options.onTriggerClick;if($Utils.isString(func)){try{func=eval(func)}catch(e){func=null}}if(!$.isFunction(func)){func=null}return func},setValue:function(v,force){return this.element.FTextField("value",v,force)},getValue:function(){return this.element.FTextField("value")},reset:function(){return this.element.FTextField("reset")},setDisabled:function(state){return this.element.FTextField("disabled",state)},isDisabled:function(){return this.element.FTextField("disabled")},setReadonly:function(state){return this.element.FTextField("readonly",state)},isReadonly:function(){return this.element.FTextField("readonly")},setOnTriggerClick:function(func){this.options.onTriggerClick=func},destroy:function(){$.Widget.prototype.destroy.call(this)}})})(jQuery);var FTree={index:0,idGenerate:function(){return"node"+(FTree.index++)}};(function(a,b){a.widget("FUI.FTree",{options:{dataUrl:"",selectModel:"normal",rootVisible:true,rootNode:null,baseParams:{},syncLoad:false,width:250,height:350},_create:function(){this.id=this.element.attr("id");this.headEl=$I(this.id+"-head");this.bodyEl=$I(this.id+"-body");this.bodyEl.closeSelect();this.dataStore=[];this.selectedNodes=[];this.nodeSelectedCls="f-tree-button f-tree-checkmark f-tree-checkbox-selected";this.nodeUnSelectedCls="f-tree-button f-tree-checkmark f-tree-checkbox-unselected";this.nodeSelectedPartCls="f-tree-button f-tree-checkmark f-tree-checkbox-selected-part";this.nodeUnSelectedPartCls="f-tree-button f-tree-checkmark f-tree-checkbox-unselected-part";this.nodeElbowFlatTopCls="f-tree-button f-tree-elbow f-tree-elbow-flat-top";this.nodeElbowFlatMiddleCls="f-tree-button f-tree-elbow f-tree-elbow-flat-middle";this.nodeElbowFlatBottomCls="f-tree-button f-tree-elbow f-tree-elbow-flat-bottom";this.nodeElbowPlusTopCloseCls="f-tree-button f-tree-elbow f-tree-elbow-plus-top-close";this.nodeElbowPlusMiddleCloseCls="f-tree-button f-tree-elbow f-tree-elbow-plus-middle-close";this.nodeElbowPlusBottomCloseCls="f-tree-button f-tree-elbow f-tree-elbow-plus-bottom-close";var d=this.options;var e=d.width;var c=d.height;this.setSize(e,c);this._bindEvent()},_init:function(){this._initRenderNode()},setStaticData:function(c){this.dataStore=[];this.selectedNodes=[];this.options.staticData=c;this._initRenderNode()},_initRenderNode:function(){var c=this.options;if(c.rootVisible){this._renderVirtualRoot()}else{this._renderFirstLevelNode()}},destroy:function(){this.headEl=null;this.titleEl=null;this.dataStore=null;this.selectedNodes=null;this.bodyEl.unbind();this.bodyEl.html("");this.bodyEl=null;a.Widget.prototype.destroy.call(this)},_bindEvent:function(){var d=this,c=window["$Utils"];this.bodyEl.bind({dblclick:function(j){var k=j.target;var l=k.nodeName.toLowerCase();var m=k.className;if("span"==l&&(m.indexOf("f-tree-folder")!==-1||m.indexOf("node-text")!==-1)||"a"==l){var n=a(k).parents("li");var g=n.attr("f_value");var i=n.attr("f_value_type");if(g){g=("number"==i)?parseInt(g):g}var f=d._getNodeDataByDom(k);var h=d.options.onNodeDblClick;h&&h(f)}},click:function(j){var i=j.target;var m=i.nodeName.toLowerCase(),f=i.className;var l=d.options.onNodeClick;if(f.indexOf("f-tree-elbow-plus")!==-1){d._nodeClickHandler(i)}else{if(f.indexOf("f-tree-checkmark")!==-1){var g=d._getNodeDataByDom(i);var h=g.checked;if(h){d._unSelectNode(g)}else{d._selectNode(g)}}else{if(f.indexOf("f-tree-folder")!==-1||f.indexOf("node-text")!==-1||"a"==m){d._nodeClickHandler(i);var g=d._getNodeDataByDom(i);var k=g.aId;d._saveSelectedNodes(g);d._selectText(k,g)}}}}})},_nodeClickHandler:function(i){var g=this,d=window["$Utils"];var e=g._getNodeDataByDom(i);if(e.leaf==true||e.leaf=="true"){return}var c=a(i).parents("li");var h=c.attr("f_status");var j=e.ulId;if(j){if("close"==h){g._expandNode(e)}else{if("open"==h){g._collapseNode(e)}}}else{if(g.options.syncLoad){if(g.hasLoaded){var f=e.children;if(f&&f.length){g._changeIcons(e,"-close","-open");g._renderNode(e,f)}else{g._clearPlusIcons(e)}}else{g._loadNode(e)}}else{g._loadNode(e)}}},_selectText:function(e,d){var c=this.options;var f=c.onNodeClick;this._changeTextCls(e);f&&f(d)},_saveSelectedNodes:function(d){var c=this.options;if("normal"==c.selectModel){this.selectedNodes=null;this.selectedNodes={};this.selectedNodes[d.id]=d}},_selectNode:function(g){var f=this.options;var e=f.onNodeSelect;var i=g.checkboxId;if(!i){return}g.checked=true;this.selectedNodes[g.id]=g;var d=window["$Utils"];var h=$I(i);var c=h.get(0);c.className=this.nodeSelectedCls;e&&e(g);this._adjustNodeSelectStatus(g)},_unSelectNode:function(f){var e=this.options;var h=e.onNodeUnSelect;var i=f.checkboxId;if(!i){return}f.checked=false;delete this.selectedNodes[f.id];var d=window["$Utils"];var g=$I(i);var c=g.get(0);c.className=this.nodeUnSelectedCls;h&&h(f);this._adjustNodeSelectStatus(f)},_adjustNodeSelectStatus:function(c){this._adjustParentNode(c);this._adjustChildrenNode(c)},_adjustParentNode:function(c){var o=this.options.selectModel;var m=c.pid;if(m){var n=this.dataStore[m];if(!n){return}var p=n.checkboxId;var q=$I(p);var g=q.get(0);if("selectChildren"==o){var e=n.children;if(!e||!a.isArray(e)){return}var d=e.length;var l=true;var k=true;for(var j=0;j<d;j++){var f=e[j];if(!f.checked){l=false}else{k=false}}if(n.checked){if(l){g.className=this.nodeSelectedCls}else{g.className=this.nodeSelectedPartCls}}else{if(k){g.className=this.nodeUnSelectedCls}else{g.className=this.nodeUnSelectedPartCls}}}else{if("selectParent"==o){var h=n.children;var d=h.length;var l=true;var k=true;for(var j=0;j<d;j++){var f=h[j];if(!f.checked){l=false}else{k=false}}if(c.checked){if(l){n.checked=true;g.className=this.nodeSelectedCls}else{n.checked=true;g.className=this.nodeSelectedPartCls}this.selectedNodes[n.id]=n}else{if(k){n.checked=false;delete this.selectedNodes[n.id];g.className=this.nodeUnSelectedCls}else{n.checked=true;this.selectedNodes[n.id]=n;g.className=this.nodeSelectedPartCls}}}}n.pid&&this._adjustParentNode(n)}},_adjustChildrenNode:function(c){var e=c.children;if(!e||!a.isArray(e)){return}var j=this.options.selectModel;if("selectChildren"==j){var d=e.length;for(var h=0;h<d;h++){var f=e[h];var k=f.checkboxId;if(k){var l=$I(k);var g=l.get(0);if(c.checked){f.checked=true;this.selectedNodes[f.id]=f;g.className=this.nodeSelectedCls}else{f.checked=false;delete this.selectedNodes[f.id];g.className=this.nodeUnSelectedCls}f.children&&this._adjustChildrenNode(f)}}}},_changeTextCls:function(g){var e=window["$Utils"];if(!g){return}if(this.selectedNodeId){var d=$I(this.selectedNodeId).get(0);e.removeClass(d,"selected-node")}this.selectedNodeId=g;var f=$I(g);var c=f.get(0);e.addClass(c,"selected-node")},_expandNode:function(d){var g=d.liId;var j=d.ulId;var e=d.leaf;if(!j||e==="true"||e===true||e===1){return}var c=$I(g);var f=$I(j);c.attr("f_status","open");if(f.length){this._changeIcons(d,"-close","-open");var i=f.get(0);i.style.display="block"}var h=this.options.onExpandNode;h&&h(d)},_collapseNode:function(d){var h=d.liId;var j=d.ulId;var e=d.leaf;if(!j||e==="true"||e===true||e===1){return}var c=$I(h);var g=$I(j);c.attr("f_status","close");if(g.length){this._changeIcons(d,"-open","-close");var i=g.get(0);i.style.display="none"}var f=this.options.onClappseNode;f&&f(d)},expandNode:function(e){if(!e||e.leaf==="true"||e.leaf===true||e.leaf===1){return}var i=e.ulId;if(i){this._expandNode(e)}else{var g=e.elbowId;var h=$I(g);var c=h.get(0);var d=c.className;if(d.indexOf("-plus-middle-close")!==-1||d.indexOf("-plus-top-close")!==-1||d.indexOf("-plus-bottom-close")!==-1||d.indexOf("-plus-root-close")!==-1){if(this.options.syncLoad){if(this.hasLoaded){var f=e.children;if(f&&f.length){this._changeIcons(e,"-close","-open");this._renderNode(e,f)}else{this._clearPlusIcons(e)}}else{this._loadNode(e)}}else{this._loadNode(e)}}}},collapseNode:function(c){this._collapseNode(c)},isExpanded:function(e){var f=e.elbowId;var g=$I(f);var c=g.get(0);var d=c.className;if(d.indexOf("-plus-middle-close")!==-1||d.indexOf("-plus-top-close")!==-1||d.indexOf("-plus-bottom-close")!==-1||d.indexOf("-plus-root-close")!==-1){return false}return true},getNodeDataById:function(c){return this.dataStore[c]||null},_getNodeDataByDom:function(e){if(!e){return}var c=a(e).parents("li");var f=c.attr("f_value");var d=c.attr("f_value_type");if(f&&d){f=(d==="number")?parseInt(f):f}return this.dataStore[f]||null},loadNode:function(c,h){if(c){var k=c.ulId;if(k){var f=$I(k);f.remove()}var e=c.children;if(e){var g=e.length;for(var d=0;d<g;d++){var j=e[d].id;delete this.dataStore[j];delete this.selectedNodes[j]}}}else{this.bodyEl.html("")}this._loadNode(c,h)},_loadNode:function(g,j){if(this.isLoading){return}this.isLoading=true;var k=this.options,h=window["$Utils"],d=this;var c=k.onLoadsuccess;var f=k.onLoadfailure;var i=k.onLoadError;var e=a.extend({},k.baseParams||{},j||{});if(g){e._rootId=g.id}else{k.rootNode&&(e._rootId=k.rootNode.id)}e._respType="tree";a.FUI.FAjax.getList({url:h.transUrl(k.dataUrl),data:e,cache:false,success:function(m,n,l){if(m.length){d._changeIcons(g,"-close","-open");d._renderNode(g,m)}else{d._clearPlusIcons(g)}c&&c(m,n,l);d.isLoading=false;if(k.syncLoad){d.hasLoaded=true}},failure:function(m,n,l){f&&f(m,n,l);d.isLoading=false},error:function(l,n,m){i&&i(l,n,m);d.isLoading=false}})},load:function(d,c){},_renderNode:function(l,e){if(!e||e.length==0){return}var d=e.length,c=this.options,q=c.selectModel,o=[],f=FTree.idGenerate,g=false;if(l){l.children=e;l.ulId=f();if(l.isLast===true){o.push('<ul id="'+l.ulId+'">')}else{o.push('<ul id="'+l.ulId+'" class="line">')}}else{g=true;o.push('<ul style="padding-left:0px;">')}for(var t=0;t<d;t++){var s=e[t];var u=false;if(s.leaf===true||s.leaf==="true"||s.leaf===1){u=true}s.liId=f();s.elbowId=f();s.aId=f();s.iconId=f();if(s.iconCls){s.iconCls="f-tree-button f-tree-folder "+s.iconCls}else{if(u){s.iconCls="f-tree-button f-tree-folder f-tree-leaf"}else{s.iconCls="f-tree-button f-tree-folder f-tree-folder-close"}}var v=s.liId;var m=false;var p=false;if(t===0){m=true}if(t===d-1){p=true}s.isFirst=m;s.isLast=p;var r="";if(p){if(u){r=this.nodeElbowFlatBottomCls}else{r=this.nodeElbowPlusBottomCloseCls}}else{if(u){r=this.nodeElbowFlatMiddleCls}else{r=this.nodeElbowPlusMiddleCloseCls}}if(g){s.level=1;if(m){if(d>1){if(u){r=this.nodeElbowFlatTopCls}else{r=this.nodeElbowPlusTopCloseCls}}else{if(u){r=this.nodeElbowFlatBottomCls}else{r=this.nodeElbowPlusBottomCloseCls}}}}var n="";var h=s.checked;if(h=="true"||h==true){n=this.nodeSelectedCls;if(q==="selectChildren"||q==="selectParent"){this.selectedNodes[s.id]=s}}else{n=this.nodeUnSelectedCls}o.push('<li id="');o.push(s.liId);o.push('" f_value="');o.push(s.id);o.push('" f_value_type="');o.push(typeof(s.id));o.push('" f_status="close">');o.push('<span id="');o.push(s.elbowId);o.push('"  class="');o.push(r);o.push('"></span>');if(q==="selectChildren"||q==="selectParent"){s.checkboxId=f();o.push('<span  id="');o.push(s.checkboxId);o.push('"  class="');o.push(n);o.push('" ></span>')}o.push('<a id="');o.push(s.aId);o.push('"><span  id="');o.push(s.iconId);o.push('"  class="');o.push(s.iconCls);o.push('"></span>');o.push('<span class="node-text" title="');o.push(s.text);o.push('">');o.push(s.text);o.push("</span></a></li>");this.dataStore[s.id]=s}o.push("</ul>");if(l){var k=$I(l.liId);k.attr("f_status","open");var j=o.join("");k.append(j);o=null;k=null}else{var j=o.join("");this.bodyEl.html(j);o=null;j=null}},_clearPlusIcons:function(e){if(!e){return}var f=e.elbowId;var h=$I(f);var c=h.get(0);var d=c.className;var g="";if(d.indexOf("-middle-")!==-1){h.get(0).className=this.nodeElbowFlatMiddleCls}else{if(d.indexOf("-bottom-")!==-1){h.get(0).className=this.nodeElbowFlatBottomCls}else{if(d.indexOf("-top-")!==-1){h.get(0).className=this.nodeElbowFlatTopCls}}}},_changeIcons:function(d,c,g){if(!d){return}var h=d.elbowId;var k=d.iconId;var j=$I(h);var e=j.get(0);var l=$I(k);var f=l.get(0);if(e){var i=e.className;e.className=i.replaceAll(c,g)}if(f){var m=f.className;if(m.indexOf("f-tree-folder-close")!==-1||m.indexOf("f-tree-folder-open")!==-1){f.className=m.replaceAll(c,g)}}},_renderVirtualRoot:function(){var p=this.options;var f=p.rootNode;var m=f.id;var n=f.text;var j=f.expanded;var c=FTree.idGenerate;var o=c();var l={_rootId:m,id:m,text:n,level:1,expanded:j,isSingle:true,liId:o,elbowId:c(),iconId:c(),aId:c(),iconCls:f.iconCls?"f-tree-button f-tree-folder "+f.iconCls:"f-tree-button f-tree-folder f-tree-folder-close",isFirst:true,isLast:true};if(p.staticData){p.syncLoad=true;this.hasLoaded=true;if(p.rootVisible){var e=p.staticData;var d=e.length;for(var g=0;g<d;g++){e[g].pid=m}}l.children=p.staticData}var h=[];var k="f-tree-button f-tree-elbow f-tree-elbow-plus-root-close";h.push('<ul  style="padding-left:0px;">');h.push('<li id="'+l.liId+'" f_value="'+l.id+'" f_value_type="'+typeof(l.id)+'" f_status="close">');h.push('<span id="'+l.elbowId+'"  class="'+k+'"></span>');if(p.selectModel==="selectChildren"||p.selectModel==="selectParent"){l.checkboxId=c();h.push('<span id="'+l.checkboxId+'"  class="'+this.nodeUnSelectedCls+'" ></span>')}h.push('<a id="'+l.aId+'"><span  id="'+l.iconId+'"  class="'+l.iconCls+'"></span>');h.push('<span class="node-text" title="'+l.text+'">'+l.text+"</span></a></li>");h.push("</ul>");this.dataStore[l.id]=l;this.bodyEl.append(h.join(""));if(l.expanded){this.expandNode(l)}},_renderFirstLevelNode:function(){var c=this.options;var d=c.staticData;if(d){c.syncLoad=true;this.hasLoaded=true;this._renderNode(null,d)}else{this._loadNode()}},setSize:function(g,d){var e=this.options;if(g){var c="string"==typeof(g);if(c&&g=="auto"){}else{if(c){g=parseInt(g)}this.element.width(g);this.bodyEl.width(g-2)}}if(d){var c="string"==typeof(d);if(c&&d=="auto"){}else{if("string"==typeof(d)){d=parseInt(d)}var f=0;if(this.headEl.length){f=this.headEl.outerHeight(false)}this.bodyEl.height(d-f-2)}}},setTitle:function(c){if(!c){return}if(!this.titleEl){this.titleEl=$I(this.id+"-title")}this.titleEl.length&&this.titleEl.text(c)},getSelectedNodes:function(){var c=[];var e=this.selectedNodes;for(var d in e){c.push(e[d])}return c}})})(jQuery);(function(a,b){a.widget("FUI.FWin",{options:{buttons:[],modal:true,buttonAlign:"center",width:400,height:300,dragable:true,maxable:false,isIframe:false,pageUrl:"",maximized:false,hasCloseBtn:true},_create:function(){this.firstShow=true},_init:function(){},destroy:function(){var d=this.options;if(d.hasCloseBtn){this.closeBtn.unbind()}this.maxBtn&&this.maxBtn.unbind();var c=this.options.buttons.length;var f=this.element.attr("id");for(var e=0;e<c;e++){a("#"+f+"-btn-"+e).unbind()}this.dragable&&this.dragable.destroy();this.maskEl=null;this.closeBtn=null;this.bodyContentEl=null;this.headerEl=null;this.titleEl=null;this.maxBtn=null;this.dragable=null;this.hiddenArrayList=null;a.Widget.prototype.destroy.call(this)},_prepareHtml:function(){if(this.firstShow){var d=this._generateWinHtml();var c=this.element;c.append(d);this.zIndex=WinIndex.getInstance().getIndex();c.css("z-index",this.zIndex);this._initProperty();this._bindEvent();this.firstShow=false}},show:function(){var d=this.options,e=this.element,g=e.attr("id"),f=d.onShow,c=d.onSetHtml;if(!this.isShown){this._prepareHtml()}this._showBodyMask();e.css("display","block");if(!this.isShown){if(d.maximized){this._max();this._toMaxIcon()}else{this._resize()}if(!d.isIframe&&!d.pageUrl){this.setHtml()}else{this.setPageUrl(d.pageUrl)}this.isShown=true}else{if(!this.isMax){this._rePosition()}else{this._max()}}f&&f()},_getIframeHtml:function(f){var c=[],e=this.element,g=e.attr("id"),d=this.options;c.push('<iframe id="'+g+'-iframe" ');c.push('class="f-win-iframe"  frameborder="0"></iframe>');return c.join("")},setPageUrl:function(g){if(!g){return}var f=this.options,d=window["$Utils"];var h="",e=this.bodyContentEl;var c=f.onSetHtml;e.unbind();e.empty();g=g||f.pageUrl;f.pageUrl=g;g=d.transUrl(g);if(f.isIframe){h=this._getIframeHtml(g);e.html(h);a("iframe:first",e).attr("src",g)}else{a.ajax({context:this,dataType:"html",url:g,success:function(i){e.html(i);c&&c()}})}},setHtml:function(g){var i=g,e=this.bodyContentEl;var f=this.element,j=f.attr("id"),d=this.options,c=d.onSetHtml;e.unbind();e.empty();if(!i){var h=a("#"+j+"-textarea");i=h.val();i=i.replace(/_textarea/g,"textarea");if(i){e.html(i);c&&c()}}else{e.html(i);c&&c()}},close:function(){var d=this.options,c=d.onClose;this.element.css("display","none");this._hideBodyMask();c&&c()},_rePosition:function(m,j){var o=this.options;m=m||o.width,j=j||o.height;var n=a(window),f=a(document);var c=n.width(),k=n.height();var i=jQuery.support.boxModel;var g=i&&document.documentElement.scrollLeft||document.body.scrollLeft;var d=i&&document.documentElement.scrollTop||document.body.scrollTop;var e=(c-m)/2+g;var l=(k-j)/2+d;l<0&&(l=0),e<0&&(e=0);this._showAt(e,l)},_showAt:function(e,d){var c=this.element.get(0).style;c.left=e+"px";c.top=d+"px"},_showBodyMask:function(){var e=this.options,f=this.element;var i=f.attr("id");if(e.modal){var d=window["$Utils"];if(a.browser.msie&&a.browser.version=="6.0"){this._hiddenAllSelectEl()}var c=i+"-mask";var h=a("#"+c);if(h.length==0){var g=this._generateMaskHtml(c);a("body").append(g);this._adjustMask(c);a("#"+c).show()}else{this._adjustMask(c);h.show()}}},_hiddenAllSelectEl:function(){if(this.hasHidden===true){return}var h=0;var g=0;var l;this.hiddenArrayList=this.hiddenArrayList||[];this.hasHidden=true;var d=a("body").children(".f-win").find("select");var k=a("select").not(d);var e=k.length;for(var h=0;h<e;h++){var c=k.get(h);var f=c.style;if(f.display=="none"||f.display=="block"){}else{f.display="none";this.hiddenArrayList.push(c)}}},_showAllSelectEl:function(){if(this.hasHidden===false){return}this.hasHidden=false;var e=this.hiddenArrayList;var d=a.isArray(e)&&e.length||0;if(e!=null&&e!=false&&d>0){for(var c=0;c<d;c++){e[c].style.display=""}}this.hiddenArrayList=e=null},_hideBodyMask:function(){var d=this.options;if(d.modal){if(this.maskEl&&this.maskEl.length){var c=window["$Utils"];if(a.browser.msie&&a.browser.version=="6.0"){this._showAllSelectEl()}this.maskEl.hide()}}},_generateMaskHtml:function(d){var c=[];c.push('<div id="');c.push(d);c.push('" class="f-mask-bg" style ="position:absolute; z-index:');c.push(this.zIndex-5);c.push(';display:none;"></div>');return c.join("")},_adjustMask:function(c){if(c===b){return}var e=a("#"+c);if(e.length){this.maskEl=e;var f=a(document).width();var d=a(document).height();e.width(f);e.height(d)}},_resize:function(){var d=this.options;var c=d.width;var e=d.height;this.setSize(c,e);this.isMax=false},setSize:function(l,j){if(typeof l!="number"||typeof j!="number"){return}var i=this.element,n=this.options;var c=n.onResize;var m=i.find(".f-win-tl");var f=i.find(".f-win-body");var g=i.find(".f-win-bl");this._rePosition(l,j);i.width(l);i.height(j);var d=m.outerHeight(true);var k=g.outerHeight(true);var e=j-d-k;f.height(e-4);f.width(l-16);f.triggerHandler("onResize");c&&c()},_initProperty:function(){var d=this.element;var c=this.options;if(c.hasCloseBtn){this.closeBtn=d.find(".f-win-close")}this.bodyContentEl=d.find(".f-win-body");this.headerEl=d.find(".f-win-header");this.titleEl=d.find(".f-win-title");this.maxBtn=d.find(".f-win-max")},_toMaxIcon:function(){this.dragable&&this.dragable.stop();this.maxBtn.removeClass("f-win-max");this.maxBtn.addClass("f-win-restore");this.headerEl.css("cursor","default");this.titleEl.css("cursor","default")},_toRestoreIcon:function(){this.dragable&&this.dragable.start();this.maxBtn.removeClass("f-win-restore");this.maxBtn.addClass("f-win-max");this.headerEl.css("cursor","move");this.titleEl.css("cursor","move")},_max:function(){var f=a(window),c=a(document);var d=f.width(),e=f.height();this.setSize(d,e);this.isMax=true},_bindEvent:function(){var h=this;var d=this.options;if(d.hasCloseBtn){this.closeBtn.bind("click",function(){h.close()})}if(this.maxBtn&&this.maxBtn.length){this.maxBtn.bind("click",function(m){var l=m.target;var i=l.className;if(i.indexOf("f-win-restore")>-1){h._resize();h._toRestoreIcon()}else{h._max();h._toMaxIcon()}})}var d=this.options;var g=d.buttons;var c=g.length;var f=this.element;var k=f.attr("id");for(var e=0;e<c;e++){var j=g[e].click||function(){};(function(i){a("#"+k+"-btn-"+e).click(function(l){i.call(h)})})(j)}if(d.dragable){this.dragable=new a.Dragable("f-win-title-"+k,k)}else{this.headerEl.css("cursor","default");this.titleEl.css("cursor","default")}},_front:function(){},_generateWinHtml:function(){var c=[],d=this.options,e=this.element,g=e.attr("id");c.push("");c.push('<div class="f-win-tl" ');c.push('id="f-win-title-'+g);c.push('">');c.push('<div class="f-win-tr">');c.push('<div class="f-win-tc">');c.push('<div class="f-win-header">');if(d.hasCloseBtn){c.push('<div class="f-win-tool f-win-close"></div>')}if(d.maxable){c.push('<div class="f-win-tool f-win-max"></div>')}c.push('<span class="f-win-title ">');c.push(d.title);c.push("</span>");c.push("</div>");c.push("</div>");c.push("</div>");c.push("</div>");c.push('<div class="f-win-bwrap">');c.push('<div class="f-win-ml">');c.push('<div class="f-win-mr">');c.push('<div class="f-win-mc">');c.push('<div class="f-win-body" >');c.push("</div>");c.push("</div>");c.push("</div>");c.push("</div>");c.push('<div class="f-win-bl">');c.push('<div class="f-win-br">');c.push('<div class="f-win-bc">');var f=this._generateButtonHtml(d.buttons,d.buttonAlign);c.push(f);c.push("</div>");c.push("</div>");c.push("</div>");c.push("</div>");return c.join("")},_loadContent:function(c){},_generateButtonHtml:function(h,e){var j=[];var g=h.length;if(g==0){j.push('<div style="height:8px;">');j.push("</div>")}else{j.push('<div style="height:40px;">');j.push('<div style="text-align:');j.push(""+e);j.push(';padding:4px 3px 2px 3px;">');j.push('<div style=" display: inline-block;">');j.push("<table><tr>");var c=this.element.attr("id");for(var f=0;f<g;f++){var d=h[f];var l=d.text;var k=d.iconCls;j.push('<td><div class="f-win-btn-l"><div class="f-win-btn-r"><div id="');j.push(c);j.push("-btn-"+f);j.push('" class="f-win-btn-c">');if(k){j.push('<div class="f-win-btn-icon ');j.push(k);j.push('" style="float:left;"></div>');j.push('<div class="f-win-btn-icon-text">')}else{j.push('<div class="f-win-btn-noicon-text">')}j.push(l);j.push("</div></td>")}j.push("</tr></table></div></div></div>")}return j.join("")}})})(jQuery);$.Dragable=function(a,b){this.targetId=a;this.widgetId=b;this._init();this._bindEvent()};$.Dragable.prototype={destroy:function(){},_init:function(){this.targetEl=$("#"+this.targetId);this.widgetEl=$("#"+this.widgetId);this.mousePos={}},_bindEvent:function(){this.targetEl.mousedown($.proxy(this.onMousedown,this))},onMousedown:function(g){var i=g.target;var j=i.className;if(j.indexOf("f-win-close")==-1&&j.indexOf("f-win-max")==-1&&j.indexOf("f-win-restore")==-1){var l=this.widgetEl.outerWidth(true);var d=this.widgetEl.outerHeight(true);var f=this.widgetEl.position();var a=$(document);var n=$("body");n.closeSelect();var m=[];m.push('<div id="dottedLine" class="f-dotted-line" style="');var k=parseInt(this.widgetEl.css("zIndex"));if(!isNaN(k)){m.push("z-index:"+(k+1)+";")}m.push("width:"+l+"px;");m.push("height:"+d+"px;");m.push("top:"+f.top+"px;");m.push("left:"+f.left+"px;");m.push('"></div>');n.append(m.join(""));this.dottedLineEl=$("#dottedLine");var c=g.pageX,b=g.pageY;this.mousePos={pageX:c,pageY:b};a.mousemove($.proxy(this.onMousemove,this));a.one("mouseup",$.proxy(this.onMouseup,this))}},onMousemove:function(j){var h=j.pageX,g=j.pageY,c=this.dottedLineEl,l=this.mousePos;var b=h-l.pageX,a=g-l.pageY;var i=c.position();var k=i.top+a;var f=i.left+b;if(k<=0){k=0;$(document).unbind("mouseup");this.onMouseup()}var d=k+"px",m=f+"px";var n=c.get(0).style;n.top=d;n.left=m;this.mousePos={pageX:h,pageY:g}},onMouseup:function(){var b=$(document);var c=$("body");var a=this.dottedLineEl.position();var d=this.widgetEl.get(0).style;d.top=a.top+"px";d.left=a.left+"px";this.dottedLineEl.remove();this.dottedLineEl=null;c.openSelect();b.unbind("mousemove")},start:function(){this.targetEl.mousedown($.proxy(this.onMousedown,this))},stop:function(){this.targetEl.unbind("mousedown",$.proxy(this.onMousedown,this))}};var WinIndex=(function(){var b=function(){var d=10100;this.getIndex=function(){return d+=10}};var a;var c={getInstance:function(){if(a==undefined){a=new b()}return a}};return c})();(function(a){a.widget("FUI.FPagingbar",{options:{pageSize:10,maxPageSize:300},_create:function(){var b=this.element;this.id=this.element.attr("id");this.start=1;this.pageIndex=1},_init:function(){var b=this.element.attr("id");this.firstBtn=$I(b+"-page-first");this.prevBtn=$I(b+"-page-prev");this.nextBtn=$I(b+"-page-next");this.lastBtn=$I(b+"-page-last");this.refreshBtn=$I(b+"-page-refresh");this.beforePageTextSpan=$I(b+"-page-beforeText");this.afterPageTextSpan=$I(b+"-page-afterText");this.beforePageSizeTextSpan=$I(b+"-page-size-beforeText");this.afterPageSizeTextSpan=$I(b+"-page-size-afterText");this.pageSizeInput=$I(b+"-page-size-input");this.inputBtn=$I(b+"-page-input");this.msgText=$I(b+"-page-totalcount");if(this.beforePageTextSpan.length>0){this.options.pageSize=parseInt(this.options.pageSize)||10;this.options.maxPageSize=parseInt(this.options.maxPageSize)||300;if(this.options.maxPageSize<0){this.options.maxPageSize=300}if(this.options.pageSize<1){this.options.pageSize=1}if(this.options.pageSize>this.options.maxPageSize){this.options.pageSize=this.options.maxPageSize}this.pageSizeInput.val(this.options.pageSize)}this._initI18n();this._initMsg();this._bindPageEvent()},getParams:function(){var d={};var c=this.options.pageSize;var b=this.pageIndex;var e=1+((b-1)*c);this.start=e;d.start=e;d.limit=c;d.pageNum=b;return d},getDefaultParams:function(){var c={};var b=this.options.pageSize;this.pageIndex=1;this.start=1;c.start=this.start;c.limit=b;c.pageNum=this.pageIndex;return c},resetPagebar:function(c,g){var f=window["$Utils"];var b=this.pageIndex;this.totalCount=g;var e=this.options.pageSize;this.pageCount=parseInt(this.totalCount/e);if(g%e>0){this.pageCount++}if(g){if(b<2){this._disableButton(this.firstBtn);this._disableButton(this.prevBtn)}else{this._enableButton(this.firstBtn);this._enableButton(this.prevBtn)}if(b<this.pageCount){this._enableButton(this.nextBtn);this._enableButton(this.lastBtn)}else{this._disableButton(this.nextBtn);this._disableButton(this.lastBtn)}}else{this._disableButton(this.firstBtn);this._disableButton(this.prevBtn);this._disableButton(this.nextBtn);this._disableButton(this.lastBtn)}this._enableButton(this.refreshBtn);var h=this.start;var d=h+e-1;(d>g)&&(d=g);this.inputBtn.val(b);this.pageSizeInput.val(e);this.afterPageTextSpan.text(f.format(this.afterPageText,this.pageCount));this.msgText.text(f.format(this.pageTotalMsg,h,d,g))},_initI18n:function(){var b=a.FUI.lang&&a.FUI.lang.pagingbar||{};this.beforePageText=b.beforePageText||"第";this.afterPageText=b.afterPageText||"页 共{0} 页";this.pageTotalMsg=b.pageTotalMsg||"显示{0}到{1},共{2}条数据";this.beforePageSizeText=b.beforePageSizeText||"每页";this.afterPageSizeText=b.afterPageSizeText||"条"},_initMsg:function(){var b=window["$Utils"];this.beforePageTextSpan.text(this.beforePageText);this.afterPageTextSpan.text(b.format(this.afterPageText,"0"));this.msgText.text(b.format(this.pageTotalMsg,"0","0","0"));this.beforePageSizeTextSpan.text(this.beforePageSizeText);this.afterPageSizeTextSpan.text(this.afterPageSizeText)},_first:function(){this.pageIndex=1;this._doLoad()},_prev:function(){var b=this.pageIndex-1;b=b>0?b:1;this.pageIndex=b;this._doLoad()},_next:function(){this.pageIndex++;this._doLoad()},_last:function(){this.pageIndex=this.pageCount;this._doLoad()},_refresh:function(){this._tryPageSizeChange();this._doLoad(true)},_tryPageSizeChange:function(){if(this.pageSizeInput.length==0){return}var b=parseInt(this.pageSizeInput.val());if(isNaN(b)){this.pageSizeInput.val(this.options.pageSize);return}if(b<1){b=1}if(b>this.options.maxPageSize){b=this.options.maxPageSize}this.pageSizeInput.val(b);if(this.options.pageSize===b){return}this.options.pageSize=b;this.start=1;this.pageIndex=1},_doLoad:function(e){var b=window["$Component"];if(!this.gridId){this.gridId=this.element.parent().attr("id")}var d=this.getParams();var c=$I(this.gridId);if(e){b.tryCall(c,"resetDataCache",false,e)}else{b.tryCall(c,"resetDataCache",false)}b.tryCall(c,"loadForPagingbar",d);c=null},_disableButton:function(c){var b=c.attr("f_grid_page_status");if("enable"==b){var d=c.attr("f_grid_page_type");c.get(0).className="f-grid-page-button  f-grid-page-"+d+"-disabled";c.attr("f_grid_page_status","disabled")}},_enableButton:function(c){var b=c.attr("f_grid_page_status");if("disabled"==b){var d=c.attr("f_grid_page_type");c.get(0).className="f-grid-page-button f-grid-page-btn f-grid-page-"+d;c.attr("f_grid_page_status","enable")}},_bindPageEvent:function(){var d=this;var e=this.element;var f=this.inputBtn;var c=this.pageSizeInput;var b=window["$Utils"];e.bind({click:function(j){var g=j.target;var i=g.getAttribute("f_grid_page_type");var h=g.getAttribute("f_grid_page_status");if(i&&h!=="disabled"){if("first"==i){d._first()}else{if("prev"==i){d._prev()}else{if("next"==i){d._next()}else{if("last"==i){d._last()}else{if("refresh"==i){d._refresh()}}}}}}},mouseover:function(j){var g=j.target;var i=g.getAttribute("f_grid_page_type");var h=g.getAttribute("f_grid_page_status");if(i&&h==="enable"){b.replaceClass(g,"f-grid-page-button f-grid-page-btn f-grid-page-"+i+"-hover")}},mouseout:function(j){var g=j.target;var i=g.getAttribute("f_grid_page_type");var h=g.getAttribute("f_grid_page_status");if(i&&h==="enable"){b.replaceClass(g,"f-grid-page-button f-grid-page-btn f-grid-page-"+i)}},mousedown:function(j){var g=j.target;var i=g.getAttribute("f_grid_page_type");var h=g.getAttribute("f_grid_page_status");if(i&&h==="enable"){b.replaceClass(g,"f-grid-page-button f-grid-page-btn f-grid-page-"+i+"-active")}},mouseup:function(j){var g=j.target;var i=g.getAttribute("f_grid_page_type");var h=g.getAttribute("f_grid_page_status");if(i&&h==="enable"){b.replaceClass(g,"f-grid-page-button f-grid-page-btn f-grid-page-"+i+"-hover")}}});c.bind({keydown:function(h){var g=h.keyCode;if(g==13){d._tryPageSizeChange();d._doLoad(true)}}});f.bind({blur:function(g){d.inputBtn.val(d.pageIndex)},keydown:function(l){var i=l.target;var k=l.keyCode;if(k==13){var h=parseInt(i.value);var j=/^[0-9]*[1-9][0-9]*$/;var g=j.exec(h);if(g){if(h>d.pageCount){h=d.pageCount;d.afterPageTextSpan.text(b.format(d.afterPageText,h))}if(d.pageIndex!=h){d.pageIndex=h;d._doLoad()}}else{d.inputBtn.val(d.pageIndex)}}}})},destroy:function(){this.element.unbind();this.inputBtn.unbind();this.inputBtn=null;this.firstBtn=null;this.prevBtn=null;this.nextBtn=null;this.lastBtn=null;this.refreshBtn=null;this.beforePageTextSpan=null;this.afterPageTextSpan=null;this.beforePageSizeTextSpan=null;this.afterPageSizeTextSpan=null;this.msgText=null}})})(jQuery);(function(c,d){var b=[];b.push('<div class="f-grid-page" id="{id}">');b.push('<div class="f-grid-page-bg">');b.push('<div style="float:left;">');b.push('<table cellspacing="0" cellpadding="0">');b.push("<tbody>");b.push("<tr>");b.push('<td><span id="{id}-page-first" f_grid_page_status="disabled" f_grid_page_type="first" class="f-grid-page-button  f-grid-page-first-disabled"></span></td>');b.push('<td><span id="{id}-page-prev" f_grid_page_status="disabled" f_grid_page_type="prev" class="f-grid-page-button  f-grid-page-prev-disabled"></span></td>');b.push('<td><span class="f-grid-page-split"></span></td>');b.push('<td><span id="{id}-page-beforeText" class="f-grid-page-content">第</span><input id="{id}-page-input" f_grid_page_type="pageIndex" value="0" class="f-grid-page-input"></td>');b.push('<td style="padding-left:4px;"><span id="{id}-page-afterText" class="grid-page-content">页 共0页</span></td>');b.push('<td><span class="f-grid-page-split"></span></td>');b.push('<td><span id="{id}-page-next" f_grid_page_status="disabled" f_grid_page_type="next" class="f-grid-page-button  f-grid-page-next-disabled"></span></td>');b.push('<td><span id="{id}-page-last" f_grid_page_status="disabled" f_grid_page_type="last" class="f-grid-page-button f-grid-page-last-disabled"></span></td>');b.push('<td><span class="f-grid-page-split"></span></td>');b.push('<td><span id="{id}-page-refresh" f_grid_page_status="enable" f_grid_page_type="refresh" class="f-grid-page-button f-grid-page-btn f-grid-page-refresh"></span></td>');b.push("</tr>");b.push("</tbody>");b.push("</table>");b.push("</div>");b.push('<div style="float:right;">');b.push('<table cellspacing="0" cellpadding="0" border="0">');b.push("<tbody>");b.push("<tr>");b.push('<td><span id="${id}-page-totalcount" class="f-total-count"></span></td>');b.push("</tr>");b.push("</tbody>");b.push("</table>");b.push("</div>");b.push('<div style="clear:both;"></div>');b.push("</div>");b.push("</div>");var a=b.join("");c.widget("FUI.FComboGrid",{options:{readonly:false,enabled:true,disabled:false,selectable:true,filterDelay:300,valueField:"value",displayField:"text",width:150,pageSize:10,listHeight:200,forceSelection:false,listWidth:260,baseParams:{},forceLoad:true,filterField:null,multiSelect:false,dataHandler:"inner"},_create:function(){var f=this.options,h=f.onFilter,e=window["$Utils"];this.isFirstShow=true;f.enabled=!f.disabled;var g=this.element;this.inputEl=g.next();this.imgEl=this.inputEl.next();this.isShow=false;this.value="";if(f.enabled&&f.selectable){this._bindEvent()}},_showList:function(){var e=window["$Utils"];var j=this.listEl;var i=this.inputEl;var k=e.getAlignXY(i,j);var h=k.top;var g=k.left;var f=j.get(0).style;f.left=g+"px";f.top=h+"px";f.width=(this._getListWidth()-2)+"px";f.display="block"},_show:function(f,k,g){var m=this.options,i=window["$Utils"];if(f){c(document).trigger("click.FComboGrid")}if(this.isShow!==true){if(this.isLoading){return}var h=this.isFirstShow;this._prevShowList();this._showList();this._appendEvent();this.isShow=true}if(h||k){m.onBeforesend&&m.onBeforesend();var l=m.filterField||m.valueField;var j=g&&g[l]||"";var e={};if(g&&j){e[l]=j;i.apply(m.baseParams,e);this.listEl.FGrid("setBaseParams",m.baseParams)}else{delete m.baseParams[l];this.listEl.FGrid("setBaseParams",m.baseParams)}this.listEl.FGrid("load",g||{})}},setBaseParams:function(e){if(!e){return}this.options.baseParams=e;this.listEl.FGrid("setBaseParams",e)},hideList:function(){this._hideList()},_prevShowList:function(){var f=this.options;if(this.isFirstShow){var h=[];var p=this.element.attr("id");var o=p+"-combogrid";var q=o+"-combopage";h.push('<div id="');h.push(o);h.push('" class="f-combo-list-container f-grid" style="overflow:hidden; display:none;">');h.push('<div id="'+o+'-grid-head" class="f-grid-head" ></div>');h.push('<div id="'+o+'-grid-body" class="f-grid-body" ></div>');h.push(a.replaceAll("{id}",q));h.push("</div>");c("body").append(h.join(""));this.listEl=$I(o);var u=f.displayField;var e=f.valueField;var y=f.onSelect;delete f.onSelect;var s=function(D,B){var C=D.length;var z="";for(var A=0;A<C;A++){if(A==0){z+=D[B]}else{z+=","+D[B]}}return z};$I(q).FPagingbar({pageSize:f.pageSize});var x=f.onLoadsuccess;delete f.onLoadsuccess;var i=function(D,F,A){var C=$I(o);var E=$I(p);var B=E.val();var z=B&&B.split(",");C.FGrid("selectRowsBydata",z,e);E=null;C=null;x&&x(D,F,A)};var n=f.onLoadfailure;delete f.onLoadfailure;var g=f.onError;delete f.onError;var m=f.baseParams;delete f.baseParams;f.baseParams={};var w=this._getListWidth()-2;var r=f.listHeight;var k=f.dataUrl;var l=f.colModel;delete f.colModel;var v=onRowSelectFn=onRowClickFn=function(){};if(f.multiSelect){onRowSelectFn=function(E,G){var B=$I(p);var F=$I(o);var A=E[u];var D=E[e];var z=B.val();var C=B.next().val();if(C){A=C+","+A}if(z){D=z+","+D}B.val(D);B.next().val(A);B.FComboGrid("setDisplayValue",A);y&&y(E,D,A)};v=function(C,H){var E=$I(p);var F=$I(o);var G=C[u];var J=C[e];var z=E.val();var A=E.next().val();if(A){var L=A.split(",");var B=L.length;var M=[];for(var D=0;D<B;D++){var K=L[D];if(K!==G){M.push(K)}}G=M.join(",")}if(z){var I=z.split(",");var B=I.length;var M=[];for(var D=0;D<B;D++){var K=I[D];if(K!==J){M.push(K)}}J=M.join(",")}E.val(J);E.next().val(G);E.FComboGrid("setDisplayValue",G);y&&y(C,J,G)};var j=function(z){return z[e]+z[u]};this.listEl.FGrid({width:w,height:r,dataUrl:k,selectModel:"multiSelect",crossPageSelect:true,uniqueKey:j,colModel:l,pagingbarId:q,onRowDeselect:v,onRowSelect:onRowSelectFn,autoload:false,onLoadError:g,onLoadfailure:n,onLoadsuccess:i,baseParams:m});c("#"+this.listEl.attr("id")+"-head-table button",this.listEl).css({visibility:"hidden"})}else{onRowClickFn=function(C,D){var A=$I(p);var z=C[u];var B=C[e];A.val(B);A.next().val(z);A.FComboGrid("setDisplayValue",z);A.FComboGrid("hideList");y&&y(C,B,z)};this.listEl.FGrid({width:w,height:r,dataUrl:k,colModel:l,pagingbarId:q,onRowClick:onRowClickFn,autoload:false,onLoadError:g,onLoadfailure:n,onLoadsuccess:i,baseParams:m})}this.isFirstShow=false;var t=this._getEvent("list");this.listEl.bind(t)}},_bindEvent:function(){var f=this._getEvent("img");this.imgEl.bind(f);var g=this._getEvent("input");this.inputEl.bind(g);if(!this.isFirstShow){var e=this._getEvent("list");this.listEl&&this.listEl.bind(e)}},_getEvent:function(o){var f=this,s=f.options,j=this.element,q=this.inputEl,m=window["$Utils"],h=s.multiSeparator,i=document;var g=function(){if(f.isShow){f._hideList()}else{f.inputEl.focus();f._show(true,s.forceLoad);f.inputEl.get(0).select()}};var n={click:function(t){g();m.stopPropagation(t)}};if(o=="img"){return n}var e=function(){if(this.handler){clearTimeout(this.handler)}var t=this.options;var u=this.inputEl.val();var v={};v[t.filterField||t.valueField]=u;this._show(false,true,v);t=null};var l=c.proxy(e,f);var r=function(){if(f.handler){clearTimeout(f.handler)}f.handler=setTimeout(l,f.options.filterDelay)};var k={mousedown:function(t){if(s.forceSelection){g()}},keyup:function(u){var t=u.keyCode;if(c.browser.mozilla&&t!==38&&t!==40&&t!==13&&t!==33&&t!==34){r()}},keydown:function(u){var t=u.keyCode;if(t===38){}else{if(t===40){if(f.isShow){}else{f._show(false,s.forceLoad)}}else{if(t===13){if(f.isShow){}}else{if(t===33){}else{if(t==34){}else{if(t==9){c(i).trigger("click.FComboGrid")}else{if(!s.readonly&&!c.browser.mozilla){r()}}}}}}}m.stopPropagation(u)}};if(o=="input"){return k}var p={click:function(t){f.inputEl.focus();t.stopImmediatePropagation()}};if(o=="list"){return p}},_getListWidth:function(){var h=this.inputEl;var g=this.imgEl;var e=this.options;var j=e.listWidth;if(j&&j<260){e.listWidth=j=260}var i=h.outerWidth()+g.outerWidth();var f=j?j:i;return f},_appendEvent:function(){var h=this,e=window["$Utils"];var f=function(i){e.stopPropagation(i)};var g=function(){h._hideList();h._resetValueOnBlur();h.inputEl.unbind("click.FComboGrid",f);c(document).unbind("click.FComboGrid")};c(document).one("click.FComboGrid",g);h.inputEl.bind("click.FComboGrid",f)},setDisplayValue:function(e){this.displayValue=e},_resetValueOnBlur:function(){var f=this.inputEl.val();if(!f){this.element.val("");this.inputEl.val("")}else{var e=this.displayValue;this.inputEl.val(e)}},_hideList:function(){if(this.isShow===true){this.listEl.hide();this.isShow=false;if(this.options.dataHandler&&this.options.dataHandler!=="inner"){this.reset()}}},destroy:function(){this.inputEl.unbind();if(this.listEl){this.listEl.remove()}this.imgEl.unbind();c(document).unbind("click.FComboGrid");this.inputEl=null;this.listEl=null;this.imgEl=null;c.Widget.prototype.destroy.call(this)},isSelectable:function(){return this.options.selectable},setSelectable:function(f){var h=this,e=window["$Utils"];if(h.options.selectable===f){return}if(true===f){var g=h.inputEl.parent();if(g.length>0){h.inputEl.removeAttr("readonly");h.options.selectable=f;e.removeClass(g.get(0),"f-combo-selectable");h._bindEvent()}}else{if(false===f){var g=h.inputEl.parent();if(g.length>0){h.inputEl.attr("readonly","readonly");h.options.selectable=f;e.addClass(g.get(0),"f-combo-selectable");h._unbindEvent()}}}},isDisabled:function(){return !this.options.enabled},setDisabled:function(g){var e=window["$Utils"],h=this;if(h.options.enabled===!g){return}if(false===g){var f=this.element.parent();if(f.length>0){e.removeClass(f.get(0),"f-combo-disable");h.element.removeAttr("disabled");h.inputEl.removeAttr("disabled");h.options.enabled=true;h._bindEvent()}}else{if(true===g){var f=this.element.parent();if(f.length>0){e.addClass(f.get(0),"f-combo-disable");h.element.attr("disabled","");h.inputEl.attr("disabled","");h.options.enabled=false;h._unbindEvent()}}}},getValue:function(){return this.element.val()},setValue:function(f,e){if(""==f){this.element.val("");this.inputEl.val("")}else{this.element.val(f);if(e){this.inputEl.val(e);this.displayValue=e}else{this.inputEl.val(f);this.displayValue=f}}},reset:function(){this.setValue("")},isReadonly:function(){return this.options.readonly},setReadonly:function(f){var i=this,g=i.options,e=window["$Utils"];if(g.readonly===f){return}if(true==f){var h=i.inputEl.parent();if(h.length>0){g.readonly=f;i.inputEl.attr("readonly","readonly");e.addClass(h.get(0),"f-combo-readonly")}}else{if(false==f){var h=i.inputEl.parent();if(h.length>0){g.readonly=f;i.inputEl.removeAttr("readonly");e.removeClass(h.get(0),"f-combo-readonly")}}}},_unbindEvent:function(){this.imgEl.unbind();this.inputEl.unbind();this.listEl&&this.listEl.unbind();c(document).unbind("click.FCombo")}})})(jQuery);